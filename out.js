(function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(r,'a',r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=215)})([function(e,t,r){'use strict';function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.autoDetectRenderer=t.Application=t.Filter=t.SpriteMaskFilter=t.Quad=t.RenderTarget=t.ObjectRenderer=t.WebGLManager=t.Shader=t.CanvasRenderTarget=t.TextureUvs=t.VideoBaseTexture=t.BaseRenderTexture=t.RenderTexture=t.BaseTexture=t.Texture=t.Spritesheet=t.CanvasGraphicsRenderer=t.GraphicsRenderer=t.GraphicsData=t.Graphics=t.TextMetrics=t.TextStyle=t.Text=t.SpriteRenderer=t.CanvasTinter=t.CanvasSpriteRenderer=t.Sprite=t.TransformBase=t.TransformStatic=t.Transform=t.Container=t.DisplayObject=t.Bounds=t.glCore=t.WebGLRenderer=t.CanvasRenderer=t.ticker=t.utils=t.settings=void 0;var a=r(1);Object.keys(a).forEach(function(e){'default'===e||'__esModule'===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=r(4);Object.keys(i).forEach(function(e){'default'===e||'__esModule'===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var s=r(7);Object.defineProperty(t,'glCore',{enumerable:!0,get:function(){return n(s).default}});var d=r(29);Object.defineProperty(t,'Bounds',{enumerable:!0,get:function(){return n(d).default}});var l=r(60);Object.defineProperty(t,'DisplayObject',{enumerable:!0,get:function(){return n(l).default}});var u=r(13);Object.defineProperty(t,'Container',{enumerable:!0,get:function(){return n(u).default}});var p=r(61);Object.defineProperty(t,'Transform',{enumerable:!0,get:function(){return n(p).default}});var c=r(62);Object.defineProperty(t,'TransformStatic',{enumerable:!0,get:function(){return n(c).default}});var h=r(30);Object.defineProperty(t,'TransformBase',{enumerable:!0,get:function(){return n(h).default}});var g=r(34);Object.defineProperty(t,'Sprite',{enumerable:!0,get:function(){return n(g).default}});var f=r(134);Object.defineProperty(t,'CanvasSpriteRenderer',{enumerable:!0,get:function(){return n(f).default}});var y=r(35);Object.defineProperty(t,'CanvasTinter',{enumerable:!0,get:function(){return n(y).default}});var m=r(136);Object.defineProperty(t,'SpriteRenderer',{enumerable:!0,get:function(){return n(m).default}});var _=r(138);Object.defineProperty(t,'Text',{enumerable:!0,get:function(){return n(_).default}});var x=r(73);Object.defineProperty(t,'TextStyle',{enumerable:!0,get:function(){return n(x).default}});var b=r(72);Object.defineProperty(t,'TextMetrics',{enumerable:!0,get:function(){return n(b).default}});var v=r(106);Object.defineProperty(t,'Graphics',{enumerable:!0,get:function(){return n(v).default}});var T=r(63);Object.defineProperty(t,'GraphicsData',{enumerable:!0,get:function(){return n(T).default}});var S=r(109);Object.defineProperty(t,'GraphicsRenderer',{enumerable:!0,get:function(){return n(S).default}});var E=r(107);Object.defineProperty(t,'CanvasGraphicsRenderer',{enumerable:!0,get:function(){return n(E).default}});var P=r(139);Object.defineProperty(t,'Spritesheet',{enumerable:!0,get:function(){return n(P).default}});var C=r(10);Object.defineProperty(t,'Texture',{enumerable:!0,get:function(){return n(C).default}});var w=r(11);Object.defineProperty(t,'BaseTexture',{enumerable:!0,get:function(){return n(w).default}});var A=r(36);Object.defineProperty(t,'RenderTexture',{enumerable:!0,get:function(){return n(A).default}});var I=r(74);Object.defineProperty(t,'BaseRenderTexture',{enumerable:!0,get:function(){return n(I).default}});var M=r(76);Object.defineProperty(t,'VideoBaseTexture',{enumerable:!0,get:function(){return n(M).default}});var R=r(75);Object.defineProperty(t,'TextureUvs',{enumerable:!0,get:function(){return n(R).default}});var O=r(67);Object.defineProperty(t,'CanvasRenderTarget',{enumerable:!0,get:function(){return n(O).default}});var D=r(12);Object.defineProperty(t,'Shader',{enumerable:!0,get:function(){return n(D).default}});var k=r(15);Object.defineProperty(t,'WebGLManager',{enumerable:!0,get:function(){return n(k).default}});var L=r(21);Object.defineProperty(t,'ObjectRenderer',{enumerable:!0,get:function(){return n(L).default}});var B=r(22);Object.defineProperty(t,'RenderTarget',{enumerable:!0,get:function(){return n(B).default}});var N=r(71);Object.defineProperty(t,'Quad',{enumerable:!0,get:function(){return n(N).default}});var F=r(70);Object.defineProperty(t,'SpriteMaskFilter',{enumerable:!0,get:function(){return n(F).default}});var U=r(69);Object.defineProperty(t,'Filter',{enumerable:!0,get:function(){return n(U).default}});var X=r(58);Object.defineProperty(t,'Application',{enumerable:!0,get:function(){return n(X).default}});var G=r(59);Object.defineProperty(t,'autoDetectRenderer',{enumerable:!0,get:function(){return G.autoDetectRenderer}});var V=r(2),W=o(V),j=r(37),H=o(j),Y=r(3),z=n(Y),q=r(14),K=n(q),Z=r(20),Q=n(Z);t.settings=z.default,t.utils=W,t.ticker=H,t.CanvasRenderer=K.default,t.WebGLRenderer=Q.default},function(e,t){'use strict';var r=Math.PI;t.__esModule=!0;var o=t.VERSION='4.5.2',n=t.PI_2=2*r,a=t.RAD_TO_DEG=180/r,i=t.DEG_TO_RAD=r/180,s=t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},d=t.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},l=t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},u=t.SCALE_MODES={LINEAR:0,NEAREST:1},p=t.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},c=t.GC_MODES={AUTO:0,MANUAL:1},h=t.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,g=t.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,f=t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,y=t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},m=t.PRECISION={LOW:'lowp',MEDIUM:'mediump',HIGH:'highp'},_=t.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},x=t.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},b=t.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(e,t,r){'use strict';function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}var a=Math.round;t.__esModule=!0,t.BaseTextureCache=t.TextureCache=t.mixins=t.pluginTarget=t.EventEmitter=t.removeItems=t.isMobile=void 0,t.uid=function(){return++x},t.hex2rgb=function(e,t){return t=t||[],t[0]=(255&e>>16)/255,t[1]=(255&e>>8)/255,t[2]=(255&e)/255,t},t.hex2string=function(e){return e=e.toString(16),e='000000'.substr(0,6-e.length)+e,'#'+e},t.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(0|255*e[2])},t.getResolutionOfUrl=function(e,t){var r=d.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t===void 0?1:t},t.decomposeDataUri=function(e){var t=i.DATA_URI.exec(e);return t?{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}:void 0},t.getUrlFileExtension=function(e){var t=i.URL_FILE_EXTENSION.exec(e);return t?t[1].toLowerCase():void 0},t.getSvgSize=function(e){var t=i.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=a(parseFloat(t[3])),r[t[5]]=a(parseFloat(t[7]))),r},t.skipHello=function(){b=!0},t.sayHello=function(e){if(!b){if(-1<navigator.userAgent.toLowerCase().indexOf('chrome')){var t=['\n %c %c %c Pixi.js '+i.VERSION+' - \u2730 '+e+' \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n','background: #ff66a5; padding:5px 0;','background: #ff66a5; padding:5px 0;','color: #ff66a5; background: #030307; padding:5px 0;','background: #ff66a5; padding:5px 0;','background: #ffc3dc; padding:5px 0;','background: #ff66a5; padding:5px 0;','color: #ff2424; background: #fff; padding:5px 0;','color: #ff2424; background: #fff; padding:5px 0;','color: #ff2424; background: #fff; padding:5px 0;'];window.console.log.apply(console,t)}else window.console&&window.console.log('Pixi.js '+i.VERSION+' - '+e+' - http://www.pixijs.com/');b=!0}},t.isWebGLSupported=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement('canvas'),r=t.getContext('webgl',e)||t.getContext('experimental-webgl',e),o=!!(r&&r.getContextAttributes().stencil);if(r){var n=r.getExtension('WEBGL_lose_context');n&&n.loseContext()}return r=null,o}catch(t){return!1}},t.sign=function(e){return 0===e?0:0>e?-1:1},t.destroyTextureCache=function(){for(var e in v)v[e].destroy();for(e in T)T[e].destroy()},t.clearTextureCache=function(){for(var e in v)delete v[e];for(e in T)delete T[e]};var i=r(1),s=r(3),d=n(s),l=r(9),u=n(l),p=r(146),c=n(p),h=r(145),g=o(h),f=r(27),y=o(f),m=r(194),_=n(m),x=0,b=!1;t.isMobile=y,t.removeItems=_.default,t.EventEmitter=u.default,t.pluginTarget=c.default,t.mixins=g;var v=t.TextureCache=Object.create(null),T=t.BaseTextureCache=Object.create(null)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(144),a=o(n),i=r(142),s=o(i);t.default={TARGET_FPMS:0.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,a.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:'highp',PRECISION_FRAGMENT:'mediump',CAN_UPLOAD_SAME_BUFFER:(0,s.default)()}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(32);Object.defineProperty(t,'Point',{enumerable:!0,get:function(){return o(n).default}});var a=r(65);Object.defineProperty(t,'ObservablePoint',{enumerable:!0,get:function(){return o(a).default}});var i=r(31);Object.defineProperty(t,'Matrix',{enumerable:!0,get:function(){return o(i).default}});var s=r(64);Object.defineProperty(t,'GroupD8',{enumerable:!0,get:function(){return o(s).default}});var d=r(116);Object.defineProperty(t,'Circle',{enumerable:!0,get:function(){return o(d).default}});var l=r(117);Object.defineProperty(t,'Ellipse',{enumerable:!0,get:function(){return o(l).default}});var u=r(118);Object.defineProperty(t,'Polygon',{enumerable:!0,get:function(){return o(u).default}});var p=r(33);Object.defineProperty(t,'Rectangle',{enumerable:!0,get:function(){return o(p).default}});var c=r(119);Object.defineProperty(t,'RoundedRectangle',{enumerable:!0,get:function(){return o(c).default}})},function(e,t,r){var o=Math.sqrt,n=Math.ceil,a=Math.floor,s=Math.max,d=Math.min,l=Math.sin,u=Math.cos,p=Math.pow,h=Math.abs,i=Math.round,g=Math.PI;(function(t){var c,c;(function(t){e.exports=t()})(function(){return function a(d,e,t){function r(i,o){if(!e[i]){if(!d[i]){if(!o&&'function'==typeof c&&c)return c(i,!0);if(n)return c(i,!0);var s=new Error('Cannot find module \''+i+'\'');throw s.code='MODULE_NOT_FOUND',s}var p=e[i]={exports:{}};d[i][0].call(p.exports,function(t){var e=d[i][1][t];return r(e?e:t)},p,p.exports,a,d,e,t)}return e[i].exports}for(var n='function'==typeof c&&c,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vertices'),n=e('../geometry/Vector'),a=e('../core/Sleeping'),i=e('../render/Render'),s=e('../core/Common'),d=e('../geometry/Bounds'),l=e('../geometry/Axes');(function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(t){var r={id:s.nextId(),type:'body',label:'Body',parts:[],plugin:{},angle:0,vertices:o.fromPath('L 0 0 L 40 0 L 40 40 L 0 40'),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:1e-3,restitution:0,friction:0.1,frictionStatic:0.5,frictionAir:0.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:0.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},n=s.extend(r,t);return e(n,t),n},r.nextGroup=function(e){return e?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory<<=1,r._nextCategory};var e=function(e,t){t=t||{},r.set(e,{bounds:e.bounds||d.create(e.vertices),positionPrev:e.positionPrev||n.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),o.rotate(e.vertices,e.angle,e.position),l.rotate(e.axes,e.angle),d.update(e.bounds,e.vertices,e.velocity),r.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var a=e.isStatic?'#2e2b44':s.choose(['#006BA6','#0496FF','#FFBC42','#D81159','#8F2D56']),i=s.shadeColor(a,-20);e.render.fillStyle=e.render.fillStyle||a,e.render.strokeStyle=e.render.strokeStyle||i,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};r.set=function(e,t,o){for(var n in'string'==typeof t&&(n=t,t={},t[n]=o),t)o=t[n],t.hasOwnProperty(n)&&('isStatic'===n?r.setStatic(e,o):'isSleeping'===n?a.set(e,o):'mass'===n?r.setMass(e,o):'density'===n?r.setDensity(e,o):'inertia'===n?r.setInertia(e,o):'vertices'===n?r.setVertices(e,o):'position'===n?r.setPosition(e,o):'angle'===n?r.setAngle(e,o):'velocity'===n?r.setVelocity(e,o):'angularVelocity'===n?r.setAngularVelocity(e,o):'parts'===n?r.setParts(e,o):e[n]=o)},r.setStatic=function(e,t){for(var r=0,o;r<e.parts.length;r++)o=e.parts[r],o.isStatic=t,t?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=Infinity,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,delete o._original)},r.setMass=function(e,t){e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},r.setDensity=function(e,t){r.setMass(e,t*e.area),e.density=t},r.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},r.setVertices=function(e,t){e.vertices=t[0].body===e?t:o.create(t,e),e.axes=l.fromVertices(e.vertices),e.area=o.area(e.vertices),r.setMass(e,e.density*e.area);var n=o.centre(e.vertices);o.translate(e.vertices,n,-1),r.setInertia(e,r._inertiaScale*o.inertia(e.vertices,e.mass)),o.translate(e.vertices,e.position),d.update(e.bounds,e.vertices,e.velocity)},r.setParts=function(e,n,a){var s;for(n=n.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,s=0;s<n.length;s++){var i=n[s];i!==e&&(i.parent=e,e.parts.push(i))}if(1!==e.parts.length){if(a='undefined'==typeof a||a,a){var d=[];for(s=0;s<n.length;s++)d=d.concat(n[s].vertices);o.clockwiseSort(d);var l=o.hull(d),u=o.centre(l);r.setVertices(e,l),o.translate(e.vertices,u)}var p=t(e);e.area=p.area,e.parent=e,e.position.x=p.centre.x,e.position.y=p.centre.y,e.positionPrev.x=p.centre.x,e.positionPrev.y=p.centre.y,r.setMass(e,p.mass),r.setInertia(e,p.inertia),r.setPosition(e,p.centre)}},r.setPosition=function(e,t){var r=n.sub(t,e.position);e.positionPrev.x+=r.x,e.positionPrev.y+=r.y;for(var a=0,i;a<e.parts.length;a++)i=e.parts[a],i.position.x+=r.x,i.position.y+=r.y,o.translate(i.vertices,r),d.update(i.bounds,i.vertices,e.velocity)},r.setAngle=function(e,t){var r=t-e.angle;e.anglePrev+=r;for(var a=0,i;a<e.parts.length;a++)i=e.parts[a],i.angle+=r,o.rotate(i.vertices,r,e.position),l.rotate(i.axes,r),d.update(i.bounds,i.vertices,e.velocity),0<a&&n.rotateAbout(i.position,r,e.position,i.position)},r.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=n.magnitude(e.velocity)},r.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=h(e.angularVelocity)},r.translate=function(e,t){r.setPosition(e,n.add(e.position,t))},r.rotate=function(e,t){r.setAngle(e,e.angle+t)},r.scale=function(e,n,a){for(var s=0,i;s<e.parts.length;s++)i=e.parts[s],o.scale(i.vertices,n,a,e.position),i.axes=l.fromVertices(i.vertices),e.isStatic||(i.area=o.area(i.vertices),r.setMass(i,e.density*i.area),o.translate(i.vertices,{x:-i.position.x,y:-i.position.y}),r.setInertia(i,o.inertia(i.vertices,i.mass)),o.translate(i.vertices,{x:i.position.x,y:i.position.y})),d.update(i.bounds,i.vertices,e.velocity);if(e.circleRadius&&(n===a?e.circleRadius*=n:e.circleRadius=null),!e.isStatic){var u=t(e);e.area=u.area,r.setMass(e,u.mass),r.setInertia(e,u.inertia)}},r.update=function(e,t,r,a){var s=p(t*r*e.timeScale,2),u=1-e.frictionAir*r*e.timeScale,c=e.position.x-e.positionPrev.x,g=e.position.y-e.positionPrev.y;e.velocity.x=c*u*a+e.force.x/e.mass*s,e.velocity.y=g*u*a+e.force.y/e.mass*s,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*u*a+e.torque/e.inertia*s,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=n.magnitude(e.velocity),e.angularSpeed=h(e.angularVelocity);for(var f=0,i;f<e.parts.length;f++)i=e.parts[f],o.translate(i.vertices,e.velocity),0<f&&(i.position.x+=e.velocity.x,i.position.y+=e.velocity.y),0!==e.angularVelocity&&(o.rotate(i.vertices,e.angularVelocity,e.position),l.rotate(i.axes,e.angularVelocity),0<f&&n.rotateAbout(i.position,e.angularVelocity,e.position,i.position)),d.update(i.bounds,i.vertices,e.velocity)},r.applyForce=function(e,t,r){e.force.x+=r.x,e.force.y+=r.y;var o={x:t.x-e.position.x,y:t.y-e.position.y};e.torque+=o.x*r.y-o.y*r.x};var t=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},r=1===e.parts.length?0:1,o;r<e.parts.length;r++)o=e.parts[r],t.mass+=o.mass,t.area+=o.area,t.inertia+=o.inertia,t.centre=n.add(t.centre,n.mult(o.position,o.mass===Infinity?1:o.mass));return t.centre=n.div(t.centre,t.mass===Infinity?e.parts.length:t.mass),t}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t){var r={};t.exports=r;var o=e('../core/Events'),n=e('../core/Common'),a=e('./Body');(function(){r.create=function(e){return n.extend({id:n.nextId(),type:'composite',parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:'Composite',plugin:{}},e)},r.setModified=function(e,t,o,n){if(e.isModified=t,o&&e.parent&&r.setModified(e.parent,t,o,n),n)for(var a=0,i;a<e.composites.length;a++)i=e.composites[a],r.setModified(i,t,o,n)},r.add=function(e,t){var a=[].concat(t);o.trigger(e,'beforeAdd',{object:t});for(var s=0,i;s<a.length;s++)switch(i=a[s],i.type){case'body':if(i.parent!==i){n.warn('Composite.add: skipped adding a compound body part (you must add its parent instead)');break}r.addBody(e,i);break;case'constraint':r.addConstraint(e,i);break;case'composite':r.addComposite(e,i);break;case'mouseConstraint':r.addConstraint(e,i.constraint);}return o.trigger(e,'afterAdd',{object:t}),e},r.remove=function(e,t,n){var a=[].concat(t);o.trigger(e,'beforeRemove',{object:t});for(var s=0,i;s<a.length;s++)switch(i=a[s],i.type){case'body':r.removeBody(e,i,n);break;case'constraint':r.removeConstraint(e,i,n);break;case'composite':r.removeComposite(e,i,n);break;case'mouseConstraint':r.removeConstraint(e,i.constraint);}return o.trigger(e,'afterRemove',{object:t}),e},r.addComposite=function(e,t){return e.composites.push(t),t.parent=e,r.setModified(e,!0,!0,!1),e},r.removeComposite=function(e,t,o){var a=n.indexOf(e.composites,t);if(-1!==a&&(r.removeCompositeAt(e,a),r.setModified(e,!0,!0,!1)),o)for(var s=0;s<e.composites.length;s++)r.removeComposite(e.composites[s],t,!0);return e},r.removeCompositeAt=function(e,t){return e.composites.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addBody=function(e,t){return e.bodies.push(t),r.setModified(e,!0,!0,!1),e},r.removeBody=function(e,t,o){var a=n.indexOf(e.bodies,t);if(-1!==a&&(r.removeBodyAt(e,a),r.setModified(e,!0,!0,!1)),o)for(var s=0;s<e.composites.length;s++)r.removeBody(e.composites[s],t,!0);return e},r.removeBodyAt=function(e,t){return e.bodies.splice(t,1),r.setModified(e,!0,!0,!1),e},r.addConstraint=function(e,t){return e.constraints.push(t),r.setModified(e,!0,!0,!1),e},r.removeConstraint=function(e,t,o){var a=n.indexOf(e.constraints,t);if(-1!==a&&r.removeConstraintAt(e,a),o)for(var s=0;s<e.composites.length;s++)r.removeConstraint(e.composites[s],t,!0);return e},r.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),r.setModified(e,!0,!0,!1),e},r.clear=function(e,t,o){if(o)for(var n=0;n<e.composites.length;n++)r.clear(e.composites[n],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,r.setModified(e,!0,!0,!1),e},r.allBodies=function(e){for(var t=[].concat(e.bodies),o=0;o<e.composites.length;o++)t=t.concat(r.allBodies(e.composites[o]));return t},r.allConstraints=function(e){for(var t=[].concat(e.constraints),o=0;o<e.composites.length;o++)t=t.concat(r.allConstraints(e.composites[o]));return t},r.allComposites=function(e){for(var t=[].concat(e.composites),o=0;o<e.composites.length;o++)t=t.concat(r.allComposites(e.composites[o]));return t},r.get=function(e,t,o){var n,a;return('body'===o?n=r.allBodies(e):'constraint'===o?n=r.allConstraints(e):'composite'===o?n=r.allComposites(e).concat(e):void 0,!n)?null:(a=n.filter(function(e){return e.id.toString()===t.toString()}),0===a.length?null:a[0])},r.move=function(e,t,o){return r.remove(e,t),r.add(o,t),e},r.rebase=function(e){for(var t=r.allBodies(e).concat(r.allConstraints(e)).concat(r.allComposites(e)),o=0;o<t.length;o++)t[o].id=n.nextId();return r.setModified(e,!0,!0,!1),e},r.translate=function(e,t,o){for(var n=o?r.allBodies(e):e.bodies,s=0;s<n.length;s++)a.translate(n[s],t);return r.setModified(e,!0,!0,!1),e},r.rotate=function(e,t,o,n){for(var s=u(t),d=l(t),p=n?r.allBodies(e):e.bodies,c=0;c<p.length;c++){var i=p[c],h=i.position.x-o.x,g=i.position.y-o.y;a.setPosition(i,{x:o.x+(h*s-g*d),y:o.y+(h*d+g*s)}),a.rotate(i,t)}return r.setModified(e,!0,!0,!1),e},r.scale=function(e,t,o,n,s){for(var d=s?r.allBodies(e):e.bodies,l=0;l<d.length;l++){var i=d[l],u=i.position.x-n.x,p=i.position.y-n.y;a.setPosition(i,{x:n.x+u*t,y:n.y+p*o}),a.scale(i,t,o)}return r.setModified(e,!0,!0,!1),e}})()},{"../core/Common":14,"../core/Events":16,"./Body":1}],3:[function(e,t){var r={};t.exports=r;var o=e('./Composite'),n=e('../constraint/Constraint'),a=e('../core/Common');(function(){r.create=function(e){var t=o.create(),r={label:'World',gravity:{x:0,y:1,scale:1e-3},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}}};return a.extend(t,r,e)}})()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t){var r={};t.exports=r,function(){r.create=function(e){return{id:r.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},r.id=function(e){return e.body.id+'_'+e.index}}()},{}],5:[function(e,t){var r={};t.exports=r;var o=e('./SAT'),n=e('./Pair'),a=e('../geometry/Bounds');(function(){r.collisions=function(e,t){for(var s=[],d=t.pairs.table,l=0;l<e.length;l++){var i=e[l][0],u=e[l][1];if(!((i.isStatic||i.isSleeping)&&(u.isStatic||u.isSleeping))&&r.canCollide(i.collisionFilter,u.collisionFilter)&&a.overlaps(i.bounds,u.bounds))for(var p=1<i.parts.length?1:0,c;p<i.parts.length;p++){c=i.parts[p];for(var h=1<u.parts.length?1:0,g;h<u.parts.length;h++)if(g=u.parts[h],c===i&&g===u||a.overlaps(c.bounds,g.bounds)){var f=n.id(c,g),y=d[f],m;m=y&&y.isActive?y.collision:null;var _=o.collides(c,g,m);_.collided&&s.push(_)}}}return s},r.canCollide=function(e,t){return e.group===t.group&&0!==e.group?0<e.group:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}})()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t){var r={};t.exports=r;var o=e('./Pair'),n=e('./Detector'),l=e('../core/Common');(function(){r.create=function(e){var t={controller:r,detector:n.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(t,e)},r.update=function(r,o,n,a){var s=n.world,d=r.buckets,l=!1,f,i,y,m,_;for(f=0;f<o.length;f++){var x=o[f];if((!x.isSleeping||a)&&!(x.bounds.max.x<s.bounds.min.x||x.bounds.min.x>s.bounds.max.x||x.bounds.max.y<s.bounds.min.y||x.bounds.min.y>s.bounds.max.y)){var b=t(r,x);if(!x.region||b.id!==x.region.id||a){(!x.region||a)&&(x.region=b);var v=e(b,x.region);for(i=v.startCol;i<=v.endCol;i++)for(y=v.startRow;y<=v.endRow;y++){_=u(i,y),m=d[_];var T=i>=b.startCol&&i<=b.endCol&&y>=b.startRow&&y<=b.endRow,S=i>=x.region.startCol&&i<=x.region.endCol&&y>=x.region.startRow&&y<=x.region.endRow;!T&&S&&S&&m&&h(r,m,x),(x.region===b||T&&!S||a)&&(!m&&(m=p(d,_)),c(r,m,x))}x.region=b,l=!0}}}l&&(r.pairsList=g(r))},r.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]};var e=function(e,t){var r=d(e.startCol,t.startCol),o=s(e.endCol,t.endCol),n=d(e.startRow,t.startRow),a=s(e.endRow,t.endRow);return i(r,o,n,a)},t=function(e,t){var r=t.bounds,o=a(r.min.x/e.bucketWidth),n=a(r.max.x/e.bucketWidth),s=a(r.min.y/e.bucketHeight),d=a(r.max.y/e.bucketHeight);return i(o,n,s,d)},i=function(e,t,r,o){return{id:e+','+t+','+r+','+o,startCol:e,endCol:t,startRow:r,endRow:o}},u=function(e,t){return'C'+e+'R'+t},p=function(e,t){var r=e[t]=[];return r},c=function(e,t,r){for(var n=0,a;n<t.length;n++)if(a=t[n],!(r.id===a.id||r.isStatic&&a.isStatic)){var i=o.id(r,a),s=e.pairs[i];s?s[2]+=1:e.pairs[i]=[r,a,1]}t.push(r)},h=function(e,t,r){t.splice(l.indexOf(t,r),1);for(var n=0;n<t.length;n++){var a=t[n],i=o.id(r,a),s=e.pairs[i];s&&(s[2]-=1)}},g=function(e){var t=[],r,o;r=l.keys(e.pairs);for(var n=0;n<r.length;n++)o=e.pairs[r[n]],0<o[2]?t.push(o):delete e.pairs[r[n]];return t}})()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t){var r={};t.exports=r;var o=e('./Contact');(function(){r.create=function(e,t){var o=e.bodyA,n=e.bodyB,a=e.parentA,i=e.parentB,l={id:r.id(o,n),bodyA:o,bodyB:n,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:o.isSensor||n.isSensor,timeCreated:t,timeUpdated:t,inverseMass:a.inverseMass+i.inverseMass,friction:d(a.friction,i.friction),frictionStatic:s(a.frictionStatic,i.frictionStatic),restitution:s(a.restitution,i.restitution),slop:s(a.slop,i.slop)};return r.update(l,e,t),l},r.update=function(e,t,n){var a=e.contacts,l=t.supports,u=e.activeContacts,p=t.parentA,c=t.parentB;if(e.collision=t,e.inverseMass=p.inverseMass+c.inverseMass,e.friction=d(p.friction,c.friction),e.frictionStatic=s(p.frictionStatic,c.frictionStatic),e.restitution=s(p.restitution,c.restitution),e.slop=s(p.slop,c.slop),u.length=0,t.collided){for(var h=0;h<l.length;h++){var i=l[h],g=o.id(i),f=a[g];f?u.push(f):u.push(a[g]=o.create(i))}e.separation=t.depth,r.setActive(e,!0,n)}else!0===e.isActive&&r.setActive(e,!1,n)},r.setActive=function(e,t,r){t?(e.isActive=!0,e.timeUpdated=r):(e.isActive=!1,e.activeContacts.length=0)},r.id=function(e,t){return e.id<t.id?'A'+e.id+'B'+t.id:'A'+t.id+'B'+e.id}})()},{"./Contact":4}],8:[function(e,t){var r={};t.exports=r;var o=e('./Pair'),n=e('../core/Common');(function(){r.create=function(e){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},r.update=function(e,t,r){var a=e.list,s=e.table,d=e.collisionStart,l=e.collisionEnd,u=e.collisionActive,p=[],c,h,g,f;for(d.length=0,l.length=0,u.length=0,f=0;f<t.length;f++)c=t[f],c.collided&&(h=o.id(c.bodyA,c.bodyB),p.push(h),g=s[h],g?(g.isActive?u.push(g):d.push(g),o.update(g,c,r)):(g=o.create(c,r),s[h]=g,d.push(g),a.push(g)));for(f=0;f<a.length;f++)g=a[f],g.isActive&&-1===n.indexOf(p,g.id)&&(o.setActive(g,!1,r),l.push(g))},r.removeOld=function(e,t){var r=e.list,o=e.table,n=[],a,s,d,l;for(l=0;l<r.length;l++){if(a=r[l],s=a.collision,s.bodyA.isSleeping||s.bodyB.isSleeping){a.timeUpdated=t;continue}t-a.timeUpdated>1e3&&n.push(l)}for(l=0;l<n.length;l++)d=n[l]-l,a=r[d],delete o[a.id],r.splice(d,1)},r.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}})()},{"../core/Common":14,"./Pair":7}],9:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vector'),n=e('./SAT'),a=e('../geometry/Bounds'),s=e('../factory/Bodies'),i=e('../geometry/Vertices');(function(){r.ray=function(e,t,r,d){d=d||1e-100;for(var l=o.angle(t,r),u=o.magnitude(o.sub(t,r)),p=0.5*(r.x+t.x),c=0.5*(r.y+t.y),h=s.rectangle(p,c,u,d,{angle:l}),g=[],f=0,i;f<e.length;f++)if(i=e[f],a.overlaps(i.bounds,h.bounds))for(var y=1===i.parts.length?0:1,m;y<i.parts.length;y++)if(m=i.parts[y],a.overlaps(m.bounds,h.bounds)){var _=n.collides(m,h);if(_.collided){_.body=_.bodyA=_.bodyB=i,g.push(_);break}}return g},r.region=function(e,t,r){for(var o=[],n=0;n<e.length;n++){var i=e[n],s=a.overlaps(i.bounds,t);(s&&!r||!s&&r)&&o.push(i)}return o},r.point=function(e,t){for(var r=[],o=0,n;o<e.length;o++)if(n=e[o],a.contains(n.bounds,t))for(var s=1===n.parts.length?0:1,d;s<n.parts.length;s++)if(d=n.parts[s],a.contains(d.bounds,t)&&i.contains(d.vertices,t)){r.push(n);break}return r}})()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vertices'),n=e('../geometry/Vector'),a=e('../core/Common'),i=e('../geometry/Bounds');(function(){r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=0.9,r._positionWarming=0.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(e){var t,r,o;for(t=0;t<e.length;t++)r=e[t],r.isActive&&(o=r.activeContacts.length,r.collision.parentA.totalContacts+=o,r.collision.parentB.totalContacts+=o)},r.solvePosition=function(e,t){var o=n._temp[0],a=n._temp[1],s=n._temp[2],d=n._temp[3],l,i,u,p,c,h,g,f,y;for(l=0;l<e.length;l++)i=e[l],!i.isActive||i.isSensor||(u=i.collision,p=u.parentA,c=u.parentB,h=u.normal,g=n.sub(n.add(c.positionImpulse,c.position,o),n.add(p.positionImpulse,n.sub(c.position,u.penetration,a),s),d),i.separation=n.dot(h,g));for(l=0;l<e.length;l++)i=e[l],!i.isActive||i.isSensor||0>i.separation||(u=i.collision,p=u.parentA,c=u.parentB,h=u.normal,y=(i.separation-i.slop)*t,(p.isStatic||c.isStatic)&&(y*=2),!(p.isStatic||p.isSleeping)&&(f=r._positionDampen/p.totalContacts,p.positionImpulse.x+=h.x*y*f,p.positionImpulse.y+=h.y*y*f),!(c.isStatic||c.isSleeping)&&(f=r._positionDampen/c.totalContacts,c.positionImpulse.x-=h.x*y*f,c.positionImpulse.y-=h.y*y*f))},r.postSolvePosition=function(e){for(var t=0,a;t<e.length;t++)if(a=e[t],a.totalContacts=0,0!==a.positionImpulse.x||0!==a.positionImpulse.y){for(var s=0,d;s<a.parts.length;s++)d=a.parts[s],o.translate(d.vertices,a.positionImpulse),i.update(d.bounds,d.vertices,a.velocity),d.position.x+=a.positionImpulse.x,d.position.y+=a.positionImpulse.y;a.positionPrev.x+=a.positionImpulse.x,a.positionPrev.y+=a.positionImpulse.y,0>n.dot(a.positionImpulse,a.velocity)?(a.positionImpulse.x=0,a.positionImpulse.y=0):(a.positionImpulse.x*=r._positionWarming,a.positionImpulse.y*=r._positionWarming)}},r.preSolveVelocity=function(e){var t=n._temp[0],r=n._temp[1],o,a,i,s,d,l,u,p,c,h,g,f,y,m;for(o=0;o<e.length;o++)if(i=e[o],i.isActive&&!i.isSensor)for(s=i.activeContacts,d=i.collision,l=d.parentA,u=d.parentB,p=d.normal,c=d.tangent,a=0;a<s.length;a++)h=s[a],g=h.vertex,f=h.normalImpulse,y=h.tangentImpulse,(0!==f||0!==y)&&(t.x=p.x*f+c.x*y,t.y=p.y*f+c.y*y,!(l.isStatic||l.isSleeping)&&(m=n.sub(g,l.position,r),l.positionPrev.x+=t.x*l.inverseMass,l.positionPrev.y+=t.y*l.inverseMass,l.anglePrev+=n.cross(m,t)*l.inverseInertia),!(u.isStatic||u.isSleeping)&&(m=n.sub(g,u.position,r),u.positionPrev.x-=t.x*u.inverseMass,u.positionPrev.y-=t.y*u.inverseMass,u.anglePrev-=n.cross(m,t)*u.inverseInertia))},r.solveVelocity=function(e,t){for(var o=t*t,s=n._temp[0],l=n._temp[1],u=n._temp[2],p=n._temp[3],c=n._temp[4],g=n._temp[5],f=0,i;f<e.length;f++)if(i=e[f],i.isActive&&!i.isSensor){var y=i.collision,m=y.parentA,_=y.parentB,x=y.normal,b=y.tangent,v=i.activeContacts,T=1/v.length;m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,_.velocity.x=_.position.x-_.positionPrev.x,_.velocity.y=_.position.y-_.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,_.angularVelocity=_.angle-_.anglePrev;for(var S=0;S<v.length;S++){var E=v[S],P=E.vertex,C=n.sub(P,m.position,l),w=n.sub(P,_.position,u),A=n.add(m.velocity,n.mult(n.perp(C),m.angularVelocity),p),I=n.add(_.velocity,n.mult(n.perp(w),_.angularVelocity),c),M=n.sub(A,I,g),R=n.dot(x,M),O=n.dot(b,M),D=h(O),k=a.sign(O),L=(1+i.restitution)*R,B=a.clamp(i.separation+R,0,1)*r._frictionNormalMultiplier,N=O,F=Infinity;D>i.friction*i.frictionStatic*B*o&&(F=D,N=a.clamp(i.friction*k*o,-F,F));var U=n.cross(C,x),X=n.cross(w,x),G=T/(m.inverseMass+_.inverseMass+m.inverseInertia*U*U+_.inverseInertia*X*X);if(L*=G,N*=G,0>R&&R*R>r._restingThresh*o)E.normalImpulse=0;else{var V=E.normalImpulse;E.normalImpulse=d(E.normalImpulse+L,0),L=E.normalImpulse-V}if(O*O>r._restingThreshTangent*o)E.tangentImpulse=0;else{var W=E.tangentImpulse;E.tangentImpulse=a.clamp(E.tangentImpulse+N,-F,F),N=E.tangentImpulse-W}s.x=x.x*L+b.x*N,s.y=x.y*L+b.y*N,m.isStatic||m.isSleeping||(m.positionPrev.x+=s.x*m.inverseMass,m.positionPrev.y+=s.y*m.inverseMass,m.anglePrev+=n.cross(C,s)*m.inverseInertia),_.isStatic||_.isSleeping||(_.positionPrev.x-=s.x*_.inverseMass,_.positionPrev.y-=s.y*_.inverseMass,_.anglePrev-=n.cross(w,s)*_.inverseInertia)}}}})()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vertices'),n=e('../geometry/Vector');(function(){var e=Number.MAX_VALUE;r.collides=function(e,r,a){var s=!1,d,l,u,p;if(a){var c=e.parent,h=r.parent,g=c.speed*c.speed+c.angularSpeed*c.angularSpeed+h.speed*h.speed+h.angularSpeed*h.angularSpeed;s=a&&a.collided&&0.2>g,p=a}else p={collided:!1,bodyA:e,bodyB:r};if(a&&s){var f=p.axisBody,y=f===e?r:e,m=[f.axes[a.axisNumber]];if(u=t(f.vertices,y.vertices,m),p.reused=!0,0>=u.overlap)return p.collided=!1,p}else{if(d=t(e.vertices,r.vertices,e.axes),0>=d.overlap)return p.collided=!1,p;if(l=t(r.vertices,e.vertices,r.axes),0>=l.overlap)return p.collided=!1,p;d.overlap<l.overlap?(u=d,p.axisBody=e):(u=l,p.axisBody=r),p.axisNumber=u.axisNumber}p.bodyA=e.id<r.id?e:r,p.bodyB=e.id<r.id?r:e,p.collided=!0,p.depth=u.overlap,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent,e=p.bodyA,r=p.bodyB,p.normal=0>n.dot(u.axis,n.sub(r.position,e.position))?{x:u.axis.x,y:u.axis.y}:{x:-u.axis.x,y:-u.axis.y},p.tangent=n.perp(p.normal),p.penetration=p.penetration||{},p.penetration.x=p.normal.x*p.depth,p.penetration.y=p.normal.y*p.depth;var _=i(e,r,p.normal),x=[];if(o.contains(e.vertices,_[0])&&x.push(_[0]),o.contains(e.vertices,_[1])&&x.push(_[1]),2>x.length){var b=i(r,e,n.neg(p.normal));o.contains(r.vertices,b[0])&&x.push(b[0]),2>x.length&&o.contains(r.vertices,b[1])&&x.push(b[1])}return 1>x.length&&(x=[_[0]]),p.supports=x,p};var t=function(t,r,o){for(var s=n._temp[0],l=n._temp[1],u={overlap:e},p=0,i,c;p<o.length;p++){if(c=o[p],a(s,t,c),a(l,r,c),i=d(s.max-l.min,l.max-s.min),0>=i)return u.overlap=i,u;i<u.overlap&&(u.overlap=i,u.axis=c,u.axisNumber=p)}return u},a=function(e,t,r){for(var o=n.dot(t[0],r),a=o,s=1,i;s<t.length;s+=1)i=n.dot(t[s],r),i>a?a=i:i<o&&(o=i);e.min=o,e.max=a},i=function(t,r,o){for(var a=e,s=n._temp[0],d=r.vertices,l=t.position,u=0,i,p,c,h;u<d.length;u++)p=d[u],s.x=p.x-l.x,s.y=p.y-l.y,i=-n.dot(o,s),i<a&&(a=i,c=p);var g=0<=c.index-1?c.index-1:d.length-1;p=d[g],s.x=p.x-l.x,s.y=p.y-l.y,a=-n.dot(o,s),h=p;var f=(c.index+1)%d.length;return p=d[f],s.x=p.x-l.x,s.y=p.y-l.y,i=-n.dot(o,s),i<a&&(h=p),[c,h]}})()},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vertices'),n=e('../geometry/Vector'),a=e('../core/Sleeping'),i=e('../geometry/Bounds'),s=e('../geometry/Axes'),d=e('../core/Common');(function(){var e=1e-6;r.create=function(t){var r=t;r.bodyA&&!r.pointA&&(r.pointA={x:0,y:0}),r.bodyB&&!r.pointB&&(r.pointB={x:0,y:0});var o=r.bodyA?n.add(r.bodyA.position,r.pointA):r.pointA,a=r.bodyB?n.add(r.bodyB.position,r.pointB):r.pointB,i=n.magnitude(n.sub(o,a));r.length=r.length||i||e;return r.render=d.extend({visible:!0,lineWidth:2,strokeStyle:'#ffffff'},r.render),r.id=r.id||d.nextId(),r.label=r.label||'Constraint',r.type='constraint',r.stiffness=r.stiffness||1,r.angularStiffness=r.angularStiffness||0,r.angleA=r.bodyA?r.bodyA.angle:r.angleA,r.angleB=r.bodyB?r.bodyB.angle:r.angleB,r.plugin={},r},r.solveAll=function(e,t){for(var o=0;o<e.length;o++)r.solve(e[o],t)},r.solve=function(t,r){var o=t.bodyA,a=t.bodyB,i=t.pointA,s=t.pointB;o&&!o.isStatic&&(t.pointA=n.rotate(i,o.angle-t.angleA),t.angleA=o.angle),a&&!a.isStatic&&(t.pointB=n.rotate(s,a.angle-t.angleB),t.angleB=a.angle);var d=i,l=s;if(o&&(d=n.add(o.position,i)),a&&(l=n.add(a.position,s)),d&&l){var u=n.sub(d,l),p=n.magnitude(u);0===p&&(p=e);var c=(p-t.length)/p,g=n.div(u,p),f=n.mult(u,0.5*c*t.stiffness*r*r);if(!(h(1-p/t.length)<1e-3*r)){var y,m,_,x,b,v,T,S;o&&!o.isStatic?(_={x:d.x-o.position.x+f.x,y:d.y-o.position.y+f.y},o.velocity.x=o.position.x-o.positionPrev.x,o.velocity.y=o.position.y-o.positionPrev.y,o.angularVelocity=o.angle-o.anglePrev,y=n.add(o.velocity,n.mult(n.perp(_),o.angularVelocity)),b=n.dot(_,g),T=o.inverseMass+o.inverseInertia*b*b):(y={x:0,y:0},T=o?o.inverseMass:0),a&&!a.isStatic?(x={x:l.x-a.position.x-f.x,y:l.y-a.position.y-f.y},a.velocity.x=a.position.x-a.positionPrev.x,a.velocity.y=a.position.y-a.positionPrev.y,a.angularVelocity=a.angle-a.anglePrev,m=n.add(a.velocity,n.mult(n.perp(x),a.angularVelocity)),v=n.dot(x,g),S=a.inverseMass+a.inverseInertia*v*v):(m={x:0,y:0},S=a?a.inverseMass:0);var E=n.sub(m,y),P=n.dot(g,E)/(T+S);0<P&&(P=0);var C={x:g.x*P,y:g.y*P},w;o&&!o.isStatic&&(w=n.cross(_,C)*o.inverseInertia*(1-t.angularStiffness),o.constraintImpulse.x-=f.x,o.constraintImpulse.y-=f.y,o.constraintImpulse.angle+=w,o.position.x-=f.x,o.position.y-=f.y,o.angle+=w),a&&!a.isStatic&&(w=n.cross(x,C)*a.inverseInertia*(1-t.angularStiffness),a.constraintImpulse.x+=f.x,a.constraintImpulse.y+=f.y,a.constraintImpulse.angle-=w,a.position.x+=f.x,a.position.y+=f.y,a.angle-=w)}}},r.postSolveAll=function(e){for(var t=0;t<e.length;t++){var r=e[t],d=r.constraintImpulse;if(0!==d.x||0!==d.y||0!==d.angle){a.set(r,!1);for(var l=0,u;l<r.parts.length;l++)u=r.parts[l],o.translate(u.vertices,d),0<l&&(u.position.x+=d.x,u.position.y+=d.y),0!==d.angle&&(o.rotate(u.vertices,d.angle,r.position),s.rotate(u.axes,d.angle),0<l&&n.rotateAbout(u.position,d.angle,r.position,u.position)),i.update(u.bounds,u.vertices,r.velocity);d.angle=0,d.x=0,d.y=0}}}})()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vertices'),n=e('../core/Sleeping'),a=e('../core/Mouse'),s=e('../core/Events'),d=e('../collision/Detector'),i=e('./Constraint'),l=e('../body/Composite'),u=e('../core/Common'),p=e('../geometry/Bounds');(function(){r.create=function(t,o){var n=(t?t.mouse:null)||(o?o.mouse:null);n||(t&&t.render&&t.render.canvas?n=a.create(t.render.canvas):o&&o.element?n=a.create(o.element):(n=a.create(),u.warn('MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected')));var d=i.create({label:'Mouse Constraint',pointA:n.position,pointB:{x:0,y:0},length:0.01,stiffness:0.1,angularStiffness:1,render:{strokeStyle:'#90EE90',lineWidth:3}}),p={type:'mouseConstraint',mouse:n,element:null,body:null,constraint:d,collisionFilter:{category:1,mask:4294967295,group:0}},c=u.extend(p,o);return s.on(t,'beforeUpdate',function(){var o=l.allBodies(t.world);r.update(c,o),e(c)}),c},r.update=function(e,t){var r=e.mouse,a=e.constraint,l=e.body;if(!(0===r.button))a.bodyB=e.body=null,a.pointB=null,l&&s.trigger(e,'enddrag',{mouse:r,body:l});else if(!a.bodyB){for(var u=0;u<t.length;u++)if(l=t[u],p.contains(l.bounds,r.position)&&d.canCollide(l.collisionFilter,e.collisionFilter))for(var i=1<l.parts.length?1:0,c;i<l.parts.length;i++)if(c=l.parts[i],o.contains(c.vertices,r.position)){a.pointA=r.position,a.bodyB=e.body=l,a.pointB={x:r.position.x-l.position.x,y:r.position.y-l.position.y},a.angleB=l.angle,n.set(l,!1),s.trigger(e,'startdrag',{mouse:r,body:l});break}}else n.set(a.bodyB,!1),a.pointA=r.position};var e=function(e){var t=e.mouse,r=t.sourceEvents;r.mousemove&&s.trigger(e,'mousemove',{mouse:t}),r.mousedown&&s.trigger(e,'mousedown',{mouse:t}),r.mouseup&&s.trigger(e,'mouseup',{mouse:t}),a.clearSourceEvents(t)}})()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(e,t){var r={};t.exports=r,function(){r._nextId=0,r._seed=0,r.extend=function(e,t){var o,n;'boolean'==typeof t?(o=2,n=t):(o=1,n=!0);for(var a=o,i;a<arguments.length;a++)if(i=arguments[a],i)for(var s in i)n&&i[s]&&i[s].constructor===Object?e[s]&&e[s].constructor!==Object?e[s]=i[s]:(e[s]=e[s]||{},r.extend(e[s],n,i[s])):e[s]=i[s];return e},r.clone=function(e,t){return r.extend({},t,e)},r.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},r.values=function(e){var t=[];if(Object.keys){for(var r=Object.keys(e),o=0;o<r.length;o++)t.push(e[r[o]]);return t}for(var n in e)t.push(e[n]);return t},r.get=function(e,t,r,o){t=t.split('.').slice(r,o);for(var n=0;n<t.length;n+=1)e=e[t[n]];return e},r.set=function(e,t,o,n,a){var i=t.split('.').slice(n,a);return r.get(e,t,0,-1)[i[i.length-1]]=o,o},r.shadeColor=function(e,t){var r=parseInt(e.slice(1),16),o=i(2.55*t),n=(r>>16)+o,a=(255&r>>8)+o,s=(255&r)+o;return'#'+(16777216+65536*(255>n?1>n?0:n:255)+256*(255>a?1>a?0:a:255)+(255>s?1>s?0:s:255)).toString(16).slice(1)},r.shuffle=function(e){for(var t=e.length-1;0<t;t--){var o=a(r.random()*(t+1)),n=e[t];e[t]=e[o],e[o]=n}return e},r.choose=function(e){return e[a(r.random()*e.length)]},r.isElement=function(e){try{return e instanceof HTMLElement}catch(t){return'object'==typeof e&&1===e.nodeType&&'object'==typeof e.style&&'object'==typeof e.ownerDocument}},r.isArray=function(e){return'[object Array]'===Object.prototype.toString.call(e)},r.isFunction=function(e){return'function'==typeof e},r.isPlainObject=function(e){return'object'==typeof e&&e.constructor===Object},r.isString=function(e){return'[object String]'===toString.call(e)},r.clamp=function(e,t,r){return e<t?t:e>r?r:e},r.sign=function(e){return 0>e?-1:1},r.now=function(){var e=window.performance||{};return e.now=function(){return e.now||e.webkitNow||e.msNow||e.oNow||e.mozNow||function(){return+new Date}}(),e.now()},r.random=function(t,r){return t='undefined'==typeof t?0:t,r='undefined'==typeof r?1:r,t+e()*(r-t)};var e=function(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(e){return e=e.replace('#',''),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},r.logLevel=1,r.log=function(){console&&0<r.logLevel&&3>=r.logLevel&&console.log.apply(console,['matter-js:'].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&0<r.logLevel&&2>=r.logLevel&&console.info.apply(console,['matter-js:'].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&0<r.logLevel&&3>=r.logLevel&&console.warn.apply(console,['matter-js:'].concat(Array.prototype.slice.call(arguments)))},r.nextId=function(){return r._nextId++},r.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},r.map=function(e,t){if(e.map)return e.map(t);for(var r=[],o=0;o<e.length;o+=1)r.push(t(e[o]));return r},r.topologicalSort=function(e){var r=[],o=[],n=[];for(var a in e)o[a]||n[a]||t(a,o,n,e,r);return r};var t=function(e,r,o,n,a){var s=n[e]||[];o[e]=!0;for(var d=0,i;d<s.length;d+=1)(i=s[d],!o[i])&&(r[i]||t(i,r,o,n,a));o[e]=!1,r[e]=!0,a.push(e)};r.chain=function(){for(var e=[],t=0,r;t<arguments.length;t+=1)r=arguments[t],r._chained?e.push.apply(e,r._chained):e.push(r);var o=function(){for(var t=Array(arguments.length),r=0,o=arguments.length,n;r<o;r++)t[r]=arguments[r];for(r=0;r<e.length;r+=1){var a=e[r].apply(n,t);'undefined'!=typeof a&&(n=a)}return n};return o._chained=e,o},r.chainPathBefore=function(e,t,o){return r.set(e,t,r.chain(o,r.get(e,t)))},r.chainPathAfter=function(e,t,o){return r.set(e,t,r.chain(r.get(e,t),o))}}()},{}],15:[function(e,t){var r={};t.exports=r;var o=e('../body/World'),n=e('./Sleeping'),a=e('../collision/Resolver'),i=e('../render/Render'),s=e('../collision/Pairs'),d=e('./Metrics'),l=e('../collision/Grid'),u=e('./Events'),p=e('../body/Composite'),c=e('../constraint/Constraint'),h=e('./Common'),g=e('../body/Body');(function(){r.create=function(e,t){t=h.isElement(e)?t:e,e=h.isElement(e)?e:null,t=t||{},(e||t.render)&&h.warn('Engine.create: engine.render is deprecated (see docs)');var r=h.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:l}},t);if(e||r.render){var n={element:e,controller:i};r.render=h.extend(n,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=t.world||o.create(r.world),r.pairs=s.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r},r.update=function(r,o,l){o=o||1e3/60,l=l||1;var h=r.world,g=r.timing,f=r.broadphase,y=[],m;g.timestamp+=o*g.timeScale;var i={timestamp:g.timestamp};u.trigger(r,'beforeUpdate',i);var _=p.allBodies(h),x=p.allConstraints(h);for(r.enableSleeping&&n.update(_,g.timeScale),t(_,h.gravity),d(_,o,g.timeScale,l,h.bounds),m=0;m<r.constraintIterations;m++)c.solveAll(x,g.timeScale);c.postSolveAll(_),f.controller?(h.isModified&&f.controller.clear(f),f.controller.update(f,_,r,h.isModified),y=f.pairsList):y=_,h.isModified&&p.setModified(h,!1,!1,!0);var b=f.detector(y,r),v=r.pairs,T=g.timestamp;for(s.update(v,b,T),s.removeOld(v,T),r.enableSleeping&&n.afterCollisions(v.list,g.timeScale),0<v.collisionStart.length&&u.trigger(r,'collisionStart',{pairs:v.collisionStart}),a.preSolvePosition(v.list),m=0;m<r.positionIterations;m++)a.solvePosition(v.list,g.timeScale);for(a.postSolvePosition(_),a.preSolveVelocity(v.list),m=0;m<r.velocityIterations;m++)a.solveVelocity(v.list,g.timeScale);return 0<v.collisionActive.length&&u.trigger(r,'collisionActive',{pairs:v.collisionActive}),0<v.collisionEnd.length&&u.trigger(r,'collisionEnd',{pairs:v.collisionEnd}),e(_),u.trigger(r,'afterUpdate',i),r},r.merge=function(e,t){if(h.extend(e,t),t.world){e.world=t.world,r.clear(e);for(var o=p.allBodies(e.world),a=0,i;a<o.length;a++)i=o[a],n.set(i,!1),i.id=h.nextId()}},r.clear=function(e){var t=e.world;s.clear(e.pairs);var r=e.broadphase;if(r.controller){var o=p.allBodies(t);r.controller.clear(r),r.controller.update(r,o,e,!0)}};var e=function(e){for(var t=0,r;t<e.length;t++)r=e[t],r.force.x=0,r.force.y=0,r.torque=0},t=function(e,t){var r='undefined'==typeof t.scale?1e-3:t.scale;if((0!==t.x||0!==t.y)&&0!==r)for(var o=0,n;o<e.length;o++)n=e[o],n.isStatic||n.isSleeping||(n.force.y+=n.mass*t.y*r,n.force.x+=n.mass*t.x*r)},d=function(e,t,r,o){for(var n=0,a;n<e.length;n++)a=e[n],a.isStatic||a.isSleeping||g.update(a,t,r,o)}})()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t){var r={};t.exports=r;var o=e('./Common');(function(){r.on=function(e,t,r){for(var o=t.split(' '),n=0,a;n<o.length;n++)a=o[n],e.events=e.events||{},e.events[a]=e.events[a]||[],e.events[a].push(r);return r},r.off=function(e,t,r){if(!t)return void(e.events={});'function'==typeof t&&(r=t,t=o.keys(e.events).join(' '));for(var n=t.split(' '),a=0;a<n.length;a++){var i=e.events[n[a]],s=[];if(r&&i)for(var d=0;d<i.length;d++)i[d]!==r&&s.push(i[d]);e.events[n[a]]=s}},r.trigger=function(e,t,r){var n,a,s,d;if(e.events){r||(r={}),n=t.split(' ');for(var l=0;l<n.length;l++)if(a=n[l],s=e.events[a],s){d=o.clone(r,!1),d.name=a,d.source=e;for(var i=0;i<s.length;i++)s[i].apply(e,[d])}}}})()},{"./Common":14}],17:[function(e,t){var r={};t.exports=r;var o=e('./Plugin'),n=e('./Common');(function(){r.name='matter-js',r.version='0.12.0',r.uses=[],r.used=[],r.use=function(){o.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,''),n.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,''),n.chainPathAfter(r,e,t)}})()},{"./Common":14,"./Plugin":20}],18:[function(){},{"../body/Composite":2,"./Common":14}],19:[function(e,t){var r={};t.exports=r;var o=e('../core/Common');(function(){r.create=function(t){var n={};return t||o.log('Mouse.create: element was undefined, defaulting to document.body','warn'),n.element=t||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=n.element.getAttribute('data-pixel-ratio')||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(t){var r=e(t,n.element,n.pixelRatio),o=t.changedTouches;o&&(n.button=0,t.preventDefault()),n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=t},n.mousedown=function(t){var r=e(t,n.element,n.pixelRatio),o=t.changedTouches;o?(n.button=0,t.preventDefault()):n.button=t.button,n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=t},n.mouseup=function(t){var r=e(t,n.element,n.pixelRatio),o=t.changedTouches;o&&t.preventDefault(),n.button=-1,n.absolute.x=r.x,n.absolute.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=t},n.mousewheel=function(e){n.wheelDelta=s(-1,d(1,e.wheelDelta||-e.detail)),e.preventDefault()},r.setElement(n,n.element),n},r.setElement=function(e,t){e.element=t,t.addEventListener('mousemove',e.mousemove),t.addEventListener('mousedown',e.mousedown),t.addEventListener('mouseup',e.mouseup),t.addEventListener('mousewheel',e.mousewheel),t.addEventListener('DOMMouseScroll',e.mousewheel),t.addEventListener('touchmove',e.mousemove),t.addEventListener('touchstart',e.mousedown),t.addEventListener('touchend',e.mouseup)},r.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},r.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y};var e=function(e,t,r){var o=t.getBoundingClientRect(),n=document.documentElement||document.body.parentNode||document.body,a=void 0===window.pageXOffset?n.scrollLeft:window.pageXOffset,i=void 0===window.pageYOffset?n.scrollTop:window.pageYOffset,s=e.changedTouches,d,l;return s?(d=s[0].pageX-o.left-a,l=s[0].pageY-o.top-i):(d=e.pageX-o.left-a,l=e.pageY-o.top-i),{x:d/(t.clientWidth/(t.width||t.clientWidth)*r),y:l/(t.clientHeight/(t.height||t.clientHeight)*r)}}})()},{"../core/Common":14}],20:[function(e,t){var r={};t.exports=r;var o=e('./Common');(function(){r._registry={},r.register=function(e){if(r.isPlugin(e)||o.warn('Plugin.register:',r.toString(e),'does not implement all required fields.'),e.name in r._registry){var t=r._registry[e.name],n=r.versionParse(e.version).number,a=r.versionParse(t.version).number;n>a?(o.warn('Plugin.register:',r.toString(t),'was upgraded to',r.toString(e)),r._registry[e.name]=e):n<a?o.warn('Plugin.register:',r.toString(t),'can not be downgraded to',r.toString(e)):e!==t&&o.warn('Plugin.register:',r.toString(e),'is already registered to different plugin object')}else r._registry[e.name]=e;return e},r.resolve=function(e){return r._registry[r.dependencyParse(e).name]},r.toString=function(e){return'string'==typeof e?e:(e.name||'anonymous')+'@'+(e.version||e.range||'0.0.0')},r.isPlugin=function(e){return e&&e.name&&e.version&&e.install},r.isUsed=function(e,t){return-1<e.used.indexOf(t)},r.isFor=function(e,t){var o=e.for&&r.dependencyParse(e.for);return!e.for||t.name===o.name&&r.versionSatisfies(t.version,o.range)},r.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0===e.uses.length)return void o.warn('Plugin.use:',r.toString(e),'does not specify any dependencies to install.');for(var n=r.dependencies(e),a=o.topologicalSort(n),s=[],d=0;d<a.length;d+=1)if(a[d]!==e.name){var i=r.resolve(a[d]);if(!i){s.push('\u274C '+a[d]);continue}r.isUsed(e,i.name)||(r.isFor(i,e)||(o.warn('Plugin.use:',r.toString(i),'is for',i.for,'but installed on',r.toString(e)+'.'),i._warned=!0),i.install?i.install(e):(o.warn('Plugin.use:',r.toString(i),'does not specify an install function.'),i._warned=!0),i._warned?(s.push('\uD83D\uDD36 '+r.toString(i)),delete i._warned):s.push('\u2705 '+r.toString(i)),e.used.push(i.name))}0<s.length&&o.info(s.join('  '))},r.dependencies=function(e,t){var n=r.dependencyParse(e),a=n.name;if(t=t||{},!(a in t)){e=r.resolve(e)||e,t[a]=o.map(e.uses||[],function(t){r.isPlugin(t)&&r.register(t);var a=r.dependencyParse(t),i=r.resolve(t);return i&&!r.versionSatisfies(i.version,a.range)?(o.warn('Plugin.dependencies:',r.toString(i),'does not satisfy',r.toString(a),'used by',r.toString(n)+'.'),i._warned=!0,e._warned=!0):!i&&(o.warn('Plugin.dependencies:',r.toString(t),'used by',r.toString(n),'could not be resolved.'),e._warned=!0),a.name});for(var s=0;s<t[a].length;s+=1)r.dependencies(t[a][s],t);return t}},r.dependencyParse=function(e){if(o.isString(e)){var t=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return t.test(e)||o.warn('Plugin.dependencyParse:',e,'is not a valid dependency string.'),{name:e.split('@')[0],range:e.split('@')[1]||'*'}}return{name:e.name,range:e.range||e.version}},r.versionParse=function(e){var t=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;t.test(e)||o.warn('Plugin.versionParse:',e,'is not a valid version or range.');var r=e.split('-');e=r[0];var n=isNaN(+e[0]),a=n?e.substr(1):e,i=o.map(a.split('.'),function(e){return+e});return{isRange:n,version:a,range:e,operator:n?e[0]:'',parts:i,prerelease:r[1],number:1e8*i[0]+1e4*i[1]+i[2]}},r.versionSatisfies=function(e,t){t=t||'*';var o=r.versionParse(t),n=o.parts,a=r.versionParse(e),i=a.parts;if(o.isRange){if('*'===o.operator||'*'===e)return!0;if('~'===o.operator)return i[0]===n[0]&&i[1]===n[1]&&i[2]>=n[2];if('^'===o.operator)return 0<n[0]?i[0]===n[0]&&a.number>=o.number:0<n[1]?i[1]===n[1]&&i[2]>=n[2]:i[2]===n[2]}return e===t||'*'===e}})()},{"./Common":14}],21:[function(e,t){var r={};t.exports=r;var o=e('./Events'),n=e('./Engine'),a=e('./Common');(function(){var e,t;if('undefined'!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!e){var i;e=function(e){i=setTimeout(function(){e(a.now())},1e3/60)},t=function(){clearTimeout(i)}}r.create=function(e){var t=a.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(0.5*t.fps),t.fps=1e3/t.delta,t},r.run=function(t,o){return'undefined'!=typeof t.positionIterations&&(o=t,t=r.create()),function n(a){t.frameRequestId=e(n),a&&t.enabled&&r.tick(t,o,a)}(),t},r.tick=function(e,t,r){var a=t.timing,i=1,s={timestamp:a.timestamp},l;o.trigger(e,'beforeTick',s),o.trigger(t,'beforeTick',s),e.isFixed?l=e.delta:(l=r-e.timePrev||e.delta,e.timePrev=r,e.deltaHistory.push(l),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),l=d.apply(null,e.deltaHistory),l=l<e.deltaMin?e.deltaMin:l,l=l>e.deltaMax?e.deltaMax:l,i=l/e.delta,e.delta=l),0!==e.timeScalePrev&&(i*=a.timeScale/e.timeScalePrev),0===a.timeScale&&(i=0),e.timeScalePrev=a.timeScale,e.correction=i,e.frameCounter+=1,1e3<=r-e.counterTimestamp&&(e.fps=e.frameCounter*((r-e.counterTimestamp)/1e3),e.counterTimestamp=r,e.frameCounter=0),o.trigger(e,'tick',s),o.trigger(t,'tick',s),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),o.trigger(e,'beforeUpdate',s),n.update(t,l,i),o.trigger(e,'afterUpdate',s),t.render&&t.render.controller&&(o.trigger(e,'beforeRender',s),o.trigger(t,'beforeRender',s),t.render.controller.world(t.render),o.trigger(e,'afterRender',s),o.trigger(t,'afterRender',s)),o.trigger(e,'afterTick',s),o.trigger(t,'afterTick',s)},r.stop=function(e){t(e.frameRequestId)},r.start=function(e,t){r.run(e,t)}})()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t){var r={};t.exports=r;var o=e('./Events');(function(){r._motionWakeThreshold=0.18,r._motionSleepThreshold=0.08,r._minBias=0.9,r.update=function(e,t){for(var o=0;o<e.length;o++){var n=e[o],a=n.speed*n.speed+n.angularSpeed*n.angularSpeed;if(0!==n.force.x||0!==n.force.y){r.set(n,!1);continue}var i=d(n.motion,a),l=s(n.motion,a);n.motion=r._minBias*i+(1-r._minBias)*l,0<n.sleepThreshold&&n.motion<r._motionSleepThreshold*(t*t*t)?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold&&r.set(n,!0)):0<n.sleepCounter&&(n.sleepCounter-=1)}},r.afterCollisions=function(e,t){for(var o=0,n;o<e.length;o++)if(n=e[o],n.isActive){var a=n.collision,i=a.bodyA.parent,s=a.bodyB.parent;if(!(i.isSleeping&&s.isSleeping||i.isStatic||s.isStatic)&&(i.isSleeping||s.isSleeping)){var d=i.isSleeping&&!i.isStatic?i:s,l=d===i?s:i;!d.isStatic&&l.motion>r._motionWakeThreshold*(t*t*t)&&r.set(d,!1)}}},r.set=function(e,t){var r=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,!r&&o.trigger(e,'sleepStart')):(e.isSleeping=!1,e.sleepCounter=0,r&&o.trigger(e,'sleepEnd'))}})()},{"./Events":16}],23:[function(e,r){(function(t){var o={};r.exports=o;var a=e('../geometry/Vertices'),p=e('../core/Common'),c=e('../body/Body'),i=e('../geometry/Bounds'),h=e('../geometry/Vector'),f='undefined'==typeof window?'undefined'==typeof t?null:t.decomp:window.decomp;(function(){o.rectangle=function(e,t,r,o,n){n=n||{};var i={label:'Rectangle Body',position:{x:e,y:t},vertices:a.fromPath('L 0 0 L '+r+' 0 L '+r+' '+o+' L 0 '+o)};if(n.chamfer){var s=n.chamfer;i.vertices=a.chamfer(i.vertices,s.radius,s.quality,s.qualityMin,s.qualityMax),delete n.chamfer}return c.create(p.extend({},i,n))},o.trapezoid=function(e,t,r,o,n,i){i=i||{},n*=0.5;var s=(1-2*n)*r,d=r*n,l=d+s,u=l+d,h;h=0.5>n?'L 0 0 L '+d+' '+-o+' L '+l+' '+-o+' L '+u+' 0':'L 0 0 L '+l+' '+-o+' L '+u+' 0';var g={label:'Trapezoid Body',position:{x:e,y:t},vertices:a.fromPath(h)};if(i.chamfer){var f=i.chamfer;g.vertices=a.chamfer(g.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete i.chamfer}return c.create(p.extend({},g,i))},o.circle=function(e,t,r,a,i){a=a||{};i=i||25;var l=n(s(10,d(i,r)));return 1==l%2&&(l+=1),o.polygon(e,t,l,r,p.extend({},{label:'Circle Body',circleRadius:r},a))},o.polygon=function(e,t,r,n,s){if(s=s||{},3>r)return o.circle(e,t,n,s);for(var d=2*g/r,h='',f=0;f<r;f+=1){var i=0.5*d+f*d,m=u(i)*n,_=l(i)*n;h+='L '+m.toFixed(3)+' '+_.toFixed(3)+' '}var b={label:'Polygon Body',position:{x:e,y:t},vertices:a.fromPath(h)};if(s.chamfer){var v=s.chamfer;b.vertices=a.chamfer(b.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete s.chamfer}return c.create(p.extend({},b,s))},o.fromVertices=function(e,t,r,o,n,s,d){var l,u,g,m,_,b,T,S,v;for(o=o||{},u=[],n='undefined'!=typeof n&&n,s='undefined'==typeof s?0.01:s,d='undefined'==typeof d?10:d,f||p.warn('Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.'),p.isArray(r[0])||(r=[r]),S=0;S<r.length;S+=1)if(m=r[S],g=a.isConvex(m),g||!f)m=g?a.clockwiseSort(m):a.hull(m),u.push({position:{x:e,y:t},vertices:m});else{var E=m.map(function(e){return[e.x,e.y]});f.makeCCW(E),!1!==s&&f.removeCollinearPoints(E,s);var P=f.quickDecomp(E);for(_=0;_<P.length;_++){var C=P[_],w=C.map(function(e){return{x:e[0],y:e[1]}});0<d&&a.area(w)<d||u.push({position:a.centre(w),vertices:w})}}for(_=0;_<u.length;_++)u[_]=c.create(p.extend(u[_],o));if(n){var A=5;for(_=0;_<u.length;_++){var I=u[_];for(b=_+1;b<u.length;b++){var M=u[b];if(i.overlaps(I.bounds,M.bounds)){var R=I.vertices,O=M.vertices;for(T=0;T<I.vertices.length;T++)for(v=0;v<M.vertices.length;v++){var D=h.magnitudeSquared(h.sub(R[(T+1)%R.length],O[v])),k=h.magnitudeSquared(h.sub(R[T],O[(v+1)%O.length]));D<A&&k<A&&(R[T].isInternal=!0,O[v].isInternal=!0)}}}}}return 1<u.length?(l=c.create(p.extend({parts:u.slice(0)},o)),c.setPosition(l,{x:e,y:t}),l):u[0]}})()}).call(this,'undefined'==typeof t?'undefined'==typeof self?'undefined'==typeof window?{}:window:self:t)},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t){var r={};t.exports=r;var o=e('../body/Composite'),a=e('../constraint/Constraint'),s=e('../core/Common'),l=e('../body/Body'),u=e('./Bodies');(function(){r.stack=function(e,t,r,n,a,s,d){for(var u=o.create({label:'Stack'}),p=e,c=t,h=0,i=0,g,f;i<n;i++){f=0;for(var y=0,m;y<r;y++)if(m=d(p,c,y,i,g,h),m){var _=m.bounds.max.y-m.bounds.min.y,x=m.bounds.max.x-m.bounds.min.x;_>f&&(f=_),l.translate(m,{x:0.5*x,y:0.5*_}),p=m.bounds.max.x+a,o.addBody(u,m),g=m,h+=1}else p+=a;c+=f+s,p=e}return u},r.chain=function(e,t,r,n,d,l){for(var u=e.bodies,p=1;p<u.length;p++){var i=u[p-1],c=u[p],h=i.bounds.max.y-i.bounds.min.y,g=i.bounds.max.x-i.bounds.min.x,f=c.bounds.max.y-c.bounds.min.y,y=c.bounds.max.x-c.bounds.min.x,m=s.extend({bodyA:i,pointA:{x:g*t,y:h*r},bodyB:c,pointB:{x:y*n,y:f*d}},l);o.addConstraint(e,a.create(m))}return e.label+=' Chain',e},r.mesh=function(e,t,r,n,i){var d=e.bodies,l,u,p,c,h;for(l=0;l<r;l++){for(u=1;u<t;u++)p=d[u-1+l*t],c=d[u+l*t],o.addConstraint(e,a.create(s.extend({bodyA:p,bodyB:c},i)));if(0<l)for(u=0;u<t;u++)p=d[u+(l-1)*t],c=d[u+l*t],o.addConstraint(e,a.create(s.extend({bodyA:p,bodyB:c},i))),n&&0<u&&(h=d[u-1+(l-1)*t],o.addConstraint(e,a.create(s.extend({bodyA:h,bodyB:c},i)))),n&&u<t-1&&(h=d[u+1+(l-1)*t],o.addConstraint(e,a.create(s.extend({bodyA:h,bodyB:c},i))))}return e.label+=' Mesh',e},r.pyramid=function(e,t,o,a,s,i,u){return r.stack(e,t,o,a,s,i,function(t,r,p,c,h,g){var i=d(a,n(o/2)),f=h?h.bounds.max.x-h.bounds.min.x:0;if(!(c>i)){c=i-c;var y=c,m=o-1-c;if(!(p<y||p>m)){1===g&&l.translate(h,{x:(p+(1==o%2?1:-1))*f,y:0});var _=h?p*f:0;return u(e+_+p*s,r,p,c,h,g)}}})},r.newtonsCradle=function(e,t,r,n,s){for(var d=o.create({label:'Newtons Cradle'}),l=0;l<r;l++){var i=1.9,p=u.circle(e+l*(n*i),t+s,n,{inertia:Infinity,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=a.create({pointA:{x:e+l*(n*i),y:t},bodyB:p});o.addBody(d,p),o.addConstraint(d,c)}return d},r.car=function(e,t,r,n,i){var s=l.nextGroup(!0),d=-20,p=0.5*-r+d,c=0.5*r-d,h=0,g=o.create({label:'Car'}),f=u.trapezoid(e,t,r,n,0.3,{collisionFilter:{group:s},friction:0.01,chamfer:{radius:10}}),y=u.circle(e+p,t+h,i,{collisionFilter:{group:s},friction:0.8,density:0.01}),m=u.circle(e+c,t+h,i,{collisionFilter:{group:s},friction:0.8,density:0.01}),_=a.create({bodyA:f,pointA:{x:p,y:h},bodyB:y,stiffness:0.2,render:{lineWidth:0}}),x=a.create({bodyA:f,pointA:{x:c,y:h},bodyB:m,stiffness:0.2,render:{lineWidth:0}});return o.addBody(g,f),o.addBody(g,y),o.addBody(g,m),o.addConstraint(g,_),o.addConstraint(g,x),g},r.softBody=function(e,t,o,n,a,i,d,l,p,c){p=s.extend({inertia:Infinity},p),c=s.extend({stiffness:0.4},c);var h=r.stack(e,t,o,n,a,i,function(e,t){return u.circle(e,t,l,p)});return r.mesh(h,o,n,d,c),h.label='Soft Body',h}})()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Vector'),n=e('../core/Common');(function(){r.fromVertices=function(e){for(var t={},r=0;r<e.length;r++){var a=(r+1)%e.length,i=o.normalise({x:e[a].y-e[r].y,y:e[r].x-e[a].x}),s=0===i.y?Infinity:i.x/i.y;s=s.toFixed(3).toString(),t[s]=i}return n.values(t)},r.rotate=function(e,t){if(0!==t)for(var r=u(t),o=l(t),n=0;n<e.length;n++){var a=e[n],i;i=a.x*r-a.y*o,a.y=a.x*o+a.y*r,a.x=i}}})()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t){var r={};t.exports=r,function(){r.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&r.update(t,e),t},r.update=function(e,t,r){e.min.x=Infinity,e.max.x=-Infinity,e.min.y=Infinity,e.max.y=-Infinity;for(var o=0,n;o<t.length;o++)n=t[o],n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y);r&&(0<r.x?e.max.x+=r.x:e.min.x+=r.x,0<r.y?e.max.y+=r.y:e.min.y+=r.y)},r.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},r.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},r.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},r.shift=function(e,t){var r=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+r,e.min.y=t.y,e.max.y=t.y+o}}()},{}],27:[function(e,t){var r={};t.exports=r;e('../geometry/Bounds');(function(){r.pathToVertices=function(t,r){var o=[],n=0,a=0,s=0,d,i,l,u,p,c,h,g,f,y,m,_;r=r||15;var x=function(e,t,r){var n=1==r%2&&1<r;if(!f||e!=f.x||t!=f.y){f&&n?(m=f.x,_=f.y):(m=0,_=0);var i={x:m+e,y:_+t};(n||!f)&&(f=i),o.push(i),a=m+e,s=_+t}},b=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();'Z'!==t&&('M'===t||'L'===t||'T'===t||'C'===t||'S'===t||'Q'===t?(a=e.x,s=e.y):'H'===t?a=e.x:'V'===t?s=e.y:void 0,x(a,s,e.pathSegType))};for(e(t),l=t.getTotalLength(),c=[],d=0;d<t.pathSegList.numberOfItems;d+=1)c.push(t.pathSegList.getItem(d));for(h=c.concat();n<l;){if(y=t.getPathSegAtLength(n),p=c[y],p!=g){for(;h.length&&h[0]!=p;)b(h.shift());g=p}switch(p.pathSegTypeAsLetter.toUpperCase()){case'C':case'T':case'S':case'Q':case'A':u=t.getPointAtLength(n),x(u.x,u.y,0);}n+=r}for(d=0,i=h.length;d<i;++d)b(h[d]);return o};var e=function(e){for(var t=e.pathSegList,r=0,o=0,n=t.numberOfItems,a=0,i,s,d,l,u,p;a<n;++a){var c=t.getItem(a),h=c.pathSegTypeAsLetter;/[MLHVCSQTA]/.test(h)?('x'in c&&(r=c.x),'y'in c&&(o=c.y)):('x1'in c&&(d=r+c.x1),'x2'in c&&(u=r+c.x2),'y1'in c&&(l=o+c.y1),'y2'in c&&(p=o+c.y2),'x'in c&&(r+=c.x),'y'in c&&(o+=c.y),'m'===h?t.replaceItem(e.createSVGPathSegMovetoAbs(r,o),a):'l'===h?t.replaceItem(e.createSVGPathSegLinetoAbs(r,o),a):'h'===h?t.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(r),a):'v'===h?t.replaceItem(e.createSVGPathSegLinetoVerticalAbs(o),a):'c'===h?t.replaceItem(e.createSVGPathSegCurvetoCubicAbs(r,o,d,l,u,p),a):'s'===h?t.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(r,o,u,p),a):'q'===h?t.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(r,o,d,l),a):'t'===h?t.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(r,o),a):'a'===h?t.replaceItem(e.createSVGPathSegArcAbs(r,o,c.r1,c.r2,c.angle,c.largeArcFlag,c.sweepFlag),a):'z'===h||'Z'===h?(r=i,o=s):void 0);('M'==h||'m'==h)&&(i=r,s=o)}}})()},{"../geometry/Bounds":26}],28:[function(e,t){var r={};t.exports=r,function(){r.create=function(e,t){return{x:e||0,y:t||0}},r.clone=function(e){return{x:e.x,y:e.y}},r.magnitude=function(e){return o(e.x*e.x+e.y*e.y)},r.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},r.rotate=function(e,t){var r=u(t),o=l(t);return{x:e.x*r-e.y*o,y:e.x*o+e.y*r}},r.rotateAbout=function(e,t,r,o){var n=u(t),a=l(t);o||(o={});var i=r.x+((e.x-r.x)*n-(e.y-r.y)*a);return o.y=r.y+((e.x-r.x)*a+(e.y-r.y)*n),o.x=i,o},r.normalise=function(e){var t=r.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.cross=function(e,t){return e.x*t.y-e.y*t.x},r.cross3=function(e,t,r){return(t.x-e.x)*(r.y-e.y)-(t.y-e.y)*(r.x-e.x)},r.add=function(e,t,r){return r||(r={}),r.x=e.x+t.x,r.y=e.y+t.y,r},r.sub=function(e,t,r){return r||(r={}),r.x=e.x-t.x,r.y=e.y-t.y,r},r.mult=function(e,t){return{x:e.x*t,y:e.y*t}},r.div=function(e,t){return{x:e.x/t,y:e.y/t}},r.perp=function(e,t){return t=!0===t?-1:1,{x:t*-e.y,y:t*e.x}},r.neg=function(e){return{x:-e.x,y:-e.y}},r.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},{}],29:[function(e,t){var r={};t.exports=r;var a=e('../geometry/Vector'),n=e('../core/Common');(function(){r.create=function(e,t){for(var r=[],o=0;o<e.length;o++){var n=e[o],a={x:n.x,y:n.y,index:o,body:t,isInternal:!1};r.push(a)}return r},r.fromPath=function(e,t){var o=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/ig,n=[];return e.replace(o,function(e,t,r){n.push({x:parseFloat(t),y:parseFloat(r)})}),r.create(n,t)},r.centre=function(e){for(var t=r.area(e,!0),o={x:0,y:0},n=0,i,s,d;n<e.length;n++)d=(n+1)%e.length,i=a.cross(e[n],e[d]),s=a.mult(a.add(e[n],e[d]),i),o=a.add(o,s);return a.div(o,6*t)},r.mean=function(e){for(var t={x:0,y:0},r=0;r<e.length;r++)t.x+=e[r].x,t.y+=e[r].y;return a.div(t,e.length)},r.area=function(e,t){for(var r=0,o=e.length-1,n=0;n<e.length;n++)r+=(e[o].x-e[n].x)*(e[o].y+e[n].y),o=n;return t?r/2:h(r)/2},r.inertia=function(e,t){for(var r=0,o=0,i=e,s=0,n,d;s<i.length;s++)d=(s+1)%i.length,n=h(a.cross(i[d],i[s])),r+=n*(a.dot(i[d],i[d])+a.dot(i[d],i[s])+a.dot(i[s],i[s])),o+=n;return t/6*(r/o)},r.translate=function(e,t,r){var o;if(r)for(o=0;o<e.length;o++)e[o].x+=t.x*r,e[o].y+=t.y*r;else for(o=0;o<e.length;o++)e[o].x+=t.x,e[o].y+=t.y;return e},r.rotate=function(e,t,r){if(0!==t){for(var o=u(t),n=l(t),a=0;a<e.length;a++){var i=e[a],s=i.x-r.x,d=i.y-r.y;i.x=r.x+(s*o-d*n),i.y=r.y+(s*n+d*o)}return e}},r.contains=function(e,t){for(var r=0;r<e.length;r++){var o=e[r],n=e[(r+1)%e.length];if(0<(t.x-o.x)*(n.y-o.y)+(t.y-o.y)*(o.x-n.x))return!1}return!0},r.scale=function(e,t,o,n){if(1===t&&1===o)return e;n=n||r.centre(e);for(var s=0,i,d;s<e.length;s++)i=e[s],d=a.sub(i,n),e[s].x=n.x+d.x*t,e[s].y=n.y+d.y*o;return e},r.chamfer=function(e,t,r,s,d){t=t||[8],t.length||(t=[t]),r='undefined'==typeof r?-1:r,s=s||2,d=d||14;for(var l=[],u=0;u<e.length;u++){var i=e[0<=u-1?u-1:e.length-1],c=e[u],h=e[(u+1)%e.length],g=t[u<t.length?u:t.length-1];if(0===g){l.push(c);continue}var f=a.normalise({x:c.y-i.y,y:i.x-c.x}),y=a.normalise({x:h.y-c.y,y:c.x-h.x}),m=o(2*p(g,2)),_=a.mult(n.clone(f),g),x=a.normalise(a.mult(a.add(f,y),0.5)),b=a.sub(c,a.mult(x,m)),v=r;-1===r&&(v=1.75*p(g,0.32)),v=n.clamp(v,s,d),1==v%2&&(v+=1);for(var T=Math.acos(a.dot(f,y)),S=T/v,E=0;E<v;E++)l.push(a.add(a.rotate(_,S*E),b))}return l},r.clockwiseSort=function(e){var t=r.mean(e);return e.sort(function(e,r){return a.angle(t,e)-a.angle(t,r)}),e},r.isConvex=function(e){var t=0,r=e.length,o,n,a,i;if(3>r)return null;for(o=0;o<r;o++)if(n=(o+1)%r,a=(o+2)%r,i=(e[n].x-e[o].x)*(e[a].y-e[n].y),i-=(e[n].y-e[o].y)*(e[a].x-e[n].x),0>i?t|=1:0<i&&(t|=2),3==t)return!1;return 0!=t||null},r.hull=function(e){var t=[],r=[],o,n;for(e=e.slice(0),e.sort(function(e,t){var r=e.x-t.x;return 0==r?e.y-t.y:r}),n=0;n<e.length;n++){for(o=e[n];2<=r.length&&0>=a.cross3(r[r.length-2],r[r.length-1],o);)r.pop();r.push(o)}for(n=e.length-1;0<=n;n--){for(o=e[n];2<=t.length&&0>=a.cross3(t[t.length-2],t[t.length-1],o);)t.pop();t.push(o)}return t.pop(),r.pop(),t.concat(r)}})()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t){var r=t.exports=e('../core/Matter');r.Body=e('../body/Body'),r.Composite=e('../body/Composite'),r.World=e('../body/World'),r.Contact=e('../collision/Contact'),r.Detector=e('../collision/Detector'),r.Grid=e('../collision/Grid'),r.Pairs=e('../collision/Pairs'),r.Pair=e('../collision/Pair'),r.Query=e('../collision/Query'),r.Resolver=e('../collision/Resolver'),r.SAT=e('../collision/SAT'),r.Constraint=e('../constraint/Constraint'),r.MouseConstraint=e('../constraint/MouseConstraint'),r.Common=e('../core/Common'),r.Engine=e('../core/Engine'),r.Events=e('../core/Events'),r.Mouse=e('../core/Mouse'),r.Runner=e('../core/Runner'),r.Sleeping=e('../core/Sleeping'),r.Plugin=e('../core/Plugin'),r.Bodies=e('../factory/Bodies'),r.Composites=e('../factory/Composites'),r.Axes=e('../geometry/Axes'),r.Bounds=e('../geometry/Bounds'),r.Svg=e('../geometry/Svg'),r.Vector=e('../geometry/Vector'),r.Vertices=e('../geometry/Vertices'),r.Render=e('../render/Render'),r.RenderPixi=e('../render/RenderPixi'),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,r.Engine.run=r.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t){var r={};t.exports=r;var o=e('../core/Common'),n=e('../body/Composite'),s=e('../geometry/Bounds'),l=e('../core/Events'),u=e('../collision/Grid'),p=e('../geometry/Vector'),c=e('../core/Mouse');(function(){var e,t;'undefined'!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(e){var t={controller:r,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:'#18181d',wireframeBackground:'#0f0f13',hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},n=o.extend(t,e);return n.canvas&&(n.canvas.width=n.options.width||n.canvas.width,n.canvas.height=n.options.height||n.canvas.height),n.mouse=e.mouse,n.engine=e.engine,n.canvas=n.canvas||f(n.options.width,n.options.height),n.context=n.canvas.getContext('2d'),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.canvas.width,y:n.canvas.height}},1!==n.options.pixelRatio&&r.setPixelRatio(n,n.options.pixelRatio),o.isElement(n.element)?n.element.appendChild(n.canvas):o.log('Render.create: options.element was undefined, render.canvas was created but not appended','warn'),n},r.run=function(t){(function o(){t.frameRequestId=e(o),r.world(t)})()},r.stop=function(e){t(e.frameRequestId)},r.setPixelRatio=function(e,t){var r=e.options,o=e.canvas;'auto'===t&&(t=y(o)),r.pixelRatio=t,o.setAttribute('data-pixel-ratio',t),o.width=r.width*t,o.height=r.height*t,o.style.width=r.width+'px',o.style.height=r.height+'px',e.context.scale(t,t)},r.lookAt=function(e,t,r,n){n=!('undefined'!=typeof n)||n,t=o.isArray(t)?t:[t],r=r||{x:0,y:0};for(var a={min:{x:Infinity,y:Infinity},max:{x:-Infinity,y:-Infinity}},s=0;s<t.length;s+=1){var i=t[s],d=i.bounds?i.bounds.min:i.min||i.position||i,l=i.bounds?i.bounds.max:i.max||i.position||i;d&&l&&(d.x<a.min.x&&(a.min.x=d.x),l.x>a.max.x&&(a.max.x=l.x),d.y<a.min.y&&(a.min.y=d.y),l.y>a.max.y&&(a.max.y=l.y))}var u=a.max.x-a.min.x+2*r.x,p=a.max.y-a.min.y+2*r.y,h=e.canvas.height,g=e.canvas.width,f=g/h,y=u/p,m=1,_=1;y>f?_=y/f:m=f/y,e.options.hasBounds=!0,e.bounds.min.x=a.min.x,e.bounds.max.x=a.min.x+u*m,e.bounds.min.y=a.min.y,e.bounds.max.y=a.min.y+p*_,n&&(e.bounds.min.x+=0.5*u-0.5*(u*m),e.bounds.max.x+=0.5*u-0.5*(u*m),e.bounds.min.y+=0.5*p-0.5*(p*_),e.bounds.max.y+=0.5*p-0.5*(p*_)),e.bounds.min.x-=r.x,e.bounds.max.x-=r.x,e.bounds.min.y-=r.y,e.bounds.max.y-=r.y,e.mouse&&(c.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),c.setOffset(e.mouse,e.bounds.min))},r.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,r=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,n=r/e.options.height;e.context.scale(1/o,1/n),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},r.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},r.world=function(e){var t=e.engine,o=t.world,a=e.canvas,d=e.context,h=e.options,g=n.allBodies(o),f=n.allConstraints(o),y=h.wireframes?h.wireframeBackground:h.background,m=[],x=[],b={timestamp:t.timing.timestamp},v;if(l.trigger(e,'beforeRender',b),e.currentBackground!==y&&_(e,y),d.globalCompositeOperation='source-in',d.fillStyle='transparent',d.fillRect(0,0,a.width,a.height),d.globalCompositeOperation='source-over',h.hasBounds){for(v=0;v<g.length;v++){var i=g[v];s.overlaps(i.bounds,e.bounds)&&m.push(i)}for(v=0;v<f.length;v++){var T=f[v],S=T.bodyA,E=T.bodyB,P=T.pointA,C=T.pointB;S&&(P=p.add(S.position,T.pointA)),E&&(C=p.add(E.position,T.pointB)),P&&C&&(s.contains(e.bounds,P)||s.contains(e.bounds,C))&&x.push(T)}r.startViewTransform(e),e.mouse&&(c.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),c.setOffset(e.mouse,e.bounds.min))}else x=f,m=g;!h.wireframes||t.enableSleeping&&h.showSleeping?r.bodies(e,m,d):(h.showConvexHulls&&r.bodyConvexHulls(e,m,d),r.bodyWireframes(e,m,d)),h.showBounds&&r.bodyBounds(e,m,d),(h.showAxes||h.showAngleIndicator)&&r.bodyAxes(e,m,d),h.showPositions&&r.bodyPositions(e,m,d),h.showVelocity&&r.bodyVelocity(e,m,d),h.showIds&&r.bodyIds(e,m,d),h.showSeparations&&r.separations(e,t.pairs.list,d),h.showCollisions&&r.collisions(e,t.pairs.list,d),h.showVertexNumbers&&r.vertexNumbers(e,m,d),h.showMousePosition&&r.mousePosition(e,e.mouse,d),r.constraints(x,d),h.showBroadphase&&t.broadphase.controller===u&&r.grid(e,t.broadphase,d),h.showDebug&&r.debug(e,d),h.hasBounds&&r.endViewTransform(e),l.trigger(e,'afterRender',b)},r.debug=function(e,t){var r=t,o=e.engine,a=o.world,s=o.metrics,d=e.options,l=n.allBodies(a);if(500<=o.timing.timestamp-(e.debugTimestamp||0)){var u='';s.timing&&(u+='fps: '+i(s.timing.fps)+'    '),e.debugString=u,e.debugTimestamp=o.timing.timestamp}if(e.debugString){r.font='12px Arial',r.fillStyle=d.wireframes?'rgba(255,255,255,0.5)':'rgba(0,0,0,0.5)';for(var p=e.debugString.split('\n'),c=0;c<p.length;c++)r.fillText(p[c],50,50+18*c)}},r.constraints=function(e,t){for(var r=t,o=0,n;o<e.length;o++)if(n=e[o],n.render.visible&&n.pointA&&n.pointB){var a=n.bodyA,i=n.bodyB;a?(r.beginPath(),r.moveTo(a.position.x+n.pointA.x,a.position.y+n.pointA.y)):(r.beginPath(),r.moveTo(n.pointA.x,n.pointA.y)),i?r.lineTo(i.position.x+n.pointB.x,i.position.y+n.pointB.y):r.lineTo(n.pointB.x,n.pointB.y),n.render.lineWidth&&(r.lineWidth=n.render.lineWidth,r.strokeStyle=n.render.strokeStyle,r.stroke())}},r.bodyShadows=function(e,t,r){for(var o=r,n=e.engine,a=0,i;a<t.length;a++)if(i=t[a],i.render.visible){if(i.circleRadius)o.beginPath(),o.arc(i.position.x,i.position.y,i.circleRadius,0,2*g),o.closePath();else{o.beginPath(),o.moveTo(i.vertices[0].x,i.vertices[0].y);for(var s=1;s<i.vertices.length;s++)o.lineTo(i.vertices[s].x,i.vertices[s].y);o.closePath()}var l=i.position.x-0.5*e.options.width,u=i.position.y-0.2*e.options.height,p=h(l)+h(u);o.shadowColor='rgba(0,0,0,0.15)',o.shadowOffsetX=0.05*l,o.shadowOffsetY=0.05*u,o.shadowBlur=1+12*d(1,p/1e3),o.fill(),o.shadowColor=null,o.shadowOffsetX=null,o.shadowOffsetY=null,o.shadowBlur=null}},r.bodies=function(e,t,r){var o=r,n=e.engine,a=e.options,s=a.showInternalEdges||!a.wireframes,d,l,u,i;for(u=0;u<t.length;u++)if(d=t[u],d.render.visible)for(i=1<d.parts.length?1:0;i<d.parts.length;i++)if(l=d.parts[i],l.render.visible){if(a.showSleeping&&d.isSleeping?o.globalAlpha=0.5*l.render.opacity:1!==l.render.opacity&&(o.globalAlpha=l.render.opacity),l.render.sprite&&l.render.sprite.texture&&!a.wireframes){var p=l.render.sprite,c=m(e,p.texture);o.translate(l.position.x,l.position.y),o.rotate(l.angle),o.drawImage(c,c.width*-p.xOffset*p.xScale,c.height*-p.yOffset*p.yScale,c.width*p.xScale,c.height*p.yScale),o.rotate(-l.angle),o.translate(-l.position.x,-l.position.y)}else{if(l.circleRadius)o.beginPath(),o.arc(l.position.x,l.position.y,l.circleRadius,0,2*g);else{o.beginPath(),o.moveTo(l.vertices[0].x,l.vertices[0].y);for(var h=1;h<l.vertices.length;h++)!l.vertices[h-1].isInternal||s?o.lineTo(l.vertices[h].x,l.vertices[h].y):o.moveTo(l.vertices[h].x,l.vertices[h].y),l.vertices[h].isInternal&&!s&&o.moveTo(l.vertices[(h+1)%l.vertices.length].x,l.vertices[(h+1)%l.vertices.length].y);o.lineTo(l.vertices[0].x,l.vertices[0].y),o.closePath()}a.wireframes?(o.lineWidth=1,o.strokeStyle='#bbb',o.stroke()):(o.fillStyle=l.render.fillStyle,l.render.lineWidth&&(o.lineWidth=l.render.lineWidth,o.strokeStyle=l.render.strokeStyle,o.stroke()),o.fill())}o.globalAlpha=1}},r.bodyWireframes=function(e,t,r){var o=r,n=e.options.showInternalEdges,a,s,d,i,l;for(o.beginPath(),d=0;d<t.length;d++)if(a=t[d],a.render.visible)for(l=1<a.parts.length?1:0;l<a.parts.length;l++){for(s=a.parts[l],o.moveTo(s.vertices[0].x,s.vertices[0].y),i=1;i<s.vertices.length;i++)!s.vertices[i-1].isInternal||n?o.lineTo(s.vertices[i].x,s.vertices[i].y):o.moveTo(s.vertices[i].x,s.vertices[i].y),s.vertices[i].isInternal&&!n&&o.moveTo(s.vertices[(i+1)%s.vertices.length].x,s.vertices[(i+1)%s.vertices.length].y);o.lineTo(s.vertices[0].x,s.vertices[0].y)}o.lineWidth=1,o.strokeStyle='#bbb',o.stroke()},r.bodyConvexHulls=function(e,t,r){var o=r,n,a,i;for(o.beginPath(),a=0;a<t.length;a++)if(n=t[a],n.render.visible&&1!==n.parts.length){for(o.moveTo(n.vertices[0].x,n.vertices[0].y),i=1;i<n.vertices.length;i++)o.lineTo(n.vertices[i].x,n.vertices[i].y);o.lineTo(n.vertices[0].x,n.vertices[0].y)}o.lineWidth=1,o.strokeStyle='rgba(255,255,255,0.2)',o.stroke()},r.vertexNumbers=function(e,t,r){var o=r,n,a,i;for(n=0;n<t.length;n++){var s=t[n].parts;for(i=1<s.length?1:0;i<s.length;i++){var d=s[i];for(a=0;a<d.vertices.length;a++)o.fillStyle='rgba(255,255,255,0.2)',o.fillText(n+'_'+a,d.position.x+0.8*(d.vertices[a].x-d.position.x),d.position.y+0.8*(d.vertices[a].y-d.position.y))}}},r.mousePosition=function(e,t,r){var o=r;o.fillStyle='rgba(255,255,255,0.8)',o.fillText(t.position.x+'  '+t.position.y,t.position.x+5,t.position.y-5)},r.bodyBounds=function(e,t,r){var o=r,n=e.engine,a=e.options;o.beginPath();for(var s=0,i;s<t.length;s++)if(i=t[s],i.render.visible)for(var d=t[s].parts,l=1<d.length?1:0,u;l<d.length;l++)u=d[l],o.rect(u.bounds.min.x,u.bounds.min.y,u.bounds.max.x-u.bounds.min.x,u.bounds.max.y-u.bounds.min.y);o.strokeStyle=a.wireframes?'rgba(255,255,255,0.08)':'rgba(0,0,0,0.1)',o.lineWidth=1,o.stroke()},r.bodyAxes=function(e,t,r){var o=r,n=e.engine,a=e.options,s,d,i,l;for(o.beginPath(),d=0;d<t.length;d++){var u=t[d],p=u.parts;if(u.render.visible)if(a.showAxes)for(i=1<p.length?1:0;i<p.length;i++)for(s=p[i],l=0;l<s.axes.length;l++){var c=s.axes[l];o.moveTo(s.position.x,s.position.y),o.lineTo(s.position.x+20*c.x,s.position.y+20*c.y)}else for(i=1<p.length?1:0;i<p.length;i++)for(s=p[i],l=0;l<s.axes.length;l++)o.moveTo(s.position.x,s.position.y),o.lineTo((s.vertices[0].x+s.vertices[s.vertices.length-1].x)/2,(s.vertices[0].y+s.vertices[s.vertices.length-1].y)/2)}a.wireframes?(o.strokeStyle='indianred',o.lineWidth=1):(o.strokeStyle='rgba(255, 255, 255, 0.4)',o.globalCompositeOperation='overlay',o.lineWidth=2),o.stroke(),o.globalCompositeOperation='source-over'},r.bodyPositions=function(e,t,r){var o=r,n=e.engine,a=e.options,s,d,l,i;for(o.beginPath(),l=0;l<t.length;l++)if(s=t[l],s.render.visible)for(i=0;i<s.parts.length;i++)d=s.parts[i],o.arc(d.position.x,d.position.y,3,0,2*g,!1),o.closePath();for(o.fillStyle=a.wireframes?'indianred':'rgba(0,0,0,0.5)',o.fill(),o.beginPath(),l=0;l<t.length;l++)s=t[l],s.render.visible&&(o.arc(s.positionPrev.x,s.positionPrev.y,2,0,2*g,!1),o.closePath());o.fillStyle='rgba(255,165,0,0.8)',o.fill()},r.bodyVelocity=function(e,t,r){var o=r;o.beginPath();for(var n=0,a;n<t.length;n++)a=t[n],a.render.visible&&(o.moveTo(a.position.x,a.position.y),o.lineTo(a.position.x+2*(a.position.x-a.positionPrev.x),a.position.y+2*(a.position.y-a.positionPrev.y)));o.lineWidth=3,o.strokeStyle='cornflowerblue',o.stroke()},r.bodyIds=function(e,t,r){var o=r,n,a;for(n=0;n<t.length;n++)if(t[n].render.visible){var i=t[n].parts;for(a=1<i.length?1:0;a<i.length;a++){var s=i[a];o.font='12px Arial',o.fillStyle='rgba(255,255,255,0.5)',o.fillText(s.id,s.position.x+10,s.position.y-10)}}},r.collisions=function(e,t,r){var o=r,n=e.options,a,s,d,i;for(o.beginPath(),d=0;d<t.length;d++)if(a=t[d],a.isActive)for(s=a.collision,i=0;i<a.activeContacts.length;i++){var l=a.activeContacts[i],u=l.vertex;o.rect(u.x-1.5,u.y-1.5,3.5,3.5)}for(o.fillStyle=n.wireframes?'rgba(255,255,255,0.7)':'orange',o.fill(),o.beginPath(),d=0;d<t.length;d++)if(a=t[d],a.isActive&&(s=a.collision,0<a.activeContacts.length)){var p=a.activeContacts[0].vertex.x,c=a.activeContacts[0].vertex.y;2===a.activeContacts.length&&(p=(a.activeContacts[0].vertex.x+a.activeContacts[1].vertex.x)/2,c=(a.activeContacts[0].vertex.y+a.activeContacts[1].vertex.y)/2),s.bodyB===s.supports[0].body||!0===s.bodyA.isStatic?o.moveTo(p-8*s.normal.x,c-8*s.normal.y):o.moveTo(p+8*s.normal.x,c+8*s.normal.y),o.lineTo(p,c)}o.strokeStyle=n.wireframes?'rgba(255,165,0,0.7)':'orange',o.lineWidth=1,o.stroke()},r.separations=function(e,t,r){var o=r,n=e.options,a,s,d,l,u;for(o.beginPath(),u=0;u<t.length;u++)if(a=t[u],a.isActive){s=a.collision,d=s.bodyA,l=s.bodyB;var i=1;l.isStatic||d.isStatic||(i=0.5),l.isStatic&&(i=0),o.moveTo(l.position.x,l.position.y),o.lineTo(l.position.x-s.penetration.x*i,l.position.y-s.penetration.y*i),i=1,l.isStatic||d.isStatic||(i=0.5),d.isStatic&&(i=0),o.moveTo(d.position.x,d.position.y),o.lineTo(d.position.x+s.penetration.x*i,d.position.y+s.penetration.y*i)}o.strokeStyle=n.wireframes?'rgba(255,165,0,0.5)':'orange',o.stroke()},r.grid=function(e,t,r){var n=r,a=e.options;n.strokeStyle=a.wireframes?'rgba(255,180,0,0.1)':'rgba(255,180,0,0.5)',n.beginPath();for(var s=o.keys(t.buckets),d=0,i;d<s.length;d++)if(i=s[d],!(2>t.buckets[i].length)){var l=i.split(/C|R/);n.rect(0.5+parseInt(l[1],10)*t.bucketWidth,0.5+parseInt(l[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}n.lineWidth=1,n.stroke()},r.inspector=function(e,t){var r=e.engine,o=e.selected,n=e.render,s=n.options,d;if(s.hasBounds){var l=n.bounds.max.x-n.bounds.min.x,u=n.bounds.max.y-n.bounds.min.y,p=l/n.options.width,c=u/n.options.height;t.scale(1/p,1/c),t.translate(-n.bounds.min.x,-n.bounds.min.y)}for(var h=0,i;h<o.length;h++){switch(i=o[h].data,t.translate(0.5,0.5),t.lineWidth=1,t.strokeStyle='rgba(255,165,0,0.9)',t.setLineDash([1,2]),i.type){case'body':d=i.bounds,t.beginPath(),t.rect(a(d.min.x-3),a(d.min.y-3),a(d.max.x-d.min.x+6),a(d.max.y-d.min.y+6)),t.closePath(),t.stroke();break;case'constraint':var f=i.pointA;i.bodyA&&(f=i.pointB),t.beginPath(),t.arc(f.x,f.y,10,0,2*g),t.closePath(),t.stroke();}t.setLineDash([]),t.translate(-0.5,-0.5)}null!==e.selectStart&&(t.translate(0.5,0.5),t.lineWidth=1,t.strokeStyle='rgba(255,165,0,0.6)',t.fillStyle='rgba(255,165,0,0.1)',d=e.selectBounds,t.beginPath(),t.rect(a(d.min.x),a(d.min.y),a(d.max.x-d.min.x),a(d.max.y-d.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-0.5,-0.5)),s.hasBounds&&t.setTransform(1,0,0,1,0,0)};var f=function(e,t){var r=document.createElement('canvas');return r.width=e,r.height=t,r.oncontextmenu=function(){return!1},r.onselectstart=function(){return!1},r},y=function(e){var t=e.getContext('2d'),r=window.devicePixelRatio||1,o=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return r/o},m=function(e,t){var r=e.textures[t];return r?r:(r=e.textures[t]=new Image,r.src=t,r)},_=function(e,t){var r=t;/(jpg|gif|png)$/.test(t)&&(r='url('+t+')'),e.canvas.style.background=r,e.canvas.style.backgroundSize='contain',e.currentBackground=t}})()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t){var r={};t.exports=r;var o=e('../geometry/Bounds'),n=e('../body/Composite'),a=e('../core/Common'),i=e('../core/Events'),s=e('../geometry/Vector');(function(){var e,t;'undefined'!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(a.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),r.create=function(e){a.warn('RenderPixi.create: Matter.RenderPixi is deprecated (see docs)');var t=a.extend({controller:r,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:'#fafafa',wireframeBackground:'#222',hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},e),o=!t.options.wireframes&&'transparent'===t.options.background;return t.pixiOptions=t.pixiOptions||{view:t.canvas,transparent:o,antialias:!0,backgroundColor:e.background},t.mouse=e.mouse,t.engine=e.engine,t.renderer=t.renderer||new PIXI.WebGLRenderer(t.options.width,t.options.height,t.pixiOptions),t.container=t.container||new PIXI.Container,t.spriteContainer=t.spriteContainer||new PIXI.Container,t.canvas=t.canvas||t.renderer.view,t.bounds=t.bounds||{min:{x:0,y:0},max:{x:t.options.width,y:t.options.height}},i.on(t.engine,'beforeUpdate',function(){r.clear(t)}),t.textures={},t.sprites={},t.primitives={},t.container.addChild(t.spriteContainer),a.isElement(t.element)?t.element.appendChild(t.canvas):a.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),t.canvas.oncontextmenu=function(){return!1},t.canvas.onselectstart=function(){return!1},t},r.run=function(t){(function o(){t.frameRequestId=e(o),r.world(t)})()},r.stop=function(e){t(e.frameRequestId)},r.clear=function(e){for(var t=e.container,r=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;r.children[0];)r.removeChild(r.children[0]);var o=e.sprites['bg-0'];e.textures={},e.sprites={},e.primitives={},e.sprites['bg-0']=o,o&&t.addChildAt(o,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},r.setBackground=function(e,t){if(e.currentBackground!==t){var r=t.indexOf&&-1!==t.indexOf('#'),o=e.sprites['bg-0'];if(r){var n=a.colorToNumber(t);e.renderer.backgroundColor=n,o&&e.container.removeChild(o)}else if(!o){var i=u(e,t);o=e.sprites['bg-0']=new PIXI.Sprite(i),o.position.x=0,o.position.y=0,e.container.addChildAt(o,0)}e.currentBackground=t}},r.world=function(e){var t=e.engine,a=t.world,d=e.renderer,l=e.container,u=e.options,p=n.allBodies(a),c=n.allConstraints(a),h=[],g;u.wireframes?r.setBackground(e,u.wireframeBackground):r.setBackground(e,u.background);var i=e.bounds.max.x-e.bounds.min.x,f=e.bounds.max.y-e.bounds.min.y,y=i/e.options.width,m=f/e.options.height;if(u.hasBounds){for(g=0;g<p.length;g++){var _=p[g];_.render.sprite.visible=o.overlaps(_.bounds,e.bounds)}for(g=0;g<c.length;g++){var x=c[g],b=x.bodyA,v=x.bodyB,T=x.pointA,S=x.pointB;b&&(T=s.add(b.position,x.pointA)),v&&(S=s.add(v.position,x.pointB)),T&&S&&(o.contains(e.bounds,T)||o.contains(e.bounds,S))&&h.push(x)}l.scale.set(1/y,1/m),l.position.set(-e.bounds.min.x*(1/y),-e.bounds.min.y*(1/m))}else h=c;for(g=0;g<p.length;g++)r.body(e,p[g]);for(g=0;g<h.length;g++)r.constraint(e,h[g]);d.render(l)},r.constraint=function(e,t){var r=e.engine,o=t.bodyA,n=t.bodyB,i=t.pointA,s=t.pointB,d=e.container,l=t.render,u='c-'+t.id,p=e.primitives[u];return p||(p=e.primitives[u]=new PIXI.Graphics),l.visible&&t.pointA&&t.pointB?void(-1===a.indexOf(d.children,p)&&d.addChild(p),p.clear(),p.beginFill(0,0),p.lineStyle(l.lineWidth,a.colorToNumber(l.strokeStyle),1),o?p.moveTo(o.position.x+i.x,o.position.y+i.y):p.moveTo(i.x,i.y),n?p.lineTo(n.position.x+s.x,n.position.y+s.y):p.lineTo(s.x,s.y),p.endFill()):void p.clear()},r.body=function(e,t){var r=e.engine,o=t.render;if(o.visible)if(o.sprite&&o.sprite.texture){var n='b-'+t.id,i=e.sprites[n],s=e.spriteContainer;i||(i=e.sprites[n]=d(e,t)),-1===a.indexOf(s.children,i)&&s.addChild(i),i.position.x=t.position.x,i.position.y=t.position.y,i.rotation=t.angle,i.scale.x=o.sprite.xScale||1,i.scale.y=o.sprite.yScale||1}else{var u='b-'+t.id,p=e.primitives[u],c=e.container;p||(p=e.primitives[u]=l(e,t),p.initialAngle=t.angle),-1===a.indexOf(c.children,p)&&c.addChild(p),p.position.x=t.position.x,p.position.y=t.position.y,p.rotation=t.angle-p.initialAngle}};var d=function(e,t){var r=t.render,o=r.sprite.texture,n=u(e,o),a=new PIXI.Sprite(n);return a.anchor.x=t.render.sprite.xOffset,a.anchor.y=t.render.sprite.yOffset,a},l=function(e,t){var r=t.render,o=e.options,n=new PIXI.Graphics,i=a.colorToNumber(r.fillStyle),s=a.colorToNumber(r.strokeStyle),d=a.colorToNumber(r.strokeStyle),l=a.colorToNumber('#bbb'),u=a.colorToNumber('#CD5C5C'),p;n.clear();for(var c=1<t.parts.length?1:0;c<t.parts.length;c++){p=t.parts[c],o.wireframes?(n.beginFill(0,0),n.lineStyle(1,l,1)):(n.beginFill(i,1),n.lineStyle(r.lineWidth,s,1)),n.moveTo(p.vertices[0].x-t.position.x,p.vertices[0].y-t.position.y);for(var h=1;h<p.vertices.length;h++)n.lineTo(p.vertices[h].x-t.position.x,p.vertices[h].y-t.position.y);n.lineTo(p.vertices[0].x-t.position.x,p.vertices[0].y-t.position.y),n.endFill(),(o.showAngleIndicator||o.showAxes)&&(n.beginFill(0,0),o.wireframes?n.lineStyle(1,u,1):n.lineStyle(1,d),n.moveTo(p.position.x-t.position.x,p.position.y-t.position.y),n.lineTo((p.vertices[0].x+p.vertices[p.vertices.length-1].x)/2-t.position.x,(p.vertices[0].y+p.vertices[p.vertices.length-1].y)/2-t.position.y),n.endFill())}return n},u=function(e,t){var r=e.textures[t];return r||(r=e.textures[t]=PIXI.Texture.fromImage(t)),r}})()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)})}).call(t,r(18))},function(e,t,r){'use strict';(function(e){function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0,t.loader=t.prepare=t.particles=t.mesh=t.loaders=t.interaction=t.filters=t.extras=t.extract=t.accessibility=void 0;var n=r(184);Object.keys(n).forEach(function(e){'default'===e||'__esModule'===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var a=r(0);Object.keys(a).forEach(function(e){'default'===e||'__esModule'===e||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=r(148),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=r(105),l=o(d),u=r(150),p=o(u),c=r(77),h=o(c),g=r(163),f=o(g),y=r(169),m=o(y),_=r(170),x=o(_),b=r(175),v=o(b),T=r(178),S=o(T),E=r(187),P=o(E);a.utils.mixins.performMixins();var C=x.shared||null;t.accessibility=l,t.extract=p,t.extras=h,t.filters=f,t.interaction=m,t.loaders=x,t.mesh=v,t.particles=S,t.prepare=P,t.loader=C,'function'==typeof s.default&&(0,s.default)(t),e.PIXI=t}).call(t,r(18))},function(e,t,r){var o={createContext:r(102),setVertexAttribArrays:r(49),GLBuffer:r(98),GLFramebuffer:r(99),GLShader:r(100),GLTexture:r(48),VertexArrayObject:r(101),shader:r(103)};'undefined'!=typeof e&&e.exports&&(e.exports=o),'undefined'!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=o)},function(e,t,r){(function(e){function r(e,t){for(var r=0,o=e.length-1,n;0<=o;o--)n=e[o],'.'===n?e.splice(o,1):'..'===n?(e.splice(o,1),r++):r&&(e.splice(o,1),r--);if(t)for(;r--;r)e.unshift('..');return e}function o(e,t){if(e.filter)return e.filter(t);for(var r=[],o=0;o<e.length;o++)t(e[o],o,e)&&r.push(e[o]);return r}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return n.exec(e).slice(1)};t.resolve=function(){for(var t='',n=!1,a=arguments.length-1,i;-1<=a&&!n;a--){if(i=0<=a?arguments[a]:e.cwd(),'string'!=typeof i)throw new TypeError('Arguments to path.resolve must be strings');else if(!i)continue;t=i+'/'+t,n='/'===i.charAt(0)}return t=r(o(t.split('/'),function(e){return!!e}),!n).join('/'),(n?'/':'')+t||'.'},t.normalize=function(e){var n=t.isAbsolute(e),a='/'===i(e,-1);return e=r(o(e.split('/'),function(e){return!!e}),!n).join('/'),e||n||(e='.'),e&&a&&(e+='/'),(n?'/':'')+e},t.isAbsolute=function(e){return'/'===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,function(e){if('string'!=typeof e)throw new TypeError('Arguments to path.join must be strings');return e}).join('/'))},t.relative=function(e,r){function o(e){for(var t=0;t<e.length&&''===e[t];t++);for(var r=e.length-1;0<=r&&''===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var n=o(e.split('/')),a=o(r.split('/')),s=Math.min(n.length,a.length),d=s,l=0;l<s;l++)if(n[l]!==a[l]){d=l;break}for(var i=[],l=d;l<n.length;l++)i.push('..');return i=i.concat(a.slice(d)),i.join('/')},t.sep='/',t.delimiter=':',t.dirname=function(e){var t=a(e),r=t[0],o=t[1];return r||o?(o&&(o=o.substr(0,o.length-1)),r+o):'.'},t.basename=function(e,t){var r=a(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return a(e)[3]};var i=function(e,t,r){return e.substr(t,r)}}).call(t,r(90))},function(e){'use strict';function t(){}function r(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){this._events=new t,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,a='~';Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(a=!1)),o.prototype.eventNames=function(){var e=[],t,r;if(0===this._eventsCount)return e;for(r in t=this._events)n.call(t,r)&&e.push(a?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},o.prototype.listeners=function(e,t){var r=a?a+e:e,o=this._events[r];if(t)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var n=0,i=o.length,s=Array(i);n<i;n++)s[n]=o[n].fn;return s},o.prototype.emit=function(e,t,r,o,n,s){var d=a?a+e:e;if(!this._events[d])return!1;var l=this._events[d],u=arguments.length,p,c;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,n),!0;case 6:return l.fn.call(l.context,t,r,o,n,s),!0;}for(c=1,p=Array(u-1);c<u;c++)p[c-1]=arguments[c];l.fn.apply(l.context,p)}else{var i=l.length,h;for(c=0;c<i;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,o);break;default:if(!p)for(h=1,p=Array(u-1);h<u;h++)p[h-1]=arguments[h];l[c].fn.apply(l[c].context,p);}}return!0},o.prototype.on=function(e,t,o){var n=new r(t,o||this),i=a?a+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},o.prototype.once=function(e,t,o){var n=new r(t,o||this,!0),i=a?a+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],n]:this._events[i].push(n):(this._events[i]=n,this._eventsCount++),this},o.prototype.removeListener=function(e,r,o,n){var s=a?a+e:e;if(!this._events[s])return this;if(!r)return 0==--this._eventsCount?this._events=new t:delete this._events[s],this;var d=this._events[s];if(d.fn)d.fn!==r||n&&!d.once||o&&d.context!==o||(0==--this._eventsCount?this._events=new t:delete this._events[s]);else{for(var l=0,i=[],u=d.length;l<u;l++)(d[l].fn!==r||n&&!d[l].once||o&&d[l].context!==o)&&i.push(d[l]);i.length?this._events[s]=1===i.length?i[0]:i:0==--this._eventsCount?this._events=new t:delete this._events[s]}return this},o.prototype.removeAllListeners=function(e){var r;return e?(r=a?a+e:e,this._events[r]&&(0==--this._eventsCount?this._events=new t:delete this._events[r])):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,e.exports=o},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}t.__esModule=!0;var d=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(11),u=o(l),p=r(76),c=o(p),h=r(75),g=o(h),f=r(9),y=o(f),m=r(4),_=r(2),x=r(3),b=o(x),v=function(e){function t(r,o,i,s,d){n(this,t);var l=a(this,e.call(this));if(l.noFrame=!1,o||(l.noFrame=!0,o=new m.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),l.baseTexture=r,l._frame=o,l.trim=s,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=i||o,l._rotate=+(d||0),!0===d)l._rotate=2;else if(0!=l._rotate%2)throw new Error('attempt to use diamond-shaped UVs. If you are sure, set rotation manually');return r.hasLoaded?(l.noFrame&&(o=new m.Rectangle(0,0,r.width,r.height),r.on('update',l.onBaseTextureUpdated,l)),l.frame=o):r.once('loaded',l.onBaseTextureLoaded,l),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return i(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.frame=this.noFrame?new m.Rectangle(0,0,e.width,e.height):this._frame,this.baseTexture.on('update',this.onBaseTextureUpdated,this),this.emit('update',this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit('update',this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(_.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off('update',this.onBaseTextureUpdated,this),this.baseTexture.off('loaded',this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new g.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,r,o,n){var a=_.TextureCache[e];return a||(a=new t(u.default.fromImage(e,r,o,n)),t.addToCache(a,e)),a},t.fromFrame=function(e){var t=_.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'canvas';return new t(u.default.fromCanvas(e,r,o))},t.fromVideo=function(e,r){return'string'==typeof e?t.fromVideoUrl(e,r):new t(c.default.fromVideo(e,r))},t.fromVideoUrl=function(e,r){return new t(c.default.fromUrl(e,r))},t.from=function(e){if('string'==typeof e){var r=_.TextureCache[e];if(!r){var o=null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return o?t.fromVideoUrl(e):t.fromImage(e)}return r}return e instanceof HTMLImageElement?new t(u.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,b.default.SCALE_MODE,'HTMLCanvasElement'):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof u.default?new t(e):e},t.fromLoader=function(e,r,o){var n=new u.default(e,void 0,(0,_.getResolutionOfUrl)(r)),a=new t(n);return n.imageUrl=r,o||(o=r),u.default.addToCache(a.baseTexture,o),t.addToCache(a,o),o!==r&&(u.default.addToCache(a.baseTexture,r),t.addToCache(a,r)),a},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),_.TextureCache[t]&&console.warn('Texture added to the cache with an id ['+t+'] that already had an entry'),_.TextureCache[t]=e)},t.removeFromCache=function(e){if('string'==typeof e){var t=_.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return-1<r&&t.textureCacheIds.splice(r,1),delete _.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)delete _.TextureCache[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},d(t,[{key:'frame',get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height)throw new Error('Texture Error: frame does not fit inside the base Texture dimensions: X: '+e.x+' + '+e.width+' > '+this.baseTexture.width+' '+('Y: '+e.y+' + '+e.height+' > '+this.baseTexture.height));this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:'rotate',get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:'width',get:function(){return this.orig.width}},{key:'height',get:function(){return this.orig.height}}]),t}(y.default);t.default=v,v.EMPTY=new v(new u.default()),s(v.EMPTY),s(v.EMPTY.baseTexture),v.WHITE=function(){var e=document.createElement('canvas');e.width=10,e.height=10;var t=e.getContext('2d');return t.fillStyle='white',t.fillRect(0,0,10,10),new v(new u.default(e))}(),s(v.WHITE),s(v.WHITE.baseTexture)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.round;t.__esModule=!0;var d=r(2),l=r(3),u=o(l),p=r(9),c=o(p),h=r(143),g=o(h),f=r(26),y=o(f),m=function(e){function t(r,o,i){n(this,t);var s=a(this,e.call(this));return s.uid=(0,d.uid)(),s.touched=0,s.resolution=i||u.default.RESOLUTION,s.width=100,s.height=100,s.realWidth=100,s.realHeight=100,s.scaleMode=void 0===o?u.default.SCALE_MODE:o,s.hasLoaded=!1,s.isLoading=!1,s.source=null,s.origSource=null,s.imageType=null,s.sourceScale=1,s.premultipliedAlpha=!0,s.imageUrl=null,s.isPowerOfTwo=!1,s.mipmap=u.default.MIPMAP_TEXTURES,s.wrapMode=u.default.WRAP_MODE,s._glTextures={},s._enabled=0,s._virtalBoundId=-1,s._destroyed=!1,s.textureCacheIds=[],r&&s.loadSource(r),s}return i(t,e),t.prototype.update=function(){'svg'!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit('update',this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=y.default.isPow2(this.realWidth)&&y.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),'svg'===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit('loaded',this);else if(!e.getContext){this.isLoading=!0;var o=this;if(e.onload=function(){if(o._updateImageType(),e.onload=null,e.onerror=null,!!o.isLoading)return o.isLoading=!1,o._sourceLoaded(),'svg'===o.imageType?void o._loadSvgSource():void o.emit('loaded',o)},e.onerror=function(){e.onload=null,e.onerror=null,o.isLoading&&(o.isLoading=!1,o.emit('error',o))},e.complete&&e.src){if(e.onload=null,e.onerror=null,'svg'===o.imageType)return void o._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit('loaded',this)):t&&this.emit('error',this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,d.decomposeDataUri)(this.imageUrl),t;if(e&&'image'===e.mediaType){var r=e.subType.split('+')[0];if(t=(0,d.getUrlFileExtension)('.'+r),!t)throw new Error('Invalid image type in data URI.')}else t=(0,d.getUrlFileExtension)(this.imageUrl),t||(t='png');this.imageType=t}},t.prototype._loadSvgSource=function(){if('svg'===this.imageType){var e=(0,d.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t;if('base64'===e.encoding){if(!atob)throw new Error('Your browser doesn\'t support base64 conversions.');t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error('Failed to load SVG using XHR.');e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit('error',e)},t.open('GET',this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var r=(0,d.getSvgSize)(e),o=r.width,n=r.height;if(!o||!n)throw new Error('The SVG image must have width and height defined (in pixels), canvas API needs them.');this.realWidth=s(o*this.sourceScale),this.realHeight=s(n*this.sourceScale),this._updateDimensions();var a=document.createElement('canvas');a.width=this.realWidth,a.height=this.realHeight,a._pixiId='canvas_'+(0,d.uid)(),a.getContext('2d').drawImage(this.source,0,0,o,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=a,t.addToCache(this,a._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit('loaded',this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete d.TextureCache[this.imageUrl],this.imageUrl=null,!navigator.isCocoonJS&&(this.source.src='')),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit('dispose',this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,r,o,n){var a=d.BaseTextureCache[e];if(!a){var i=new Image;void 0===r&&0!==e.indexOf('data:')&&(i.crossOrigin=(0,g.default)(e)),a=new t(i,o),a.imageUrl=e,n&&(a.sourceScale=n),a.resolution=(0,d.getResolutionOfUrl)(e),i.src=e,t.addToCache(a,e)}return a},t.fromCanvas=function(e,r){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:'canvas';e._pixiId||(e._pixiId=o+'_'+(0,d.uid)());var n=d.BaseTextureCache[e._pixiId];return n||(n=new t(e,r),t.addToCache(n,e._pixiId)),n},t.from=function(e,r,o){if('string'==typeof e)return t.fromImage(e,void 0,r,o);if(e instanceof HTMLImageElement){var n=e.src,a=d.BaseTextureCache[n];return a||(a=new t(e,r),a.imageUrl=n,o&&(a.sourceScale=o),a.resolution=(0,d.getResolutionOfUrl)(n),t.addToCache(a,n)),a}return e instanceof HTMLCanvasElement?t.fromCanvas(e,r):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),d.BaseTextureCache[t]&&console.warn('BaseTexture added to the cache with an id ['+t+'] that already had an entry'),d.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if('string'==typeof e){var t=d.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return-1<r&&t.textureCacheIds.splice(r,1),delete d.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var o=0;o<e.textureCacheIds.length;++o)delete d.BaseTextureCache[e.textureCacheIds[o]];return e.textureCacheIds.length=0,e}return null},t}(c.default);t.default=m},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(e instanceof Array){if('precision'!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift('precision '+t+' float;'),r}}else if('precision'!==e.substring(0,9))return'precision '+t+' float;\n'+e;return e}t.__esModule=!0;var s=r(7),d=r(3),l=function(e){return e&&e.__esModule?e:{default:e}}(d),u=function(e){function t(r,a,s){return o(this,t),n(this,e.call(this,r,i(a,l.default.PRECISION_VERTEX),i(s,l.default.PRECISION_FRAGMENT)))}return a(t,e),t}(s.GLShader);t.default=u},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(2),d=r(60),l=function(e){return e&&e.__esModule?e:{default:e}}(d),u=function(e){function t(){o(this,t);var r=n(this,e.call(this));return r.children=[],r}return a(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(1<t)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit('added',this);return e},t.prototype.addChildAt=function(e,t){if(0>t||t>this.children.length)throw new Error(e+'addChildAt: The index '+t+' supplied is out of bounds '+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit('added',this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),o=this.getChildIndex(t);this.children[r]=t,this.children[o]=e,this.onChildrenChange(r<o?r:o)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error('The supplied DisplayObject must be a child of the caller');return t},t.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error('The supplied index is out of bounds');var r=this.getChildIndex(e);(0,s.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error('getChildAt: Index ('+e+') does not exist.');return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(1<t)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var o=this.children.indexOf(e);if(-1===o)return null;e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),e.emit('removed',this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,s.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit('removed',this),t},t.prototype.removeChildren=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,o='number'==typeof t?t:this.children.length,n=o-r,a;if(0<n&&n<=o){a=this.children.splice(r,n);for(var s=0;s<a.length;++s)a[s].parent=null,a[s].transform&&(a[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var i=0;i<a.length;++i)a[i].emit('removed',this);return a}if(0==n&&0===this.children.length)return[];throw new RangeError('removeChildren: numeric values are outside the acceptable range.')},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length,r;e<t;++e)r=this.children[e],r.visible&&r.updateTransform()},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0,t;e<this.children.length;e++)(t=this.children[e],t.visible&&t.renderable)&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds));this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<t.length;o++)t[o].enabled&&this._enabledFilters.push(t[o]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var n=0,a=this.children.length;n<a;n++)this.children[n].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(){},t.prototype._renderCanvas=function(){},t.prototype.renderCanvas=function(e){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var r='boolean'==typeof t?t:t&&t.children,o=this.removeChildren(0,this.children.length);if(r)for(var n=0;n<o.length;++n)o[n].destroy(t)},i(t,[{key:'width',get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0===t?1:e/t,this._width=e}},{key:'height',get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0===t?1:e/t,this._height=e}}]),t}(l.default);t.default=u,u.prototype.containerUpdateTransform=u.prototype.updateTransform},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(66),d=o(s),l=r(120),u=o(l),p=r(67),c=o(p),h=r(121),g=o(h),f=r(2),y=r(1),m=r(3),_=o(m),x=function(e){function t(r,o,i){n(this,t);var s=a(this,e.call(this,'Canvas',r,o,i));return s.type=y.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext('2d',{alpha:s.transparent}),s.refresh=!0,s.maskManager=new u.default(s),s.smoothProperty='imageSmoothingEnabled',s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty='webkitImageSmoothingEnabled':s.rootContext.mozImageSmoothingEnabled?s.smoothProperty='mozImageSmoothingEnabled':s.rootContext.oImageSmoothingEnabled?s.smoothProperty='oImageSmoothingEnabled':s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty='msImageSmoothingEnabled')),s.initPlugins(),s.blendModes=(0,g.default)(),s._activeBlendMode=null,s.context=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return i(t,e),t.prototype.render=function(e,t,r,o,n){if(this.view){this.renderingToScreen=!t,this.emit('prerender');var a=this.resolution;t?(t=t.baseTexture||t,!t._canvasRenderTarget&&(t._canvasRenderTarget=new c.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var i=this.context;if(t||(this._lastObjectRendered=e),!n){var s=e.parent,d=this._tempDisplayObjectParent.transform.worldTransform;o?(o.copy(d),this._tempDisplayObjectParent.transform._worldID=-1):d.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=s}i.setTransform(1,0,0,1,0,0),i.globalAlpha=1,i.globalCompositeOperation=this.blendModes[y.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(i.fillStyle='black',i.clear()),(void 0===r?this.clearBeforeRender:r)&&this.renderingToScreen&&(this.transparent?i.clearRect(0,0,this.width,this.height):(i.fillStyle=this._backgroundColorString,i.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=i,e.renderCanvas(this),this.context=l,this.resolution=a,this.emit('postrender')}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode===e||(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.smoothProperty&&(this.rootContext[this.smoothProperty]=_.default.SCALE_MODE===y.SCALE_MODES.LINEAR)},t}(d.default);t.default=x,f.pluginTarget.mixin(x)},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(t){r(this,e),this.renderer=t,this.renderer.on('context',this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off('context',this.onContextChange,this),this.renderer=null},e}();t.default=o},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(39),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=new d.Point,c=new d.Polygon,h=function(e){function t(r,a,i,s,l){o(this,t);var p=n(this,e.call(this));return p._texture=r,p.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),p.vertices=a||new Float32Array([0,0,100,0,100,100,0,100]),p.indices=s||new Uint16Array([0,1,3,2]),p.dirty=0,p.indexDirty=0,p.blendMode=d.BLEND_MODES.NORMAL,p.canvasPadding=0,p.drawMode=l||t.DRAW_MODES.TRIANGLE_MESH,p.shader=null,p.tintRgb=new Float32Array([1,1,1]),p._glDatas={},p._uvTransform=new u.default(r),p.uploadUvTransform=!1,p.pluginName='mesh',p}return a(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,p);for(var r=this.vertices,o=c.points,n=this.indices,a=this.indices.length,s=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,d=0;d+2<a;d+=s){var i=2*n[d],l=2*n[d+1],u=2*n[d+2];if(o[0]=r[i],o[1]=r[i+1],o[2]=r[l],o[3]=r[l+1],o[4]=r[u],o[5]=r[u+1],c.contains(p.x,p.y))return!0}return!1},i(t,[{key:'texture',get:function(){return this._texture},set:function(e){this._texture===e||(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once('update',this._onTextureUpdate,this)))}},{key:'tint',get:function(){return d.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=d.utils.hex2rgb(e,this.tintRgb)}}]),t}(d.Container);t.default=h,h.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(e,t,r){'use strict';function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(195),i=n(a),s=r(41),d=n(s),l=r(91),u=o(l),p=r(92),c=o(p);i.default.Resource=d.default,i.default.async=u,i.default.base64=c,e.exports=i.default,t.default=i.default},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(r){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,r){'use strict';function o(e,t){var o=e.points;if(0!==o.length){var n=new s.Point(o[0],o[1]),l=new s.Point(o[o.length-2],o[o.length-1]);if(n.x===l.x&&n.y===l.y){o=o.slice(),o.pop(),o.pop(),l=new s.Point(o[o.length-2],o[o.length-1]);var u=l.x+0.5*(n.x-l.x),p=l.y+0.5*(n.y-l.y);o.unshift(u,p),o.push(u,p)}var c=t.points,h=t.indices,f=o.length/2,y=o.length,m=c.length/6,_=e.lineWidth/2,x=(0,d.hex2rgb)(e.lineColor),v=e.lineAlpha,T=x[0]*v,r=x[1]*v,g=x[2]*v,b=o[0],S=o[1],E=o[2],P=o[3],C=0,w=0,A=-(S-P),I=b-E,M=0,R=0,O=0,D=0,k=a(A*A+I*I);A/=k,I/=k,A*=_,I*=_,c.push(b-A,S-I,T,r,g,v),c.push(b+A,S+I,T,r,g,v);for(var L=1;L<f-1;++L){b=o[2*(L-1)],S=o[2*(L-1)+1],E=o[2*L],P=o[2*L+1],C=o[2*(L+1)],w=o[2*(L+1)+1],A=-(S-P),I=b-E,k=a(A*A+I*I),A/=k,I/=k,A*=_,I*=_,M=-(P-w),R=E-C,k=a(M*M+R*R),M/=k,R/=k,M*=_,R*=_;var i=-I+S-(-I+P),B=-A+E-(-A+b),N=(-A+b)*(-I+P)-(-A+E)*(-I+S),F=-R+w-(-R+P),U=-M+E-(-M+C),X=(-M+C)*(-R+P)-(-M+E)*(-R+w),G=i*U-F*B;if(0.1>Math.abs(G)){G+=10.1,c.push(E-A,P-I,T,r,g,v),c.push(E+A,P+I,T,r,g,v);continue}var V=(B*X-U*N)/G,W=(F*N-i*X)/G,j=(V-E)*(V-E)+(W-P)*(W-P);j>196*_*_?(O=A-M,D=I-R,k=a(O*O+D*D),O/=k,D/=k,O*=_,D*=_,c.push(E-O,P-D),c.push(T,r,g,v),c.push(E+O,P+D),c.push(T,r,g,v),c.push(E-O,P-D),c.push(T,r,g,v),y++):(c.push(V,W),c.push(T,r,g,v),c.push(E-(V-E),P-(W-P)),c.push(T,r,g,v))}b=o[2*(f-2)],S=o[2*(f-2)+1],E=o[2*(f-1)],P=o[2*(f-1)+1],A=-(S-P),I=b-E,k=a(A*A+I*I),A/=k,I/=k,A*=_,I*=_,c.push(E-A,P-I),c.push(T,r,g,v),c.push(E+A,P+I),c.push(T,r,g,v),h.push(m);for(var H=0;H<y;++H)h.push(m++);h.push(m-1)}}function n(e,t){var o=0,n=e.points;if(0!==n.length){var a=t.points,i=n.length/2,s=(0,d.hex2rgb)(e.lineColor),l=e.lineAlpha,u=s[0]*l,r=s[1]*l,p=s[2]*l;for(o=1;o<i;o++){var c=n[2*(o-1)],h=n[2*(o-1)+1],g=n[2*o],f=n[2*o+1];a.push(c,h),a.push(u,r,p,l),a.push(g,f),a.push(u,r,p,l)}}}var a=Math.sqrt;t.__esModule=!0,t.default=function(e,t,r){e.nativeLines?n(e,r):o(e,t)};var s=r(4),d=r(2)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(66),d=o(s),l=r(128),u=o(l),p=r(129),c=o(p),h=r(127),g=o(h),f=r(22),y=o(f),m=r(21),_=o(m),x=r(123),b=o(x),v=r(11),T=o(v),S=r(122),E=o(S),P=r(124),C=o(P),w=r(132),A=o(w),I=r(133),M=o(I),R=r(2),O=r(7),D=o(O),k=r(1),L=0,B=function(e){function t(r,o,i){n(this,t);var s=a(this,e.call(this,'WebGL',r,o,i));return s.legacy=s.options.legacy,s.legacy&&(D.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=k.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener('webglcontextlost',s.handleContextLost,!1),s.view.addEventListener('webglcontextrestored',s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&'notMultiplied'!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new u.default(s),s.stencilManager=new c.default(s),s.emptyRenderer=new _.default(s),s.currentRenderer=s.emptyRenderer,s.initPlugins(),s.options.context&&(0,M.default)(s.options.context),s.gl=s.options.context||D.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=L++,s.state=new C.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.filterManager=new g.default(s),s.drawModes=(0,A.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return i(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension('WEBGL_lose_context')&&e.getExtension('WEBGL_lose_context').restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(t),this.emptyTextures=Array(t),this.textureManager=new b.default(this),this.textureGC=new E.default(this),this.state.resetToDefault(),this.rootRenderTarget=new y.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new D.default.GLTexture.fromData(e,null,1,1),o={_glTextures:{}};o._glTextures[this.CONTEXT_UID]={};for(var n=0,a;n<t;n++)a=new T.default,a._glTextures[this.CONTEXT_UID]=r,this.boundTextures[n]=o,this.emptyTextures[n]=a,this.bindTexture(null,n);this.emit('context',e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,r,o,n){if(this.renderingToScreen=!t,this.emit('prerender'),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!n){var a=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}this.bindRenderTexture(t,o),this.currentRenderer.start(),(void 0===r?this.clearBeforeRender:r)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit('postrender')}},t.prototype.setObjectRenderer=function(e){this.currentRenderer===e||(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){d.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture,o=r._glRenderTargets[this.CONTEXT_UID];return o&&o.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var r;if(e){var o=e.baseTexture;o._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(o,0),this.unbindTexture(o),r=o._glRenderTargets[this.CONTEXT_UID],r.setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,r){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,!r){for(var o=0;o<this.boundTextures.length;o++)if(this.boundTextures[o]===e)return o;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}else t=t||0;var n=this.gl,a=e._glTextures[this.CONTEXT_UID];return a?(this.boundTextures[t]=e,n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,a.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener('webglcontextlost',this.handleContextLost),this.view.removeEventListener('webglcontextrestored',this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension('WEBGL_lose_context')&&this.gl.getExtension('WEBGL_lose_context').loseContext(),this.gl=null},t}(d.default);t.default=B,R.pluginTarget.mixin(B)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(15),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=function(e){function t(){return o(this,t),n(this,e.apply(this,arguments))}return a(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(){},t}(s.default);t.default=d},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(4),a=r(1),i=r(3),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=r(7),l=function(){function e(t,r,i,l,u,p){o(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=u||s.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0===l?s.default.SCALE_MODE:l,this.root=p,this.root?(this.frameBuffer=new d.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=d.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,i)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?e.disable(e.SCISSOR_TEST):(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},e.prototype.calculateProjection=function(e,t){var r=this.projectionMatrix;t=t||e,r.identity(),this.root?(r.a=2*(1/e.width),r.d=2*(-1/e.height),r.tx=-1-t.x*r.a,r.ty=1-t.y*r.d):(r.a=2*(1/e.width),r.d=2*(1/e.height),r.tx=-1-t.x*r.a,r.ty=-1-t.y*r.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},e.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();t.default=l},function(e,t,r){var o=Math.sqrt,n=Math.floor,a=Math.sin,i=Math.cos,s=Math.pow,d=Math.PI;(function(r){var l=l||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var r=e.indexOf(t);-1!==r&&e.splice(r,1)},update:function(t,r){if(0===e.length)return!1;var o=0;for(t=void 0===t?l.now():t;o<e.length;)e[o].update(t)||r?o++:e.splice(o,1);return!0}}}(),u,p;l.now='undefined'==typeof window&&'undefined'!=typeof r?function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6}:'undefined'!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0===Date.now?function(){return new Date().getTime()}:Date.now,l.Tween=function(e){var t=e,r={},o={},n={},a=1e3,s=0,i=!1,d=!1,u=!1,p=0,c=null,h=l.Easing.Linear.None,g=l.Interpolation.Linear,f=[],y=null,m=!1,_=null,x=null,b=null,v;this.to=function(e,t){return o=e,void 0!==t&&(a=t),this},this.start=function(e){for(var a in l.add(this),d=!0,m=!1,c=void 0===e?l.now():e,c+=p,o){if(o[a]instanceof Array){if(0===o[a].length)continue;o[a]=[t[a]].concat(o[a])}void 0!==t[a]&&(r[a]=t[a],!1==r[a]instanceof Array&&(r[a]*=1),n[a]=r[a]||0)}return this},this.stop=function(){return d?(l.remove(this),d=!1,null!=b&&b.call(t,t),this.stopChainedTweens(),this):this},this.end=function(){return this.update(c+a),this},this.stopChainedTweens=function(){for(var e=0,t=f.length;e<t;e++)f[e].stop()},this.delay=function(e){return p=e,this},this.repeat=function(e){return s=e,this},this.repeatDelay=function(e){return v=e,this},this.yoyo=function(e){return i=e,this},this.easing=function(e){return h=e,this},this.interpolation=function(e){return g=e,this},this.chain=function(){return f=arguments,this},this.onStart=function(e){return y=e,this},this.onUpdate=function(e){return _=e,this},this.onComplete=function(e){return x=e,this},this.onStop=function(e){return b=e,this},this.update=function(e){var d,l,b;if(e<c)return!0;for(d in!1==m&&(null!==y&&y.call(t,t),m=!0),l=(e-c)/a,l=1<l?1:l,b=h(l),o)if(void 0!==r[d]){var T=r[d]||0,S=o[d];S instanceof Array?t[d]=g(S,b):('string'==typeof S&&('+'===S.charAt(0)||'-'===S.charAt(0)?S=T+parseFloat(S):S=parseFloat(S)),'number'==typeof S&&(t[d]=T+(S-T)*b))}if(null!==_&&_.call(t,b),1===l){if(0<s){for(d in isFinite(s)&&s--,n){if('string'==typeof o[d]&&(n[d]+=parseFloat(o[d])),i){var E=n[d];n[d]=o[d],o[d]=E}r[d]=n[d]}return i&&(u=!u),c=void 0===v?e+p:e+v,!0}null!==x&&x.call(t,t);for(var P=0,C=f.length;P<C;P++)f[P].start(c+a);return!1}return!0}},l.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?0.5*e*e:-0.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?0.5*e*e*e:0.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?0.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?0.5*e*e*e*e*e:0.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-i(e*d/2)},Out:function(e){return a(e*d/2)},InOut:function(e){return 0.5*(1-i(d*e))}},Exponential:{In:function(e){return 0===e?0:s(1024,e-1)},Out:function(e){return 1===e?1:1-s(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?0.5*s(1024,e-1):0.5*(-s(2,-10*(e-1))+2)}},Circular:{In:function(e){return 1-o(1-e*e)},Out:function(e){return o(1- --e*e)},InOut:function(e){return 1>(e*=2)?-0.5*(o(1-e*e)-1):0.5*(o(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-s(2,10*(e-1))*a(5*(e-1.1)*d)},Out:function(e){return 0===e?0:1===e?1:s(2,-10*e)*a(5*(e-0.1)*d)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2,1>e?-0.5*s(2,10*(e-1))*a(5*(e-1.1)*d):0.5*s(2,-10*(e-1))*a(5*(e-1.1)*d)+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=1.525*1.70158;return 1>(e*=2)?0.5*(e*e*((t+1)*e-t)):0.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-l.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+0.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+0.9375:7.5625*(e-=2.625/2.75)*e+0.984375},InOut:function(e){return 0.5>e?0.5*l.Easing.Bounce.In(2*e):0.5*l.Easing.Bounce.Out(2*e-1)+0.5}}},l.Interpolation={Linear:function(e,t){var r=e.length-1,o=r*t,a=n(o),i=l.Interpolation.Utils.Linear;return 0>t?i(e[0],e[1],o):1<t?i(e[r],e[r-1],r-o):i(e[a],e[a+1>r?r:a+1],o-a)},Bezier:function(e,t){for(var r=0,o=e.length-1,n=s,a=l.Interpolation.Utils.Bernstein,d=0;d<=o;d++)r+=n(1-t,o-d)*n(t,d)*e[d]*a(o,d);return r},CatmullRom:function(e,t){var r=e.length-1,o=r*t,a=n(o),i=l.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(0>t&&(a=n(o=r*(1+t))),i(e[(a-1+r)%r],e[a],e[(a+1)%r],e[(a+2)%r],o-a)):0>t?e[0]-(i(e[0],e[0],e[1],e[1],-o)-e[0]):1<t?e[r]-(i(e[r],e[r],e[r-1],e[r-1],o-r)-e[r]):i(e[a?a-1:0],e[a],e[r<a+1?r:a+1],e[r<a+2?r:a+2],o-a)},Utils:{Linear:function(e,r,o){return(r-e)*o+e},Bernstein:function(e,t){var r=l.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var r=1;if(e[t])return e[t];for(var o=t;1<o;o--)r*=o;return e[t]=r,r}}(),CatmullRom:function(e,r,o,n,a){var t=0.5*(o-e),i=0.5*(n-r),s=a*a;return(2*r-2*o+t+i)*(a*s)+(-3*r+3*o-2*t-i)*s+t*a+r}}},function(r){u=[],p=function(){return l}.apply(t,u),!(p!==void 0&&(e.exports=p))}(this)}).call(t,r(90))},function(e){e.exports=class{constructor(e,t,r){this.ai=e,this.ship=e.ship,this.target=e.target,this.game=e.game,this.name=t,this.held=0,this.maxTime=r,this.done=!1}update(e){this.held+=e,this.held>=this.maxTime&&(this.done=!0)}destroy(){}}},function(e,t,r){var o=Math.PI;const n=r(5),a=o,i=2*o;e.exports=class{constructor(e,t,r,o){this.game=e,this.body=t,this.type=o||'THING',this.destroyed=!1,this.body.thing=this,this.sprite=r,this.game.stage.addChild(this.sprite),n.World.add(this.game.engine.world,[t])}update(){this.destroyed||(this.body.angle>a?n.Body.setAngle(this.body,this.body.angle-i):this.body.angle<-a&&n.Body.setAngle(this.body,this.body.angle+i),this.body.position.x>this.game.width?n.Body.setPosition(this.body,n.Vector.create(this.body.position.x-this.game.width,this.body.position.y)):0>this.body.position.x&&n.Body.setPosition(this.body,n.Vector.create(this.game.width+this.body.position.x,this.body.position.y)),this.body.position.y>this.game.height?n.Body.setPosition(this.body,n.Vector.create(this.body.position.x,this.body.position.y-this.game.height)):0>this.body.position.y&&n.Body.setPosition(this.body,n.Vector.create(this.body.position.x,this.game.height+this.body.position.y)),this.sprite.position.set(this.body.position.x,this.body.position.y),this.sprite.rotation=this.body.angle)}destruct(){n.World.remove(this.game.engine.world,[this.body]),this.game.stage.removeChild(this.sprite),this.destroyed=!0}damage(){}collide(){}}},function(e,t){'use strict';'use restrict';function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var o=32;t.INT_BITS=o,t.INT_MAX=2147483647,t.INT_MIN=-1<<o-1,t.sign=function(e){return(0<e)-(0>e)},t.abs=function(e){var t=e>>o-1;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1)&&!!e},t.log2=function(e){var t,r;return t=(65535<e)<<4,e>>>=t,r=(255<e)<<3,e>>>=r,t|=r,r=(15<e)<<2,e>>>=r,t|=r,r=(3<e)<<1,e>>>=r,t|=r,t|e>>1},t.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},t.popCount=function(e){return e-=1431655765&e>>>1,e=(858993459&e)+(858993459&e>>>2),16843009*(252645135&e+(e>>>4))>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,1&27030>>>e};var n=Array(256);(function(e){for(var t=0;256>t;++t){var o=t,n=t,r=7;for(o>>>=1;o;o>>>=1)n<<=1,n|=1&o,--r;e[t]=255&n<<r}})(n),t.reverse=function(e){return n[255&e]<<24|n[255&e>>>8]<<16|n[255&e>>>16]<<8|n[255&e>>>24]},t.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},t.deinterleave2=function(e,t){return e=1431655765&e>>>t,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},t.interleave3=function(e,t,r){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),e|r<<2},t.deinterleave3=function(e,t){return e=1227133513&e>>>t,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},t.nextCombination=function(e){var o=e|e-1;return o+1|(~o&-~o)-1>>>r(e)+1}},function(e,t){var r,o,n;/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */(function(a){var i=/iPhone/i,s=/iPod/i,d=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,u=/Android/i,p=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,c=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,h=/Windows Phone/i,g=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,f=/BlackBerry/i,y=/BB10/i,m=/Opera Mini/i,_=/(CriOS|Chrome)(?=.*\bMobile\b)/i,x=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,v=function(e,t){return e.test(t)},T=function(e){var t=e||navigator.userAgent,r=t.split('[FBAN');if('undefined'!=typeof r[1]&&(t=r[0]),r=t.split('Twitter'),'undefined'!=typeof r[1]&&(t=r[0]),this.apple={phone:v(i,t),ipod:v(s,t),tablet:!v(i,t)&&v(d,t),device:v(i,t)||v(s,t)||v(d,t)},this.amazon={phone:v(p,t),tablet:!v(p,t)&&v(c,t),device:v(p,t)||v(c,t)},this.android={phone:v(p,t)||v(l,t),tablet:!v(p,t)&&!v(l,t)&&(v(c,t)||v(u,t)),device:v(p,t)||v(c,t)||v(l,t)||v(u,t)},this.windows={phone:v(h,t),tablet:v(g,t),device:v(h,t)||v(g,t)},this.other={blackberry:v(f,t),blackberry10:v(y,t),opera:v(m,t),firefox:v(x,t),chrome:v(_,t),device:v(f,t)||v(y,t)||v(m,t)||v(x,t)||v(_,t)},this.seven_inch=v(b,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,'undefined'==typeof window)return this},S=function(){var e=new T;return e.Class=T,e};'undefined'!=typeof e&&e.exports&&'undefined'==typeof window?e.exports=T:'undefined'!=typeof e&&e.exports&&'undefined'!=typeof window?e.exports=S():(o=[],r=a.isMobile=S(),n='function'==typeof r?r.apply(t,o):r,!(n!==void 0&&(e.exports=n)))})(this)},function(e){var t=null,r={FLOAT:'float',FLOAT_VEC2:'vec2',FLOAT_VEC3:'vec3',FLOAT_VEC4:'vec4',INT:'int',INT_VEC2:'ivec2',INT_VEC3:'ivec3',INT_VEC4:'ivec4',BOOL:'bool',BOOL_VEC2:'bvec2',BOOL_VEC3:'bvec3',BOOL_VEC4:'bvec4',FLOAT_MAT2:'mat2',FLOAT_MAT3:'mat3',FLOAT_MAT4:'mat4',SAMPLER_2D:'sampler2D'};e.exports=function(e,o){if(!t){var n=Object.keys(r);t={};for(var a=0,i;a<n.length;++a)i=n[a],t[e[i]]=r[i]}return t[o]}},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var n=Math.max,a=Math.min;t.__esModule=!0;var i=r(4),s=function(){function e(){o(this,e),this.minX=Infinity,this.minY=Infinity,this.maxX=-Infinity,this.maxY=-Infinity,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=Infinity,this.minY=Infinity,this.maxX=-Infinity,this.maxY=-Infinity},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(e=e||new i.Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=a(this.minX,e.x),this.maxX=n(this.maxX,e.x),this.minY=a(this.minY,e.y),this.maxY=n(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,r=this.minY,o=this.maxX,n=this.maxY,a=e[0],i=e[1];t=a<t?a:t,r=i<r?i:r,o=a>o?a:o,n=i>n?i:n,a=e[2],i=e[3],t=a<t?a:t,r=i<r?i:r,o=a>o?a:o,n=i>n?i:n,a=e[4],i=e[5],t=a<t?a:t,r=i<r?i:r,o=a>o?a:o,n=i>n?i:n,a=e[6],i=e[7],t=a<t?a:t,r=i<r?i:r,o=a>o?a:o,n=i>n?i:n,this.minX=t,this.minY=r,this.maxX=o,this.maxY=n},e.prototype.addFrame=function(e,t,r,o,n){var i=e.worldTransform,s=i.a,a=i.b,l=i.c,u=i.d,d=i.tx,p=i.ty,c=this.minX,h=this.minY,g=this.maxX,f=this.maxY,m=s*t+l*r+d,_=a*t+u*r+p;c=m<c?m:c,h=_<h?_:h,g=m>g?m:g,f=_>f?_:f,m=s*o+l*r+d,_=a*o+u*r+p,c=m<c?m:c,h=_<h?_:h,g=m>g?m:g,f=_>f?_:f,m=s*t+l*n+d,_=a*t+u*n+p,c=m<c?m:c,h=_<h?_:h,g=m>g?m:g,f=_>f?_:f,m=s*o+l*n+d,_=a*o+u*n+p,c=m<c?m:c,h=_<h?_:h,g=m>g?m:g,f=_>f?_:f,this.minX=c,this.minY=h,this.maxX=g,this.maxY=f},e.prototype.addVertices=function(e,t,r,o){for(var n=e.worldTransform,s=n.a,a=n.b,l=n.c,u=n.d,d=n.tx,p=n.ty,c=this.minX,h=this.minY,g=this.maxX,f=this.maxY,m=r;m<o;m+=2){var i=t[m],_=t[m+1],b=s*i+l*_+d,x=u*_+a*i+p;c=b<c?b:c,h=x<h?x:h,g=b>g?b:g,f=x>f?x:f}this.minX=c,this.minY=h,this.maxX=g,this.maxY=f},e.prototype.addBounds=function(e){var t=this.minX,r=this.minY,o=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>o?e.maxX:o,this.maxY=e.maxY>n?e.maxY:n},e.prototype.addBoundsMask=function(e,t){var r=e.minX>t.minX?e.minX:t.minX,o=e.minY>t.minY?e.minY:t.minY,n=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=n&&o<=a){var i=this.minX,s=this.minY,d=this.maxX,l=this.maxY;this.minX=r<i?r:i,this.minY=o<s?o:s,this.maxX=n>d?n:d,this.maxY=a>l?a:l}},e.prototype.addBoundsArea=function(e,t){var r=e.minX>t.x?e.minX:t.x,o=e.minY>t.y?e.minY:t.y,n=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=n&&o<=a){var i=this.minX,s=this.minY,d=this.maxX,l=this.maxY;this.minX=r<i?r:i,this.minY=o<s?o:s,this.maxX=n>d?n:d,this.maxY=a>l?a:l}},e}();t.default=s},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(4),a=function(){function e(){o(this,e),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,r=this.worldTransform,o=this.localTransform;r.a=o.a*t.a+o.b*t.c,r.b=o.a*t.b+o.b*t.d,r.c=o.c*t.a+o.d*t.c,r.d=o.c*t.b+o.d*t.d,r.tx=o.tx*t.a+o.ty*t.c+t.tx,r.ty=o.tx*t.b+o.ty*t.d+t.ty,this._worldID++},e}();t.default=a,a.prototype.updateWorldTransform=a.prototype.updateTransform,a.IDENTITY=new a},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var n=Math.atan2,i=Math.sqrt,s=Math.sin,l=Math.cos,u=Math.PI;t.__esModule=!0;var a=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(32),p=function(e){return e&&e.__esModule?e:{default:e}}(d),c=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;o(this,e),this.a=t,this.b=r,this.c=n,this.d=a,this.tx=i,this.ty=s,this.array=null}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,r,o,n,a){return this.a=e,this.b=t,this.c=r,this.d=o,this.tx=n,this.ty=a,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},e.prototype.apply=function(e,t){t=t||new p.default;var r=e.x,o=e.y;return t.x=this.a*r+this.c*o+this.tx,t.y=this.b*r+this.d*o+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new p.default;var r=1/(this.a*this.d+this.c*-this.b),o=e.x,n=e.y;return t.x=this.d*r*o+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*n+-this.b*r*o+(-this.ty*this.a+this.tx*this.b)*r,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=l(e),r=s(e),o=this.a,n=this.c,a=this.tx;return this.a=o*t-this.b*r,this.b=o*r+this.b*t,this.c=n*t-this.d*r,this.d=n*r+this.d*t,this.tx=a*t-this.ty*r,this.ty=a*r+this.ty*t,this},e.prototype.append=function(e){var t=this.a,r=this.b,o=this.c,n=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*r+e.b*n,this.c=e.c*t+e.d*o,this.d=e.c*r+e.d*n,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*r+e.ty*n+this.ty,this},e.prototype.setTransform=function(e,t,r,o,n,i,u,p,h){var g=s(u),f=l(u),y=l(h),m=s(h),_=-s(p),x=l(p),v=f*n,a=g*n,b=-g*i,c=f*i;return this.a=y*v+m*b,this.b=y*a+m*c,this.c=_*v+x*b,this.d=_*a+x*c,this.tx=e+(r*v+o*b),this.ty=t+(r*a+o*c),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,o=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,r=this.b,o=this.c,a=this.d,s=-n(-o,a),d=n(r,t),l=Math.abs(s+d);return 1e-5>l?(e.rotation=d,0>t&&0<=a&&(e.rotation+=0>=e.rotation?u:-u),e.skew.x=e.skew.y=0):(e.skew.x=s,e.skew.y=d),e.scale.x=i(t*t+r*r),e.scale.y=i(o*o+a*a),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,r=this.c,o=this.d,a=this.tx,i=e*o-t*r;return this.a=o/i,this.b=-t/i,this.c=-r/i,this.d=e/i,this.tx=(r*this.ty-o*a)/i,this.ty=-(e*this.ty-t*a)/i,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},a(e,null,[{key:'IDENTITY',get:function(){return new e}},{key:'TEMP_MATRIX',get:function(){return new e}}]),e}();t.default=c},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.x=t,this.y=o}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){this.set(e.x,e.y)},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){this.x=e||0,this.y=t||(0===t?0:this.x)},e}();t.default=o},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var n=Math.max,a=Math.min;t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(1),d=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;o(this,e),this.x=t,this.y=r,this.width=n,this.height=a,this.type=s.SHAPES.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.contains=function(e,t){return 0>=this.width||0>=this.height?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.pad=function(e,t){e=e||0,t=t||(0===t?0:e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},e.prototype.fit=function(e){this.x<e.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,0>this.width&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,0>this.height&&(this.height=0))},e.prototype.enlarge=function(e){var t=a(this.x,e.x),r=n(this.x+this.width,e.x+e.width),o=a(this.y,e.y),i=n(this.y+this.height,e.y+e.height);this.x=t,this.width=r-t,this.y=o,this.height=i-o},i(e,[{key:'left',get:function(){return this.x}},{key:'right',get:function(){return this.x+this.width}},{key:'top',get:function(){return this.y}},{key:'bottom',get:function(){return this.y+this.height}}],[{key:'EMPTY',get:function(){return new e(0,0,0,0)}}]),e}();t.default=d},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.abs;t.__esModule=!0;var d=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(4),u=r(2),p=r(1),c=r(10),h=o(c),g=r(13),f=o(g),y=new l.Point,m=function(e){function t(r){n(this,t);var o=a(this,e.call(this));return o._anchor=new l.ObservablePoint(o._onAnchorUpdate,o),o._texture=null,o._width=0,o._height=0,o._tint=null,o._tintRGB=null,o.tint=16777215,o.blendMode=p.BLEND_MODES.NORMAL,o.shader=null,o.cachedTint=16777215,o.texture=r||h.default.EMPTY,o.vertexData=new Float32Array(8),o.vertexTrimmedData=null,o._transformID=-1,o._textureID=-1,o._transformTrimmedID=-1,o._textureTrimmedID=-1,o.pluginName='sprite',o}return i(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,u.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,u.sign)(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,r=t.a,o=t.b,n=t.c,a=t.d,i=t.tx,s=t.ty,d=this.vertexData,l=e.trim,u=e.orig,p=this._anchor,c=0,h=0,g=0,f=0;l?(h=l.x-p._x*u.width,c=h+l.width,f=l.y-p._y*u.height,g=f+l.height):(h=-p._x*u.width,c=h+u.width,f=-p._y*u.height,g=f+u.height),d[0]=r*h+n*f+i,d[1]=a*f+o*h+s,d[2]=r*c+n*f+i,d[3]=a*f+o*c+s,d[4]=r*c+n*g+i,d[5]=a*g+o*c+s,d[6]=r*h+n*g+i,d[7]=a*g+o*h+s}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,o=this._anchor,n=this.transform.worldTransform,i=n.a,a=n.b,s=n.c,l=n.d,d=n.tx,u=n.ty,p=-o._x*r.width,c=p+r.width,h=-o._y*r.height,g=h+r.height;t[0]=i*p+s*h+d,t[1]=l*h+a*p+u,t[2]=i*c+s*h+d,t[3]=l*h+a*c+u,t[4]=i*c+s*g+d,t[5]=l*g+a*c+u,t[6]=i*p+s*g+d,t[7]=l*g+a*p+u},t.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;e&&(e.width!==t.width||e.height!==t.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),t||(!this._localBoundsRect&&(this._localBoundsRect=new l.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,y);var t=this._texture.orig.width,r=this._texture.orig.height,o=-t*this.anchor.x,n=0;return y.x>o&&y.x<o+t&&(n=-r*this.anchor.y,y.y>n&&y.y<n+r)},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._anchor=null;var r='boolean'==typeof t?t:t&&t.texture;if(r){var o='boolean'==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!o)}this._texture=null,this.shader=null},t.from=function(e){return new t(h.default.from(e))},t.fromFrame=function(e){var r=u.TextureCache[e];if(!r)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new t(r)},t.fromImage=function(e,r,o){return new t(h.default.fromImage(e,r,o))},d(t,[{key:'width',get:function(){return s(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,u.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:'height',get:function(){return s(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,u.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:'anchor',get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:'tint',get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:'texture',get:function(){return this._texture},set:function(e){this._texture===e||(this._texture=e,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once('update',this._onTextureUpdate,this)))}}]),t}(f.default);t.default=m},function(e,t,r){'use strict';var o=Math.ceil,n=Math.min;t.__esModule=!0;var a=r(2),i=r(68),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d={getTintedTexture:function(e,t){var r=e._texture;t=d.roundColor(t);var o='#'+('00000'+(0|t).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var n=r.tintCache[o],a;if(n){if(n.tintId===r._updateID)return r.tintCache[o];a=r.tintCache[o]}else a=d.canvas||document.createElement('canvas');if(d.tintMethod(r,t,a),a.tintId=r._updateID,d.convertTintToImage){var i=new Image;i.src=a.toDataURL(),r.tintCache[o]=i}else r.tintCache[o]=a,d.canvas=null;return a},tintWithMultiply:function(e,t,r){var n=r.getContext('2d'),a=e._frame.clone(),i=e.baseTexture.resolution;a.x*=i,a.y*=i,a.width*=i,a.height*=i,r.width=o(a.width),r.height=o(a.height),n.fillStyle='#'+('00000'+(0|t).toString(16)).substr(-6),n.fillRect(0,0,a.width,a.height),n.globalCompositeOperation='multiply',n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),n.globalCompositeOperation='destination-atop',n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height)},tintWithOverlay:function(e,t,r){var n=r.getContext('2d'),a=e._frame.clone(),i=e.baseTexture.resolution;a.x*=i,a.y*=i,a.width*=i,a.height*=i,r.width=o(a.width),r.height=o(a.height),n.globalCompositeOperation='copy',n.fillStyle='#'+('00000'+(0|t).toString(16)).substr(-6),n.fillRect(0,0,a.width,a.height),n.globalCompositeOperation='destination-atop',n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height)},tintWithPerPixel:function(e,t,n){var s=n.getContext('2d'),d=e._frame.clone(),l=e.baseTexture.resolution;d.x*=l,d.y*=l,d.width*=l,d.height*=l,n.width=o(d.width),n.height=o(d.height),s.globalCompositeOperation='copy',s.drawImage(e.baseTexture.source,d.x,d.y,d.width,d.height,0,0,d.width,d.height);for(var u=(0,a.hex2rgb)(t),p=u[0],r=u[1],c=u[2],h=s.getImageData(0,0,d.width,d.height),g=h.data,f=0;f<g.length;f+=4)g[f+0]*=p,g[f+1]*=r,g[f+2]*=c;s.putImageData(h,0,0)},roundColor:function(e){var t=d.cacheStepsPerColorChannel,r=(0,a.hex2rgb)(e);return r[0]=n(255,r[0]/t*t),r[1]=n(255,r[1]/t*t),r[2]=n(255,r[2]/t*t),(0,a.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,s.default)(),tintMethod:0};d.tintMethod=d.canUseMultiply?d.tintWithMultiply:d.tintWithPerPixel,t.default=d},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(74),d=o(s),l=r(10),u=o(l),p=function(e){function t(r,o){n(this,t);var i=null;if(!(r instanceof d.default)){var s=arguments[1],l=arguments[2],u=arguments[3],p=arguments[4];console.warn('Please use RenderTexture.create('+s+', '+l+') instead of the ctor directly.'),i=arguments[0],o=null,r=new d.default(s,l,u,p)}var c=a(this,e.call(this,r,o));return c.legacyRenderer=i,c.valid=!0,c._updateUvs(),c}return i(t,e),t.prototype.resize=function(e,t,r){this.valid=0<e&&0<t,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,r,o,n){return new t(new d.default(e,r,o,n))},t}(u.default);t.default=p},function(e,t,r){'use strict';t.__esModule=!0,t.Ticker=t.shared=void 0;var o=r(140),n=function(e){return e&&e.__esModule?e:{default:e}}(o),a=new n.default;a.autoStart=!0,a.destroy=function(){},t.shared=a,t.Ticker=n.default},function(e,t){'use strict';t.__esModule=!0,t.default=function(e){for(var t=6*e,r=new Uint16Array(t),o=0,n=0;o<t;o+=6,n+=4)r[o+0]=n+0,r[o+1]=n+1,r[o+2]=n+2,r[o+3]=n+0,r[o+4]=n+2,r[o+5]=n+3;return r}},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=r(31),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=new i.default,d=function(){function e(t,r){o(this,e),this._texture=t,this.mapCoord=new i.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin='undefined'==typeof r?0.5:r}return e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,o=0;o<e.length;o+=2){var n=e[o],a=e[o+1];t[o]=n*r.a+a*r.c+r.tx,t[o+1]=n*r.b+a*r.d+r.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var o=t.orig,n=t.trim;n&&(s.set(o.width/n.width,0,0,o.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(s));var a=t.baseTexture,i=this.uClampFrame,d=this.clampMargin/a.resolution,l=this.clampOffset;return i[0]=(t._frame.x+d+l)/a.width,i[1]=(t._frame.y+d+l)/a.height,i[2]=(t._frame.x+t._frame.width-d+l)/a.width,i[3]=(t._frame.y+t._frame.height-d+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,!0},n(e,[{key:'texture',get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),e}();t.default=d},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){var r=!1;if(e&&e._textures&&e._textures.length)for(var o=0;o<e._textures.length;o++)if(e._textures[o]instanceof c.Texture){var n=e._textures[o].baseTexture;-1===t.indexOf(n)&&(t.push(n),r=!0)}return r}function a(e,t){return!!(e instanceof c.BaseTexture)&&(-1===t.indexOf(e)&&t.push(e),!0)}function i(e,t){if(e._texture&&e._texture instanceof c.Texture){var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function s(e,t){return!!(t instanceof c.Text)&&(t.updateText(!0),!0)}function d(e,t){if(t instanceof c.TextStyle){var r=t.toFontString();return c.TextMetrics.measureFont(r),!0}return!1}function l(e,t){if(e instanceof c.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var r=e._texture.baseTexture;return-1===t.indexOf(r)&&t.push(r),!0}return!1}function u(e,t){return!!(e instanceof c.TextStyle)&&(-1===t.indexOf(e)&&t.push(e),!0)}t.__esModule=!0;var p=r(0),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(p),h=r(89),g=function(e){return e&&e.__esModule?e:{default:e}}(h),f=c.ticker.shared;c.settings.UPLOADS_PER_FRAME=4;var y=function(){function e(t){var r=this;o(this,e),this.limiter=new g.default(c.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(l),this.registerFindHook(u),this.registerFindHook(n),this.registerFindHook(a),this.registerFindHook(i),this.registerUploadHook(s),this.registerUploadHook(d)}return e.prototype.upload=function(e,t){'function'==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),!this.ticking&&(this.ticking=!0,f.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var r=0,o=this.uploadHooks.length;r<o;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(!this.queue.length){this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var a=0,i=n.length;a<i;a++)n[a]()}else f.addOnce(this.tick,this,c.UPDATE_PRIORITY.UTILITY)},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof c.Container)for(var o=e.children.length-1;0<=o;o--)this.add(e.children[o]);return this},e.prototype.destroy=function(){this.ticking&&f.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();t.default=y},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(){}function i(e,t,r){t&&0===t.indexOf('.')&&(t=t.substring(1));t&&(e[t]=r)}function s(e){return e.toString().replace('object ','')}t.__esModule=!0;var d=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(47),u=o(l),p=r(46),c=o(p),h=!(!window.XDomainRequest||'withCredentials'in new XMLHttpRequest),g=null,f=200,y=function(){function e(t,r,o){if(n(this,e),'string'!=typeof t||'string'!=typeof r)throw new Error('Both name and url are required for constructing a resource.');o=o||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===r.indexOf('data:')),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===o.crossOrigin?'anonymous':o.crossOrigin,this.loadType=o.loadType||this._determineLoadType(),this.xhrType=o.xhrType,this.metadata=o.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=a,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new c.default,this.onProgress=new c.default,this.onComplete=new c.default,this.onAfterMiddleware=new c.default}return e.setExtensionLoadType=function(t,r){i(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){i(e._xhrTypeMap,t,r)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener('error',this._boundOnError,!1),this.data.removeEventListener('load',this._boundComplete,!1),this.data.removeEventListener('progress',this._boundOnProgress,!1),this.data.removeEventListener('canplaythrough',this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener('error',this._boundXhrOnError,!1),this.xhr.removeEventListener('abort',this._boundXhrOnAbort,!1),this.xhr.removeEventListener('progress',this._boundOnProgress,!1),this.xhr.removeEventListener('load',this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error('Complete called again for an already completed resource.');this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(r)},1));switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||'string'!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement('image');break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement('audio');break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement('video');break;case e.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr();}}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.data=this.metadata.loadElement?this.metadata.loadElement:'image'===e&&'undefined'!=typeof window.Image?new Image:document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener('error',this._boundOnError,!1),this.data.addEventListener('load',this._boundComplete,!1),this.data.addEventListener('progress',this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.data=this.metadata.loadElement?this.metadata.loadElement:'audio'===e&&'undefined'!=typeof window.Audio?new Audio:document.createElement(e),null===this.data)return void this.abort('Unsupported element: '+e);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this.data.addEventListener('error',this._boundOnError,!1),this.data.addEventListener('load',this._boundComplete,!1),this.data.addEventListener('progress',this._boundOnProgress,!1),this.data.addEventListener('canplaythrough',this._boundComplete,!1),this.data.load()},e.prototype._loadXhr=function(){'string'!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open('GET',this.url,!0),t.responseType=this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?e.XHR_RESPONSE_TYPE.TEXT:this.xhrType,t.addEventListener('error',this._boundXhrOnError,!1),t.addEventListener('abort',this._boundXhrOnAbort,!1),t.addEventListener('progress',this._boundOnProgress,!1),t.addEventListener('load',this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){'string'!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open('GET',this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,r){r||(r=e+'/'+t.substr(t.lastIndexOf('.')+1));var o=document.createElement('source');return o.src=t,o.type=r,o},e.prototype._onError=function(e){this.abort('Failed to load element using: '+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(s(e)+' Request failed. Status: '+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+' Request was aborted by the user.')},e.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+' Request timed out.')},e.prototype._xhrOnLoad=function(){var t=this.xhr,r='',o='undefined'==typeof t.status?f:t.status;(''===t.responseType||'text'===t.responseType||'undefined'==typeof t.responseType)&&(r=t.responseText),o===0&&0<r.length?o=f:o===1223&&(o=204);var n=0|o/100;if(n!=2)return void this.abort('['+t.status+'] '+t.statusText+': '+t.responseURL);if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(t){return void this.abort('Error trying to parse loaded json: '+t)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(r,'text/xml')}else{var i=document.createElement('div');i.innerHTML=r,this.data=i}this.type=e.TYPE.XML}catch(t){return void this.abort('Error trying to parse loaded xml: '+t)}else this.data=t.response||r;this.complete()},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf('data:'))return'';t=t||window.location,g||(g=document.createElement('a')),g.href=e,e=(0,u.default)(g.href,{strictMode:!0});var r=!e.port&&''===t.port||e.port===t.port,o=e.protocol?e.protocol+':':'';return e.host===t.hostname&&r&&o===t.protocol?'':'anonymous'},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t='';if(this.isDataUrl){var r=e.indexOf('/');t=e.substring(r+1,e.indexOf(';',r))}else{var o=e.indexOf('?');-1!==o&&(e=e.substring(0,o)),t=e.substring(e.lastIndexOf('.')+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return'application/octet-binary';case e.XHR_RESPONSE_TYPE.BLOB:return'application/blob';case e.XHR_RESPONSE_TYPE.DOCUMENT:return'application/xml';case e.XHR_RESPONSE_TYPE.JSON:return'application/json';case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return'text/plain';}},d(e,[{key:'isDataUrl',get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:'isComplete',get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:'isLoading',get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();t.default=y,y.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},y.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},y.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},y.XHR_RESPONSE_TYPE={DEFAULT:'text',BUFFER:'arraybuffer',BLOB:'blob',DOCUMENT:'document',JSON:'json',TEXT:'text'},y._loadTypeMap={gif:y.LOAD_TYPE.IMAGE,png:y.LOAD_TYPE.IMAGE,bmp:y.LOAD_TYPE.IMAGE,jpg:y.LOAD_TYPE.IMAGE,jpeg:y.LOAD_TYPE.IMAGE,tif:y.LOAD_TYPE.IMAGE,tiff:y.LOAD_TYPE.IMAGE,webp:y.LOAD_TYPE.IMAGE,tga:y.LOAD_TYPE.IMAGE,svg:y.LOAD_TYPE.IMAGE,"svg+xml":y.LOAD_TYPE.IMAGE,mp3:y.LOAD_TYPE.AUDIO,ogg:y.LOAD_TYPE.AUDIO,wav:y.LOAD_TYPE.AUDIO,mp4:y.LOAD_TYPE.VIDEO,webm:y.LOAD_TYPE.VIDEO},y._xhrTypeMap={xhtml:y.XHR_RESPONSE_TYPE.DOCUMENT,html:y.XHR_RESPONSE_TYPE.DOCUMENT,htm:y.XHR_RESPONSE_TYPE.DOCUMENT,xml:y.XHR_RESPONSE_TYPE.DOCUMENT,tmx:y.XHR_RESPONSE_TYPE.DOCUMENT,svg:y.XHR_RESPONSE_TYPE.DOCUMENT,tsx:y.XHR_RESPONSE_TYPE.DOCUMENT,gif:y.XHR_RESPONSE_TYPE.BLOB,png:y.XHR_RESPONSE_TYPE.BLOB,bmp:y.XHR_RESPONSE_TYPE.BLOB,jpg:y.XHR_RESPONSE_TYPE.BLOB,jpeg:y.XHR_RESPONSE_TYPE.BLOB,tif:y.XHR_RESPONSE_TYPE.BLOB,tiff:y.XHR_RESPONSE_TYPE.BLOB,webp:y.XHR_RESPONSE_TYPE.BLOB,tga:y.XHR_RESPONSE_TYPE.BLOB,json:y.XHR_RESPONSE_TYPE.JSON,text:y.XHR_RESPONSE_TYPE.TEXT,txt:y.XHR_RESPONSE_TYPE.TEXT,ttf:y.XHR_RESPONSE_TYPE.BUFFER,otf:y.XHR_RESPONSE_TYPE.BUFFER},y.EMPTY_GIF='data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='},function(e,t,r){const o=r(5),n=r(6);e.exports=class{constructor(e,t,r,o,a){const i=Math.random();Array.isArray(a)&&(a=a[Math.floor(Math.random()*a.length)]),a=a||16777215,this.pos=t,this.vel=r,this.av=i,this.game=e,this.sprite=new n.Graphics,this.sprite.beginFill(a),this.sprite.drawRect(-1.5,-1.5,3,3),this.game.stage.addChild(this.sprite),this.game.particles.push(this),this.life=o||30,this.destroyed=!1}update(e,t){return this.life-=t,0>this.life?this.destroy():void(this.sprite.position.set(this.pos.x,this.pos.y),this.pos=o.Vector.add(this.pos,o.Vector.mult(this.vel,t)))}destroy(){this.destroyed||(this.destroyed=!0,this.sprite.destroy(),this.game.particles.splice(this.game.particles.indexOf(this),1),delete this.game)}}},function(e,t,r){const o=r(6);e.exports=class{constructor(e){this.main=e,this.stage=new o.Container,this.main.app.stage.addChild(this.stage),this.resources=this.main.resources,this.app=this.main.app,this.width=this.main.width,this.height=this.main.height}destroy(){this.stage.destroy()}update(){}up(){}down(){}}},function(e,t,r){const o=r(6);e.exports=class{constructor(e){this.game=e,this.stars=new o.Graphics,this.game.stage.addChild(this.stars),this.stars.lineStyle(1,16777215);for(let t=0;150>t;t++){const e=Math.random()*this.game.width,t=Math.random()*this.game.height;this.stars.beginFill(16777215),this.stars.drawRect(e,t,2,2),this.stars.endFill()}}}},function(e){'use strict';function t(e,t,o){o=o||2;var a=t&&t.length,s=a?t[0]*o:e.length,d=r(e,0,s,o,!0),u=[];if(!d)return u;var p,c,h,g,f,m,y;if(a&&(d=l(e,t,d,o)),e.length>80*o){p=h=e[0],c=g=e[1];for(var _=o;_<s;_+=o)f=e[_],m=e[_+1],f<p&&(p=f),m<c&&(c=m),f>h&&(h=f),m>g&&(g=m);y=Math.max(h-p,g-c)}return n(d,u,o,p,c,y),u}function r(e,t,r,o,n){var a,i;if(n===0<I(e,t,r,o))for(a=t;a<r;a+=o)i=b(a,e[a],e[a+1],i);else for(a=r-o;a>=t;a-=o)i=b(a,e[a],e[a+1],i);return i&&v(i,i.next)&&(w(i),i=i.next),i}function o(e,t){if(!e)return e;t||(t=e);var r=e,o;do if(o=!1,!r.steiner&&(v(r,r.next)||0===x(r.prev,r,r.next))){if(w(r),r=t=r.prev,r===r.next)return null;o=!0}else r=r.next;while(o||r!==t);return t}function n(e,t,r,l,u,p,c){if(e){!c&&p&&h(e,l,u,p);for(var g=e,f,y;e.prev!==e.next;){if(f=e.prev,y=e.next,p?i(e,l,u,p):a(e)){t.push(f.i/r),t.push(e.i/r),t.push(y.i/r),w(e),e=y.next,g=y.next;continue}if(e=y,e===g){c?1===c?(e=s(e,t,r),n(e,t,r,l,u,p,2)):2===c&&d(e,t,r,l,u,p):n(o(e),t,r,l,u,p,1);break}}}}function a(e){var t=e.prev,r=e,o=e.next;if(0<=x(t,r,o))return!1;for(var n=e.next.next;n!==e.prev;){if(_(t.x,t.y,r.x,r.y,o.x,o.y,n.x,n.y)&&0<=x(n.prev,n,n.next))return!1;n=n.next}return!0}function i(e,t,r,o){var n=e.prev,a=e,i=e.next;if(0<=x(n,a,i))return!1;for(var s=n.x<a.x?n.x<i.x?n.x:i.x:a.x<i.x?a.x:i.x,d=n.y<a.y?n.y<i.y?n.y:i.y:a.y<i.y?a.y:i.y,l=n.x>a.x?n.x>i.x?n.x:i.x:a.x>i.x?a.x:i.x,u=n.y>a.y?n.y>i.y?n.y:i.y:a.y>i.y?a.y:i.y,c=f(s,d,t,r,o),h=f(l,u,t,r,o),g=e.nextZ;g&&g.z<=h;){if(g!==e.prev&&g!==e.next&&_(n.x,n.y,a.x,a.y,i.x,i.y,g.x,g.y)&&0<=x(g.prev,g,g.next))return!1;g=g.nextZ}for(g=e.prevZ;g&&g.z>=c;){if(g!==e.prev&&g!==e.next&&_(n.x,n.y,a.x,a.y,i.x,i.y,g.x,g.y)&&0<=x(g.prev,g,g.next))return!1;g=g.prevZ}return!0}function s(e,t,r){var o=e;do{var n=o.prev,a=o.next.next;!v(n,a)&&T(n,o,o.next,a)&&E(n,a)&&E(a,n)&&(t.push(n.i/r),t.push(o.i/r),t.push(a.i/r),w(o),w(o.next),o=e=a),o=o.next}while(o!==e);return o}function d(e,t,r,i,s,d){var l=e;do{for(var a=l.next.next;a!==l.prev;){if(l.i!==a.i&&m(l,a)){var u=C(l,a);return l=o(l,l.next),u=o(u,u.next),n(l,t,r,i,s,d),void n(u,t,r,i,s,d)}a=a.next}l=l.next}while(l!==e)}function l(e,t,n,a){var s=[],d,i,l,c,h;for(d=0,i=t.length;d<i;d++)l=t[d]*a,c=d<i-1?t[d+1]*a:e.length,h=r(e,l,c,a,!1),h===h.next&&(h.steiner=!0),s.push(y(h));for(s.sort(u),d=0;d<s.length;d++)p(s[d],n),n=o(n,n.next);return n}function u(e,t){return e.x-t.x}function p(e,t){if(t=c(e,t),t){var r=C(t,e);o(r,r.next)}}function c(e,t){var r=t,o=e.x,n=e.y,a=-Infinity,i;do{if(n<=r.y&&n>=r.next.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a){if(a=s,s===o){if(n===r.y)return r;if(n===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(o===a)return i.prev;var d=i,l=i.x,u=i.y,p=Infinity,c;for(r=i.next;r!==d;)o>=r.x&&r.x>=l&&_(n<u?o:a,n,l,u,n<u?a:o,n,r.x,r.y)&&(c=M(n-r.y)/(o-r.x),(c<p||c===p&&r.x>i.x)&&E(r,e)&&(i=r,p=c)),r=r.next;return i}function h(e,t,r,o){var n=e;do null===n.z&&(n.z=f(n.x,n.y,t,r,o)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,g(n)}function g(t){var r=1,o,n,a,i,e,s,d,l;do{for(n=t,t=null,e=null,s=0;n;){for(s++,a=n,d=0,o=0;o<r&&(d++,a=a.nextZ,!!a);o++);for(l=r;0<d||0<l&&a;)0===d?(i=a,a=a.nextZ,l--):0!==l&&a?n.z<=a.z?(i=n,n=n.nextZ,d--):(i=a,a=a.nextZ,l--):(i=n,n=n.nextZ,d--),e?e.nextZ=i:t=i,i.prevZ=e,e=i;n=a}e.nextZ=null,r*=2}while(1<s);return t}function f(e,t,r,o,n){return e=32767*(e-r)/n,t=32767*(t-o)/n,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,r=e;do t.x<r.x&&(r=t),t=t.next;while(t!==e);return r}function _(e,t,r,o,n,a,i,s){return 0<=(n-i)*(t-s)-(e-i)*(a-s)&&0<=(e-i)*(o-s)-(r-i)*(t-s)&&0<=(r-i)*(a-s)-(n-i)*(o-s)}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!S(e,t)&&E(e,t)&&E(t,e)&&P(e,t)}function x(e,t,o){return(t.y-e.y)*(o.x-t.x)-(t.x-e.x)*(o.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,r,o){return v(e,t)&&v(r,o)||v(e,o)&&v(r,t)||0<x(e,t,r)!=0<x(e,t,o)&&0<x(r,o,e)!=0<x(r,o,t)}function S(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&T(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function E(e,t){return 0>x(e.prev,e,e.next)?0<=x(e,t,e.next)&&0<=x(e,e.prev,t):0>x(e,t,e.prev)||0>x(e,e.next,t)}function P(e,t){var r=e,o=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next;while(r!==e);return o}function C(e,t){var r=new A(e.i,e.x,e.y),o=new A(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,o.next=r,r.prev=o,a.next=o,o.prev=a,o}function b(e,t,r,o){var n=new A(e,t,r);return o?(n.next=o.next,n.prev=o,o.next.prev=n,o.next=n):(n.prev=n,n.next=n),n}function w(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,r,o){for(var n=0,a=t,i=r-o;a<r;a+=o)n+=(e[i]-e[a])*(e[a+1]+e[i+1]),i=a;return n}var M=Math.abs;e.exports=t,t.deviation=function(e,t,r,o){var n=t&&t.length,s=n?t[0]*r:e.length,d=M(I(e,0,s,r));if(n)for(var l=0,i=t.length;l<i;l++){var u=t[l]*r,p=l<i-1?t[l+1]*r:e.length;d-=M(I(e,u,p,r))}var h=0;for(l=0;l<o.length;l+=3){var g=o[l]*r,a=o[l+1]*r,f=o[l+2]*r;h+=M((e[g]-e[f])*(e[a+1]-e[g+1])-(e[g]-e[a])*(e[f+1]-e[g+1]))}return 0===d&&0===h?0:M((h-d)/d)},t.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},o=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var i=0;i<t;i++)r.vertices.push(e[n][a][i]);0<n&&(o+=e[n-1].length,r.holes.push(o))}return r}},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function o(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}Object.defineProperty(t,'__esModule',{value:!0});var n=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=function(){function e(t,o,n){void 0===o&&(o=!1),r(this,e),this._fn=t,this._once=o,this._thisArg=n,this._next=this._prev=this._owner=null}return n(e,[{key:'detach',value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),e}(),i=function(){function e(){r(this,e),this._head=this._tail=void 0}return n(e,[{key:'handlers',value:function(){var e=0>=arguments.length||void 0===arguments[0]?!1:arguments[0],t=this._head;if(e)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r}},{key:'has',value:function(e){if(!(e instanceof a))throw new Error('MiniSignal#has(): First arg must be a MiniSignalBinding object.');return e._owner===this}},{key:'dispatch',value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:'add',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if('function'!=typeof e)throw new Error('MiniSignal#add(): First arg must be a Function.');return o(this,new a(e,!1,t))}},{key:'once',value:function(e){var t=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if('function'!=typeof e)throw new Error('MiniSignal#once(): First arg must be a Function.');return o(this,new a(e,!0,t))}},{key:'detach',value:function(e){if(!(e instanceof a))throw new Error('MiniSignal#detach(): First arg must be a MiniSignalBinding object.');return e._owner===this?(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this):this}},{key:'detachAll',value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();i.MiniSignalBinding=a,t['default']=i,e.exports=t['default']},function(e){'use strict';e.exports=function(e,t){t=t||{};for(var r={key:['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'],q:{name:'queryKey',parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},o=r.parser[t.strictMode?'strict':'loose'].exec(e),n={},a=14;a--;)n[r.key[a]]=o[a]||'';return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(e,t,o){t&&(n[r.q.name][t]=o)}),n}},function(e){var t=function(e,t,r,o,n){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=o||e.RGBA,this.type=n||e.UNSIGNED_BYTE};t.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,o=e.videoHeight||e.height;o!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=o};var r=!1;t.prototype.uploadData=function(e,t,o){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!r){var a=n.getExtension('OES_texture_float');if(a)r=!0;else throw new Error('floating point textures not available')}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||o!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,o,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,o,this.format,this.type,e||null),this.width=t,this.height=o},t.prototype.bind=function(e){var t=this.gl;e!==void 0&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},t.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},t.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},t.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},t.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},t.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},t.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},t.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},t.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},t.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},t.prototype.destroy=function(){var e=this.gl;e.deleteTexture(this.texture)},t.fromSource=function(e,r,o){var n=new t(e);return n.premultiplyAlpha=o||!1,n.upload(r),n},t.fromData=function(e,r,o,n){var a=new t(e);return a.uploadData(r,o,n),a},e.exports=t},function(e){e.exports=function(e,t,r){var o;if(r){var n=r.tempAttribState,a=r.attribState;for(o=0;o<n.length;o++)n[o]=!1;for(o=0;o<t.length;o++)n[t[o].attribute.location]=!0;for(o=0;o<a.length;o++)a[o]!==n[o]&&(a[o]=n[o],r.attribState[o]?e.enableVertexAttribArray(o):e.disableVertexAttribArray(o))}else for(o=0;o<t.length;o++){var i=t[o];e.enableVertexAttribArray(i.attribute.location)}}},function(e){var t=function(e,t,r){var o=e.createShader(t);return e.shaderSource(o,r),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(console.log(e.getShaderInfoLog(o)),null)};e.exports=function(e,r,o,n){var a=t(e,e.VERTEX_SHADER,r),s=t(e,e.FRAGMENT_SHADER,o),d=e.createProgram();if(e.attachShader(d,a),e.attachShader(d,s),n)for(var l in n)e.bindAttribLocation(d,n[l],l);return e.linkProgram(d),e.getProgramParameter(d,e.LINK_STATUS)||(console.error('Pixi.js Error: Could not initialize shader.'),console.error('gl.VALIDATE_STATUS',e.getProgramParameter(d,e.VALIDATE_STATUS)),console.error('gl.getError()',e.getError()),''!==e.getProgramInfoLog(d)&&console.warn('Pixi.js Warning: gl.getProgramInfoLog()',e.getProgramInfoLog(d)),e.deleteProgram(d),d=null),e.deleteShader(a),e.deleteShader(s),d}},function(e){var t=function(e){for(var t=Array(e),r=0;r<t.length;r++)t[r]=!1;return t};e.exports=function(e,r){return'float'===e?0:'vec2'===e?new Float32Array(2*r):'vec3'===e?new Float32Array(3*r):'vec4'===e?new Float32Array(4*r):'int'===e||'sampler2D'===e?0:'ivec2'===e?new Int32Array(2*r):'ivec3'===e?new Int32Array(3*r):'ivec4'===e?new Int32Array(4*r):'bool'!=e&&('bvec2'===e?t(2*r):'bvec3'===e?t(3*r):'bvec4'===e?t(4*r):'mat2'===e?new Float32Array([1,0,0,1]):'mat3'===e?new Float32Array([1,0,0,0,1,0,0,0,1]):'mat4'===e?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},function(e,t,r){var o=r(28),n=r(55),a=function(e,t,r,o){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,o||0)};e.exports=function(e,t){for(var r={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),d=0;d<s;d++){var i=e.getActiveAttrib(t,d),l=o(e,i.type);r[i.name]={type:l,size:n(l),location:e.getAttribLocation(t,i.name),pointer:a}}return r}},function(e,t,r){var o=r(28),n=r(51);e.exports=function(e,t){for(var r={},a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<a;s++){var i=e.getActiveUniform(t,s),d=i.name.replace(/\[.*?\]/,''),l=o(e,i.type);r[d]={type:l,size:i.size,location:e.getUniformLocation(t,d),value:n(l,i.size)}}return r}},function(e){var t=function(e){var t='return this.data.%%.value;'.replace('%%',e);return new Function(t)},r=function(e,t){var r='this.data.%%.value = value;\nvar location = this.data.%%.location;'.replace(/%%/g,e),o;return o=1===t.size?n[t.type]:a[t.type],o&&(r+='\nthis.gl.'+o+';'),new Function('value',r)},o=function(e,t){for(var r=t,n=0,a;n<e.length-1;n++)a=r[e[n]]||{data:{}},r[e[n]]=a,r=a;return r},n={float:'uniform1f(location, value)',vec2:'uniform2f(location, value[0], value[1])',vec3:'uniform3f(location, value[0], value[1], value[2])',vec4:'uniform4f(location, value[0], value[1], value[2], value[3])',int:'uniform1i(location, value)',ivec2:'uniform2i(location, value[0], value[1])',ivec3:'uniform3i(location, value[0], value[1], value[2])',ivec4:'uniform4i(location, value[0], value[1], value[2], value[3])',bool:'uniform1i(location, value)',bvec2:'uniform2i(location, value[0], value[1])',bvec3:'uniform3i(location, value[0], value[1], value[2])',bvec4:'uniform4i(location, value[0], value[1], value[2], value[3])',mat2:'uniformMatrix2fv(location, false, value)',mat3:'uniformMatrix3fv(location, false, value)',mat4:'uniformMatrix4fv(location, false, value)',sampler2D:'uniform1i(location, value)'},a={float:'uniform1fv(location, value)',vec2:'uniform2fv(location, value)',vec3:'uniform3fv(location, value)',vec4:'uniform4fv(location, value)',int:'uniform1iv(location, value)',ivec2:'uniform2iv(location, value)',ivec3:'uniform3iv(location, value)',ivec4:'uniform4iv(location, value)',bool:'uniform1iv(location, value)',bvec2:'uniform2iv(location, value)',bvec3:'uniform3iv(location, value)',bvec4:'uniform4iv(location, value)',sampler2D:'uniform1iv(location, value)'};e.exports=function(e,n){for(var a={data:{},gl:e},s=Object.keys(n),d=0;d<s.length;d++){var i=s[d],l=i.split('.'),u=l[l.length-1],p=o(l,a),c=n[i];p.data[u]=c,p.gl=e,Object.defineProperty(p,u,{get:t(u),set:r(u,c)})}return a}},function(e){var t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(e){return t[e]}},function(e){e.exports=function(e,t){return'precision'===e.substring(0,9)?e:'precision '+t+' float;\n'+e}},function(e,t){'use strict';t.__esModule=!0,t.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=r(59),s=r(13),d=o(s),l=r(37),u=r(3),p=o(u),c=r(1),h=function(){function e(t,r,o,a,s){n(this,e),'number'==typeof t&&(t=Object.assign({width:t,height:r||p.default.RENDER_OPTIONS.height,forceCanvas:!!a,sharedTicker:!!s},o)),this._options=t=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,i.autoDetectRenderer)(t),this.stage=new d.default,this._ticker=null,this.ticker=t.sharedTicker?l.shared:new l.Ticker,this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e){var t=this._ticker;this.ticker=null,t.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},a(e,[{key:'ticker',set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,c.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:'view',get:function(){return this.renderer.view}},{key:'screen',get:function(){return this.renderer.screen}}]),e}();t.default=h},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.autoDetectRenderer=function(e,t,r,o){var n=e&&e.forceCanvas;return void 0!==o&&(n=o),!n&&a.isWebGLSupported()?new l.default(e,t,r):new s.default(e,t,r)};var n=r(2),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),i=r(14),s=o(i),d=r(20),l=o(d)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(9),l=o(d),u=r(1),p=r(3),c=o(p),h=r(62),g=o(h),f=r(61),y=o(f),m=r(29),_=o(m),x=r(4),b=function(e){function t(){n(this,t);var r=a(this,e.call(this)),o=c.default.TRANSFORM_MODE===u.TRANSFORM_MODE.STATIC?g.default:y.default;return r.tempDisplayObjectParent=null,r.transform=new o,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new _.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return i(t,e),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(!this._boundsRect&&(this._boundsRect=new x.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(!this._localBoundsRect&&(this._localBoundsRect=new x.Rectangle),e=this._localBoundsRect);var o=this.getBounds(!1,e);return this.parent=r,this.transform=t,o},t.prototype.toGlobal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,r,o){return t&&(e=t.toGlobal(e,r,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)},t.prototype.renderWebGL=function(){},t.prototype.renderCanvas=function(){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error('setParent: Argument must be a Container');return e.addChild(this),e},t.prototype.setTransform=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,i=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,d=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r?r:1,this.scale.y=o?o:1,this.rotation=n,this.skew.x=a,this.skew.y=i,this.pivot.x=s,this.pivot.y=d,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},s(t,[{key:'_tempDisplayObjectParent',get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:'x',get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:'y',get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:'worldTransform',get:function(){return this.transform.worldTransform}},{key:'localTransform',get:function(){return this.transform.localTransform}},{key:'position',get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:'scale',get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:'pivot',get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:'skew',get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:'rotation',get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:'worldVisible',get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:'mask',get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},{key:'filters',get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(l.default);t.default=b,b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Math.sin,s=Math.cos;t.__esModule=!0;var d=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(4),u=r(30),p=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){o(this,t);var r=n(this,e.call(this));return r.position=new l.Point(0,0),r.scale=new l.Point(1,1),r.skew=new l.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new l.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return a(t,e),t.prototype.updateSkew=function(){this._cx=s(this._rotation+this.skew._y),this._sx=i(this._rotation+this.skew._y),this._cy=-i(this._rotation-this.skew._x),this._sy=s(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var r=e.worldTransform,o=this.worldTransform;o.a=t.a*r.a+t.b*r.c,o.b=t.a*r.b+t.b*r.d,o.c=t.c*r.a+t.d*r.c,o.d=t.c*r.b+t.d*r.d,o.tx=t.tx*r.a+t.ty*r.c+r.tx,o.ty=t.tx*r.b+t.ty*r.d+r.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},d(t,[{key:'rotation',get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(p.default);t.default=c},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Math.sin,s=Math.cos;t.__esModule=!0;var d=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(4),u=r(30),p=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e){function t(){o(this,t);var r=n(this,e.call(this));return r.position=new l.ObservablePoint(r.onChange,r,0,0),r.scale=new l.ObservablePoint(r.onChange,r,1,1),r.pivot=new l.ObservablePoint(r.onChange,r,0,0),r.skew=new l.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localID=0,r._currentLocalID=0,r}return a(t,e),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=s(this._rotation+this.skew._y),this._sx=i(this._rotation+this.skew._y),this._cy=-i(this._rotation-this.skew._x),this._sy=s(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,o=this.worldTransform;o.a=t.a*r.a+t.b*r.c,o.b=t.a*r.b+t.b*r.d,o.c=t.c*r.a+t.d*r.c,o.d=t.c*r.b+t.d*r.d,o.tx=t.tx*r.a+t.ty*r.c+r.tx,o.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},d(t,[{key:'rotation',get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(p.default);t.default=c},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(t,o,n,a,i,s,d,l){r(this,e),this.lineWidth=t,this.nativeLines=d,this.lineColor=o,this.lineAlpha=n,this._lineTint=o,this.fillColor=a,this.fillAlpha=i,this._fillTint=a,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},e.prototype.addHole=function(e){this.holes.push(e)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();t.default=o},function(e,t,r){'use strict';function o(e){return 0>e?-1:0<e?1:0}var n=Math.abs;t.__esModule=!0;var a=r(31),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],d=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],p=[],c=[];(function(){for(var e=0,t;16>e;e++){t=[],c.push(t);for(var r=0;16>r;r++)for(var n=o(s[e]*s[r]+l[e]*d[r]),a=o(d[e]*s[r]+u[e]*d[r]),h=o(s[e]*l[r]+l[e]*u[r]),g=o(d[e]*l[r]+u[e]*u[r]),f=0;16>f;f++)if(s[f]===n&&d[f]===a&&l[f]===h&&u[f]===g){t.push(f);break}}for(var y=0,m;16>y;y++)m=new i.default,m.set(s[y],d[y],l[y],u[y],0,0),p.push(m)})();var h={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return s[e]},uY:function(e){return d[e]},vX:function(e){return l[e]},vY:function(e){return u[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return c[e][t]},sub:function(e,t){return c[e][h.inv(t)]},rotate180:function(e){return 4^e},isSwapWidthHeight:function(e){return 2==(3&e)},byDirection:function(e,t){if(2*n(e)<=n(t))return 0<=t?h.S:h.N;return 2*n(t)<=n(e)?0<e?h.E:h.W:0<t?0<e?h.SE:h.SW:0<e?h.NE:h.NW},matrixAppendRotationInv:function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0,n=p[h.inv(t)];n.tx=r,n.ty=o,e.append(n)}};t.default=h},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function(){function e(t,o){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;r(this,e),this._x=n,this._y=a,this.cb=t,this.scope=o}return e.prototype.set=function(e,t){var r=e||0,o=t||(0===t?0:r);(this._x!==r||this._y!==o)&&(this._x=r,this._y=o,this.cb.call(this.scope))},e.prototype.copy=function(e){(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},o(e,[{key:'x',get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:'y',get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}();t.default=n},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(2),l=r(4),u=r(1),p=r(3),c=o(p),h=r(13),g=o(h),f=r(36),y=o(f),m=r(9),_=o(m),x=new l.Matrix,b=function(e){function t(r,o,i,s){n(this,t);var p=a(this,e.call(this));return(0,d.sayHello)(r),'number'==typeof o&&(o=Object.assign({width:o,height:i||c.default.RENDER_OPTIONS.height},s)),o=Object.assign({},c.default.RENDER_OPTIONS,o),p.options=o,p.type=u.RENDERER_TYPE.UNKNOWN,p.screen=new l.Rectangle(0,0,o.width,o.height),p.view=o.view||document.createElement('canvas'),p.resolution=o.resolution||c.default.RESOLUTION,p.transparent=o.transparent,p.autoResize=o.autoResize||!1,p.blendModes=null,p.preserveDrawingBuffer=o.preserveDrawingBuffer,p.clearBeforeRender=o.clearBeforeRender,p.roundPixels=o.roundPixels,p._backgroundColor=0,p._backgroundColorRgba=[0,0,0,0],p._backgroundColorString='#000000',p.backgroundColor=o.backgroundColor||p._backgroundColor,p._tempDisplayObjectParent=new g.default,p._lastObjectRendered=p._tempDisplayObjectParent,p}return i(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+'px',this.view.style.height=t+'px')},t.prototype.generateTexture=function(e,t,r){var o=e.getLocalBounds(),n=y.default.create(0|o.width,0|o.height,t,r);return x.tx=-o.x,x.ty=-o.y,this.render(e,n,!1,x,!0),n},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=u.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},s(t,[{key:'width',get:function(){return this.view.width}},{key:'height',get:function(){return this.view.height}},{key:'backgroundColor',get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,d.hex2string)(e),(0,d.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(_.default);t.default=b},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,r,n){o(this,e),this.canvas=document.createElement('canvas'),this.context=this.canvas.getContext('2d'),this.resolution=n||i.default.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},n(e,[{key:'width',get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:'height',get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),e}();t.default=s},function(e,t){'use strict';function r(e){var t=document.createElement('canvas');t.width=6,t.height=1;var r=t.getContext('2d');return r.fillStyle=e,r.fillRect(0,0,6,1),t}t.__esModule=!0,t.default=function(){if('undefined'==typeof document)return!1;var e=r('#ff00ff'),t=r('#ffff00'),o=document.createElement('canvas');o.width=6,o.height=1;var n=o.getContext('2d');n.globalCompositeOperation='multiply',n.drawImage(e,0,0),n.drawImage(t,2,0);var a=n.getImageData(2,0,1,1);if(!a)return!1;var i=a.data;return 255===i[0]&&0===i[1]&&0===i[2]}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=r(125),s=o(i),d=r(2),l=r(1),u=r(3),p=o(u),c={},h=function(){function e(t,r,o){for(var a in n(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.blendMode=l.BLEND_MODES.NORMAL,this.uniformData=o||(0,s.default)(this.vertexSrc,this.fragmentSrc,'projectionMatrix|uSampler'),this.uniforms={},this.uniformData)this.uniforms[a]=this.uniformData[a].value;this.glShaders={},c[this.vertexSrc+this.fragmentSrc]||(c[this.vertexSrc+this.fragmentSrc]=(0,d.uid)()),this.glShaderKey=c[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=p.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,r,o){e.applyFilter(this,t,r,o)},a(e,null,[{key:'defaultVertexSrc',get:function(){return'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}'}},{key:'defaultFragmentSrc',get:function(){return'varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}'}}]),e}();t.default=h},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(69),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=r(4),l=r(8),u=function(e){function t(r){o(this,t);var a=new d.Matrix,i=n(this,e.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n','varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n'));return r.renderable=!1,i.maskSprite=r,i.maskMatrix=a,i}return a(t,e),t.prototype.apply=function(e,t,r){var o=this.maskSprite;this.uniforms.mask=o._texture,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,o),this.uniforms.alpha=o.worldAlpha,e.applyFilter(this,t,r)},t}(s.default);t.default=u},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=r(7),s=o(a),i=r(38),d=o(i),l=function(){function e(t,r){n(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var o=0;4>o;o++)this.interleaved[4*o]=this.vertices[2*o],this.interleaved[4*o+1]=this.vertices[2*o+1],this.interleaved[4*o+2]=this.uvs[2*o],this.interleaved[4*o+3]=this.uvs[2*o+1];this.indices=(0,d.default)(1),this.vertexBuffer=s.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(t,r)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var r=0,o=0;return this.uvs[0]=r,this.uvs[1]=o,this.uvs[2]=r+t.width/e.width,this.uvs[3]=o,this.uvs[4]=r+t.width/e.width,this.uvs[5]=o+t.height/e.height,this.uvs[6]=r,this.uvs[7]=o+t.height/e.height,r=t.x,o=t.y,this.vertices[0]=r,this.vertices[1]=o,this.vertices[2]=r+t.width,this.vertices[3]=o,this.vertices[4]=r+t.width,this.vertices[5]=o+t.height,this.vertices[6]=r,this.vertices[7]=o+t.height,this},e.prototype.upload=function(){for(var e=0;4>e;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();t.default=l},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var o=Math.ceil,n=Math.max;t.__esModule=!0;var a=function(){function e(t,o,n,a,i,s,d,l,u){r(this,e),this.text=t,this.style=o,this.width=n,this.height=a,this.lines=i,this.lineWidths=s,this.lineHeight=d,this.maxLineWidth=l,this.fontProperties=u}return e.measureText=function(t,r,o){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e._canvas;o=o||r.wordWrap;var s=r.toFontString(),d=e.measureFont(s),l=a.getContext('2d');l.font=s;for(var u=o?e.wordWrap(t,r,a):t,p=u.split(/(?:\r\n|\r|\n)/),c=Array(p.length),h=0,g=0,i;g<p.length;g++)i=l.measureText(p[g]).width+(p[g].length-1)*r.letterSpacing,c[g]=i,h=n(h,i);var f=h+r.strokeThickness;r.dropShadow&&(f+=r.dropShadowDistance);var y=r.lineHeight||d.fontSize+r.strokeThickness,m=n(y,d.fontSize+r.strokeThickness)+(p.length-1)*y;return r.dropShadow&&(m+=r.dropShadowDistance),new e(t,r,f,m,p,c,y,h,d)},e.wordWrap=function(t,r){for(var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e._canvas,n=o.getContext('2d'),a='',s=t.split('\n'),d=r.wordWrapWidth,l={},u=0;u<s.length;u++){for(var i=d,p=s[u].split(' '),h=0,g;h<p.length;h++)if(g=n.measureText(p[h]).width,r.breakWords&&g>d)for(var f=p[h].split(''),y=0;y<f.length;y++){var c=f[y],m=l[c];void 0===m&&(m=n.measureText(c).width,l[c]=m),m>i?(a+='\n'+c,i=d-m):(0===y&&(a+=' '),a+=c,i-=m)}else{var _=g+n.measureText(' ').width;0===h||_>i?(0<h&&(a+='\n'),a+=p[h],i=d-g):(i-=_,a+=' '+p[h])}u<s.length-1&&(a+='\n')}return a},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var r={},n=e._canvas,a=e._context;a.font=t;var s=o(a.measureText('|M\xC9q').width),d=o(a.measureText('M').width),l=2*d;d=0|1.4*d,n.width=s,n.height=l,a.fillStyle='#f00',a.fillRect(0,0,s,l),a.font=t,a.textBaseline='alphabetic',a.fillStyle='#000',a.fillText('|M\xC9q',0,d);var u=a.getImageData(0,0,s,l).data,p=u.length,c=4*s,h=0,i=0,g=!1;for(h=0;h<d;++h){for(var f=0;f<c;f+=4)if(255!==u[i+f]){g=!0;break}if(!g)i+=c;else break}for(r.ascent=d-h,i=p-c,g=!1,h=l;h>d;--h){for(var y=0;y<c;y+=4)if(255!==u[i+y]){g=!0;break}if(!g)i-=c;else break}return r.descent=h-d,r.fontSize=r.ascent+r.descent,e._fonts[t]=r,r},e}();t.default=a;var i=document.createElement('canvas');i.width=i.height=10,a._canvas=i,a._context=i.getContext('2d'),a._fonts={}},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e){return'number'==typeof e?(0,l.hex2string)(e):('string'==typeof e&&0===e.indexOf('0x')&&(e=e.replace('0x','#')),e)}function a(e){if(!Array.isArray(e))return n(e);for(var t=0;t<e.length;++t)e[t]=n(e[t]);return e}function i(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(1),l=r(2),u={align:'left',breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:'#000000',dropShadowDistance:5,fill:'black',fillGradientType:d.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:'Arial',fontSize:26,fontStyle:'normal',fontVariant:'normal',fontWeight:'normal',letterSpacing:0,lineHeight:0,lineJoin:'miter',miterLimit:10,padding:0,stroke:'black',strokeThickness:0,textBaseline:'alphabetic',trim:!1,wordWrap:!1,wordWrapWidth:100},p=function(){function e(t){o(this,e),this.styleID=0,Object.assign(this,u,t)}return e.prototype.clone=function(){var t={};for(var r in u)t[r]=this[r];return new e(t)},e.prototype.reset=function(){Object.assign(this,u)},e.prototype.toFontString=function(){var e='number'==typeof this.fontSize?this.fontSize+'px':this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(','));for(var r=t.length-1,o;0<=r;r--)o=t[r].trim(),/([\"\'])[^\'\"]+\1/.test(o)||(o='"'+o+'"'),t[r]=o;return this.fontStyle+' '+this.fontVariant+' '+this.fontWeight+' '+e+' '+t.join(',')},s(e,[{key:'align',get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:'breakWords',get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:'dropShadow',get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:'dropShadowAlpha',get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:'dropShadowAngle',get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:'dropShadowBlur',get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:'dropShadowColor',get:function(){return this._dropShadowColor},set:function(e){var t=a(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:'dropShadowDistance',get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:'fill',get:function(){return this._fill},set:function(e){var t=a(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:'fillGradientType',get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:'fillGradientStops',get:function(){return this._fillGradientStops},set:function(e){i(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:'fontFamily',get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:'fontSize',get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:'fontStyle',get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:'fontVariant',get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:'fontWeight',get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:'letterSpacing',get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:'lineHeight',get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:'lineJoin',get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:'miterLimit',get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:'padding',get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:'stroke',get:function(){return this._stroke},set:function(e){var t=a(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:'strokeThickness',get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:'textBaseline',get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:'trim',get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:'wordWrap',get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:'wordWrapWidth',get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),e}();t.default=p},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(11),d=o(s),l=r(3),u=o(l),p=function(e){function t(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,i=arguments[2],s=arguments[3];n(this,t);var d=a(this,e.call(this,null,i));return d.resolution=s||u.default.RESOLUTION,d.width=r,d.height=o,d.realWidth=d.width*d.resolution,d.realHeight=d.height*d.resolution,d.scaleMode=void 0===i?u.default.SCALE_MODE:i,d.hasLoaded=!0,d._glRenderTargets={},d._canvasRenderTarget=null,d.valid=!1,d}return i(t,e),t.prototype.resize=function(e,t){(e!==this.width||t!==this.height)&&(this.valid=0<e&&0<t,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit('update',this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(d.default);t.default=p},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(64),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){function e(){o(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,r){var o=t.width,n=t.height;if(r){var i=e.width/2/o,s=e.height/2/n,d=e.x/o+i,l=e.y/n+s;r=a.default.add(r,a.default.NW),this.x0=d+i*a.default.uX(r),this.y0=l+s*a.default.uY(r),r=a.default.add(r,2),this.x1=d+i*a.default.uX(r),this.y1=l+s*a.default.uY(r),r=a.default.add(r,2),this.x2=d+i*a.default.uX(r),this.y2=l+s*a.default.uY(r),r=a.default.add(r,2),this.x3=d+i*a.default.uX(r),this.y3=l+s*a.default.uY(r)}else this.x0=e.x/o,this.y0=e.y/n,this.x1=(e.x+e.width)/o,this.y1=e.y/n,this.x2=(e.x+e.width)/o,this.y2=(e.y+e.height)/n,this.x3=e.x/o,this.y3=(e.y+e.height)/n;this.uvsUint32[0]=(65535&65535*this.y0)<<16|65535&65535*this.x0,this.uvsUint32[1]=(65535&65535*this.y1)<<16|65535&65535*this.x1,this.uvsUint32[2]=(65535&65535*this.y2)<<16|65535&65535*this.x2,this.uvsUint32[3]=(65535&65535*this.y3)<<16|65535&65535*this.x3},e}();t.default=i},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){t||(t='video/'+e.substr(e.lastIndexOf('.')+1));var r=document.createElement('source');return r.src=e,r.type=t,r}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(11),l=function(e){return e&&e.__esModule?e:{default:e}}(d),u=r(2),p=r(37),c=r(1),h=function(e){function t(r,a){if(o(this,t),!r)throw new Error('No video source element specified.');(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var i=n(this,e.call(this,r,a));return i.width=r.videoWidth,i.height=r.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=!0,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),r.addEventListener('play',i._onPlayStart.bind(i)),r.addEventListener('pause',i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(r.addEventListener('canplay',i._onCanPlay),r.addEventListener('canplaythrough',i._onCanPlay)),i}return a(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return 0<e.currentTime&&!1===e.paused&&!1===e.ended&&2<e.readyState},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(p.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(p.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener('canplay',this._onCanPlay),this.source.removeEventListener('canplaythrough',this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,!this.__loaded&&(this.__loaded=!0,this.emit('loaded',this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&p.shared.remove(this.update,this),this.source&&this.source._pixiId&&(l.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),e.prototype.destroy.call(this)},t.fromVideo=function(e,r){e._pixiId||(e._pixiId='video_'+(0,u.uid)());var o=u.BaseTextureCache[e._pixiId];return o||(o=new t(e,r),l.default.addToCache(o,e._pixiId)),o},t.fromUrl=function(e,r){var o=document.createElement('video');if(o.setAttribute('webkit-playsinline',''),o.setAttribute('playsinline',''),Array.isArray(e))for(var n=0;n<e.length;++n)o.appendChild(s(e[n].src||e[n],e[n].mime));else o.appendChild(s(e.src||e,e.mime));return o.load(),t.fromVideo(o,r)},i(t,[{key:'autoUpdate',get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(p.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(p.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(l.default);t.default=h,h.fromUrls=h.fromUrl},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.BitmapText=t.TilingSpriteRenderer=t.TilingSprite=t.TextureTransform=t.AnimatedSprite=void 0;var n=r(152);Object.defineProperty(t,'AnimatedSprite',{enumerable:!0,get:function(){return o(n).default}});var a=r(39);Object.defineProperty(t,'TextureTransform',{enumerable:!0,get:function(){return o(a).default}});var i=r(154);Object.defineProperty(t,'TilingSprite',{enumerable:!0,get:function(){return o(i).default}});var s=r(158);Object.defineProperty(t,'TilingSpriteRenderer',{enumerable:!0,get:function(){return o(s).default}});var d=r(153);Object.defineProperty(t,'BitmapText',{enumerable:!0,get:function(){return o(d).default}}),r(155),r(156),r(157)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),u=r(81),p=o(u),c=r(80),h=o(c),g=r(82),f=o(g),y=function(e){function t(r,o,i,s){n(this,t),s=s||5;var d=(0,p.default)(s,!0),u=(0,h.default)(s),c=a(this,e.call(this,d,u));return c.resolution=i||l.settings.RESOLUTION,c._quality=0,c.quality=o||4,c.strength=r||8,c.firstRun=!0,c}return i(t,e),t.prototype.apply=function(e,t,r,o){if(this.firstRun){var n=e.renderer.gl,a=(0,f.default)(n);this.vertexSrc=(0,p.default)(a,!0),this.fragmentSrc=(0,h.default)(a),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,o);else{for(var s=e.getRenderTarget(!0),d=t,l=s,u=0;u<this.passes-1;u++){e.applyFilter(this,d,l,!0);var i=l;l=d,d=i}e.applyFilter(this,d,r,o),e.returnRenderTarget(s)}},s(t,[{key:'blur',get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:'quality',get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(l.Filter);t.default=y},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),u=r(81),p=o(u),c=r(80),h=o(c),g=r(82),f=o(g),y=function(e){function t(r,o,i,s){n(this,t),s=s||5;var d=(0,p.default)(s,!1),u=(0,h.default)(s),c=a(this,e.call(this,d,u));return c.resolution=i||l.settings.RESOLUTION,c._quality=0,c.quality=o||4,c.strength=r||8,c.firstRun=!0,c}return i(t,e),t.prototype.apply=function(e,t,r,o){if(this.firstRun){var n=e.renderer.gl,a=(0,f.default)(n);this.vertexSrc=(0,p.default)(a,!1),this.fragmentSrc=(0,h.default)(a),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,r,o);else{for(var s=e.getRenderTarget(!0),d=t,l=s,u=0;u<this.passes-1;u++){e.applyFilter(this,d,l,!0);var i=l;l=d,d=i}e.applyFilter(this,d,r,o),e.returnRenderTarget(s)}},s(t,[{key:'blur',get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:'quality',get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(l.Filter);t.default=y},function(e,t){'use strict';t.__esModule=!0,t.default=function(e){for(var t=r[e],n=t.length,a=o,s='',d=void 0,l=0,i;l<e;l++)i='gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;'.replace('%index%',l),d=l,l>=n&&(d=e-l-1),i=i.replace('%value%',t[d]),s+=i,s+='\n';return a=a.replace('%blur%',s),a=a.replace('%size%',e),a};var r={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]},o='varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}'},function(e,t){'use strict';t.__esModule=!0,t.default=function(e,t){var o=Math.ceil(e/2),n=r,a='',s;s=t?'vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);':'vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);';for(var d=0,i;d<e;d++)i=s.replace('%index%',d),i=i.replace('%sampleIndex%',d-(o-1)+'.0'),a+=i,a+='\n';return n=n.replace('%blur%',a),n=n.replace('%size%',e),n};var r='attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}'},function(e,t){'use strict';t.__esModule=!0,t.default=function(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),r=15;r>t;)r-=2;return r}},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),s=function(){function e(){o(this,e),this.global=new i.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)},e.prototype._copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=e.buttons,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype._reset=function(){this.isPrimary=!1},n(e,[{key:'pointerId',get:function(){return this.identifier}}]),e}();t.default=s},function(e,t){'use strict';t.__esModule=!0,t.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return'pointer'===this.cursor},set buttonMode(e){e?this.cursor='pointer':'pointer'===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(e,t,r){'use strict';function o(e,t){e.bitmapFont=d.BitmapText.registerFont(e.data,t)}t.__esModule=!0,t.parse=o,t.default=function(){return function(e,t){if(!e.data||e.type!==s.Resource.TYPE.XML)return void t();if(0===e.data.getElementsByTagName('page').length||0===e.data.getElementsByTagName('info').length||null===e.data.getElementsByTagName('info')[0].getAttribute('face'))return void t();var r=e.isDataUrl?'':a.dirname(e.url);e.isDataUrl&&('.'===r&&(r=''),this.baseUrl&&r&&('/'===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+='/'),r=r.replace(this.baseUrl,''))),r&&'/'!==r.charAt(r.length-1)&&(r+='/');var n=r+e.data.getElementsByTagName('page')[0].getAttribute('file');if(i.utils.TextureCache[n])o(e,i.utils.TextureCache[n]),t();else{var d={crossOrigin:e.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+'_image',n,d,function(r){o(e,r.texture),t()})}}};var n=r(8),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),i=r(0),s=r(17),d=r(77)},function(e,t,r){'use strict';function o(e,t){return e.isDataUrl?e.data.meta.image:i.default.resolve(e.url.replace(t,''),e.data.meta.image)}t.__esModule=!0,t.default=function(){return function(e,t){var r=e.name+'_image';if(!e.data||e.type!==n.Resource.TYPE.JSON||!e.data.frames||this.resources[r])return void t();var a={crossOrigin:e.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e},i=o(e,this.baseUrl);this.add(r,i,a,function(r){var o=new s.Spritesheet(r.texture.baseTexture,e.data,e.url);o.parse(function(){e.spritesheet=o,e.textures=o.textures,t()})})}},t.getResourcePath=o;var n=r(17),a=r(93),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r(0)},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(){return function(e,t){e.data&&e.type===o.Resource.TYPE.IMAGE&&(e.texture=a.default.fromLoader(e.data,e.url,e.name)),t()}};var o=r(17),n=r(10),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(16),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=function(e){function t(r,a,i){o(this,t);var d=n(this,e.call(this,r));return d._ready=!0,d.verticesX=a||10,d.verticesY=i||10,d.drawMode=s.default.DRAW_MODES.TRIANGLES,d.refresh(),d}return a(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],o=[],n=[],a=[],s=this.verticesX-1,d=this.verticesY-1,l=e.width/s,u=e.height/d,p=0;p<t;p++){var i=p%this.verticesX,c=0|p/this.verticesX;r.push(i*l,c*u),n.push(i/s,c/d)}for(var h=0;h<s*d;h++){var g=h%s,f=0|h/s,y=f*this.verticesX+g,m=f*this.verticesX+g+1,_=(f+1)*this.verticesX+g,x=(f+1)*this.verticesX+g+1;a.push(y,m,_),a.push(m,x,_)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(n),this.colors=new Float32Array(o),this.indices=new Uint16Array(a),this.indexDirty=!0,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(s.default);t.default=d},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(t){r(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},e}();t.default=o},function(e){function t(){throw new Error('setTimeout has not been defined')}function r(){throw new Error('clearTimeout has not been defined')}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function n(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function a(){h&&f&&(h=!1,f.length?c=f.concat(c):g=-1,c.length&&s())}function s(){if(!h){var e=o(a);h=!0;for(var t=c.length;t;){for(f=c,c=[];++g<t;)f&&f[g].run();g=-1,t=c.length}f=null,h=!1,n(e)}}function d(e,t){this.fun=e,this.array=t}function i(){}var l=e.exports={},u,p;(function(){try{u='function'==typeof setTimeout?setTimeout:t}catch(r){u=t}try{p='function'==typeof clearTimeout?clearTimeout:r}catch(t){p=r}})();var c=[],h=!1,g=-1,f;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||h||o(s)},d.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e,t){'use strict';function r(){}function o(e){return function(){if(null===e)throw new Error('Callback was already called.');var t=e;e=null,t.apply(this,arguments)}}t.__esModule=!0,t.eachSeries=function(e,t,r){var o=0,n=e.length;(function a(i){return i||o===n?void(r&&r(i)):void t(e[o++],a)})()},t.queue=function(e,t){function n(e,t,o){if(null!=o&&'function'!=typeof o)throw new Error('task callback must be a function');if(s.started=!0,null==e&&s.idle())return void setTimeout(function(){return s.drain()},1);var n={data:e,callback:'function'==typeof o?o:r};t?s._tasks.unshift(n):s._tasks.push(n),setTimeout(function(){return s.process()},1)}function a(e){return function(){i-=1,e.callback.apply(e,arguments),null!=arguments[0]&&s.error(arguments[0],e.data),i<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==t)t=1;else if(0===t)throw new Error('Concurrency must not be zero');var i=0,s={_tasks:[],concurrency:t,saturated:r,unsaturated:r,buffer:t/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){i=0,s.drain=r,s.started=!1,s._tasks=[]},unshift:function(e,t){n(e,!0,t)},process:function(){for(;!s.paused&&i<s.concurrency&&s._tasks.length;){var t=s._tasks.shift();0===s._tasks.length&&s.empty(),i+=1,i===s.concurrency&&s.saturated(),e(t.data,o(a(t)))}},length:function(){return s._tasks.length},running:function(){return i},idle:function(){return 0===s._tasks.length+i},pause:function(){!0===s.paused||(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var e=1;e<=s.concurrency;e++)s.process()}}};return s}},function(e,t){'use strict';t.__esModule=!0,t.encodeBinary=function(e){for(var t='',o=0;o<e.length;){for(var n=[0,0,0],a=[0,0,0,0],i=0;i<n.length;++i)n[i]=o<e.length?255&e.charCodeAt(o++):0;a[0]=n[0]>>2,a[1]=(3&n[0])<<4|n[1]>>4,a[2]=(15&n[1])<<2|n[2]>>6,a[3]=63&n[2];var s=o-(e.length-1);switch(s){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64;break;default:}for(var d=0;d<a.length;++d)t+=r.charAt(a[d])}return t};var r='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='},function(e,t,r){'use strict';function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,t,r){if(e&&d.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}var a=r(190),d=r(197);t.parse=n,t.resolve=function(e,t){return n(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?n(e,!1,!0).resolveObject(t):t},t.format=function(e){return d.isString(e)&&(e=n(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var u=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=['{','}','|','\\','^','`'].concat(['<','>','"','`',' ','\r','\n','\t']),p=['\''].concat(l),c=['%','/','?',';','#'].concat(p),h=['/','?','#'],g=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=r(193);o.prototype.parse=function(e,t,r){if(!d.isString(e))throw new TypeError('Parameter \'url\' must be a string, not '+typeof e);var o=e.indexOf('?'),n=-1!==o&&o<e.indexOf('#')?'?':'#',b=e.split(n),v=/\\/g;b[0]=b[0].replace(v,'/'),e=b.join(n);var T=e;if(T=T.trim(),!r&&1===e.split('#').length){var S=s.exec(T);if(S)return this.path=T,this.href=T,this.pathname=S[1],S[2]?(this.search=S[2],this.query=t?x.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search='',this.query={}),this}var E=u.exec(T);if(E){E=E[0];var P=E.toLowerCase();this.protocol=P,T=T.substr(E.length)}if(r||E||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var C='//'===T.substr(0,2);C&&!(E&&m[E])&&(T=T.substr(2),this.slashes=!0)}if(!m[E]&&(C||E&&!_[E])){for(var w=-1,A=0,i;A<h.length;A++)i=T.indexOf(h[A]),-1!==i&&(-1==w||i<w)&&(w=i);var I,M;M=-1===w?T.lastIndexOf('@'):T.lastIndexOf('@',w),-1!==M&&(I=T.slice(0,M),T=T.slice(M+1),this.auth=decodeURIComponent(I)),w=-1;for(var A=0,i;A<c.length;A++)i=T.indexOf(c[A]),-1!==i&&(-1===w||i<w)&&(w=i);-1===w&&(w=T.length),this.host=T.slice(0,w),T=T.slice(w),this.parseHost(),this.hostname=this.hostname||'';var R='['===this.hostname[0]&&']'===this.hostname[this.hostname.length-1];if(!R)for(var O=this.hostname.split(/\./),A=0,D=O.length,l;A<D;A++)if(l=O[A],l&&!l.match(g)){for(var L='',B=0,N=l.length;B<N;B++)L+=127<l.charCodeAt(B)?'x':l[B];if(!L.match(g)){var k=O.slice(0,A),F=O.slice(A+1),U=l.match(f);U&&(k.push(U[1]),F.unshift(U[2])),F.length&&(T='/'+F.join('.')+T),this.hostname=k.join('.');break}}this.hostname=this.hostname.length>255?'':this.hostname.toLowerCase(),R||(this.hostname=a.toASCII(this.hostname));var X=this.port?':'+this.port:'',G=this.hostname||'';this.host=G+X,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),'/'!==T[0]&&(T='/'+T))}if(!y[P])for(var A=0,D=p.length,V;A<D;A++)if(V=p[A],-1!==T.indexOf(V)){var W=encodeURIComponent(V);W===V&&(W=escape(V)),T=T.split(V).join(W)}var j=T.indexOf('#');-1!==j&&(this.hash=T.substr(j),T=T.slice(0,j));var H=T.indexOf('?');if(-1===H?t&&(this.search='',this.query={}):(this.search=T.substr(H),this.query=T.substr(H+1),t&&(this.query=x.parse(this.query)),T=T.slice(0,H)),T&&(this.pathname=T),_[P]&&this.hostname&&!this.pathname&&(this.pathname='/'),this.pathname||this.search){var X=this.pathname||'',Y=this.search||'';this.path=X+Y}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||'';e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,':'),e+='@');var t=this.protocol||'',r=this.pathname||'',o=this.hash||'',n=!1,a='';this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(':')?this.hostname:'['+this.hostname+']'),this.port&&(n+=':'+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(a=x.stringify(this.query));var i=this.search||a&&'?'+a||'';return t&&':'!==t.substr(-1)&&(t+=':'),this.slashes||(!t||_[t])&&!1!==n?(n='//'+(n||''),r&&'/'!==r.charAt(0)&&(r='/'+r)):!n&&(n=''),o&&'#'!==o.charAt(0)&&(o='#'+o),i&&'?'!==i.charAt(0)&&(i='?'+i),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace('#','%23'),t+n+r+i+o},o.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(d.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),a=0,l;a<n.length;a++)l=n[a],r[l]=this[l];if(r.hash=e.hash,''===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),c=0,h;c<u.length;c++)h=u[c],'protocol'!==h&&(r[h]=e[h]);return _[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname='/'),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!_[e.protocol]){for(var g=Object.keys(e),f=0,y;f<g.length;f++)y=g[f],r[y]=e[y];return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!m[e.protocol]){for(var x=(e.pathname||'').split('/');x.length&&!(e.host=x.shift()););e.host||(e.host=''),e.hostname||(e.hostname=''),''!==x[0]&&x.unshift(''),2>x.length&&x.unshift(''),r.pathname=x.join('/')}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||'',r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var b=r.pathname||'',p=r.search||'';r.path=b+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&'/'===r.pathname.charAt(0),v=e.host||e.pathname&&'/'===e.pathname.charAt(0),T=v||s||r.host&&e.pathname,S=T,E=r.pathname&&r.pathname.split('/')||[],x=e.pathname&&e.pathname.split('/')||[],P=r.protocol&&!_[r.protocol];if(P&&(r.hostname='',r.port=null,r.host&&(''===E[0]?E[0]=r.host:E.unshift(r.host)),r.host='',e.protocol&&(e.hostname=null,e.port=null,e.host&&(''===x[0]?x[0]=e.host:x.unshift(e.host)),e.host=null),T=T&&(''===x[0]||''===E[0])),v)r.host=e.host||''===e.host?e.host:r.host,r.hostname=e.hostname||''===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,E=x;else if(x.length)E||(E=[]),E.pop(),E=E.concat(x),r.search=e.search,r.query=e.query;else if(!d.isNullOrUndefined(e.search)){if(P){r.hostname=r.host=E.shift();var C=r.host&&0<r.host.indexOf('@')&&r.host.split('@');C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return r.search=e.search,r.query=e.query,d.isNull(r.pathname)&&d.isNull(r.search)||(r.path=(r.pathname?r.pathname:'')+(r.search?r.search:'')),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.path=r.search?'/'+r.search:null,r.href=r.format(),r;for(var w=E.slice(-1)[0],A=(r.host||e.host||1<E.length)&&('.'===w||'..'===w)||''===w,I=0,M=E.length;0<=M;M--)w=E[M],'.'===w?E.splice(M,1):'..'===w?(E.splice(M,1),I++):I&&(E.splice(M,1),I--);if(!T&&!S)for(;I--;I)E.unshift('..');T&&''!==E[0]&&(!E[0]||'/'!==E[0].charAt(0))&&E.unshift(''),A&&'/'!==E.join('/').substr(-1)&&E.push('');var i=''===E[0]||E[0]&&'/'===E[0].charAt(0);if(P){r.hostname=r.host=i?'':E.length?E.shift():'';var C=r.host&&0<r.host.indexOf('@')&&r.host.split('@');C&&(r.auth=C.shift(),r.host=r.hostname=C.shift())}return T=T||r.host&&E.length,T&&!i&&E.unshift(''),E.length?r.pathname=E.join('/'):(r.pathname=null,r.path=null),d.isNull(r.pathname)&&d.isNull(r.search)||(r.path=(r.pathname?r.pathname:'')+(r.search?r.search:'')),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(t=t[0],':'!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){const o=r(43),n=r(6),a=r(211),i=r(213),s=r(44),d=r(206),l=r(214),u=r(5),p=r(210),c=r(199),h=r(23);e.exports=class extends o{constructor(e,t,r,o){super(e),this.sounds=this.main.sounds,this.settings=t,this.engine=u.Engine.create(),this.engine.world.gravity.y=0,this.ended=!1,this.endTime=0,this.particles=[],this.instructions=new PIXI.Text('USE W,A,S,D For Controls\nScroll Down to See More',{fontFamily:'Monospace',fontSize:30,fill:16777215,fontWeight:'bold',align:'center'}),this.instructions.position.set(-this.instructions.width/2,400),this.instructions.anchor.set(.5),this.stage.addChild(this.instructions),u.Events.on(this.engine,'collisionStart',(e)=>{for(let t of e.pairs)t.bodyA.thing.collide(t.bodyB.thing,t.contacts),t.bodyB.thing.collide(t.bodyA.thing,t.contacts)}),this.left=r||{w:'thrust',a:'left',d:'right',s:'missile',q:'addshield',e:'addenergy',c:'laser',x:'cloak',z:'warp',0.14:'left',0.15:'right',0.12:'thrust',0.2:'missile',0.4:'addshield',0.5:'addenergy',"0.0":'laser',0.3:'warp',0.1:'cloak',i:'thrust',j:'left',l:'right',k:'missile',u:'addshield',o:'addenergy',m:'laser',",":'cloak',".":'warp',Numpad7:'addshield',Numpad8:'thrust',Numpad9:'addenergy',Numpad4:'left',Numpad5:'missile',Numpad6:'right',Numpad1:'laser',Numpad2:'cloak',Numpad3:'warp'},this.right=o||r}start(){this.starField=new s(this),this.ship=new i(this,'ship1',100,this.height/2,!0),this.ship2=new i(this,'ship2',this.width-100,this.height/2),this.settings.aileft?this.ai=new c(this,this.ship,this.ship2):this.player=new a(this,this.ship,this.left),this.settings.airight?this.ai2=new c(this,this.ship2,this.ship):this.player2=new a(this,this.ship2,this.right),this.ship.other=this.ship2,this.ship2.other=this.ship;const e=this.width/2,t=this.height/2;this.settings.gravity&&(this.gravity=new d(this)),this.settings.planet&&(this.moon=new p(this)),this.speedcap=new l(this,5,8)}end(e){this.ended||(0===e?this.main.rightScore+=1:this.main.leftScore+=1),this.ended=!0}up(e,t){this.player&&this.player.up(e,t),this.player2&&this.player2.up(e,t)}down(e,t){if('Arrow'===e.code.substr(0,5)&&0===h.getAll().length){const t={x:this.instructions.width/-2},r=new h.Tween(t).to({x:this.instructions.width/2+20},500).onUpdate(()=>{this.instructions.position.x=t.x}).easing(h.Easing.Quadratic.In),o=new h.Tween(t).to({x:this.instructions.width/-2},500).delay(3e3).onUpdate(()=>{this.instructions.position.x=t.x}).easing(h.Easing.Quadratic.In);return r.chain(o),r.start(),void e.preventDefault()}this.player&&this.player.down(e,t),this.player2&&this.player2.down(e,t)}update(e,t){this.player&&this.player.update(e,t),this.player2&&this.player2.update(e,t),this.ship.update(e,t),this.ship2.update(e,t);for(let r=this.particles.length-1;0<=r;--r)this.particles[r].update(e,t);this.settings.gravity&&this.gravity.update(e,t),this.speedcap.update(e,t),this.settings.aileft&&this.ai.update(e,t),this.settings.airight&&this.ai2.update(e,t),this.ended&&(this.endTime+=e,4e3<=this.endTime&&this.main.startMenu()),u.Engine.update(this.engine,e)}destroy(){h.removeAll(),this.player&&this.player.destruct(),this.player2&&this.player2.destruct();for(let e of this.particles)e.destroy();this.ship.destruct(!1),this.ship2.destruct(!1),this.settings.gravity&&this.gravity.destruct(),this.settings.planet&&this.moon.destruct(),this.speedcap.destruct(),delete this.starfield,super.destroy(),u.Engine.clear(this.engine),delete this.player,delete this.player2,delete this.ship,delete this.ship2,delete this.gravity}}},function(e,t,r){const o=r(6),n=r(94),a=r(208),i=r(5),s=r(23),d=r(207),l=r(96),u=r(212);o.settings.SCALE_MODE=o.SCALE_MODES.NEAREST;new class{constructor(){this.scene=null,this.app=new o.Application({resolution:.5,width:800,height:600}),this.container=document.getElementById('container'),this.container.appendChild(this.app.view),this.width=this.app.screen.width,this.height=this.app.screen.height,this.lastTime=window.performance.now(),this.input=new d(this,this.up.bind(this),this.down.bind(this)),this.leftScore=0,this.rightScore=0,o.loader.add('ship1','assets/ship1.png'),o.loader.add('ship2','assets/ship2.png'),o.loader.add('missile1','assets/missile.png'),o.loader.add('missile2','assets/missile2.png'),o.loader.add('moon','assets/moon.png'),o.loader.add('check','assets/check.png'),o.loader.add('menu','assets/menu.png'),o.loader.add('kosov','assets/kosov2.png'),o.loader.add('aether','assets/aether-v2.png'),o.loader.add('ready2p','assets/ready2p.png'),o.loader.load((e,t)=>{this.resources=t;const r=new o.Texture(this.resources.kosov.texture.baseTexture);r.frame=new o.Rectangle(60,0,15,14),o.Texture.addToCache(r,`kosov-e`);const n=new o.Texture(this.resources.kosov.texture.baseTexture);n.frame=new o.Rectangle(46,46,15,14),o.Texture.addToCache(n,`kosov-s`);const a=new o.Texture(this.resources.kosov.texture.baseTexture);a.frame=new o.Rectangle(0,46,15,14),o.Texture.addToCache(a,`kosov-p`);const i=new o.Texture(this.resources.kosov.texture.baseTexture);i.frame=new o.Rectangle(0,0,15,14),o.Texture.addToCache(i,`kosov-a`);const s=new o.Texture(this.resources.kosov.texture.baseTexture);s.frame=new o.Rectangle(31,0,15,14),o.Texture.addToCache(s,`kosov-c`);const d=new o.Texture(this.resources.kosov.texture.baseTexture);d.frame=new o.Rectangle(30,60,15,14),o.Texture.addToCache(d,`kosov-w`);const l=new o.Texture(this.resources.kosov.texture.baseTexture);l.frame=new o.Rectangle(31,45,15,14),o.Texture.addToCache(l,`kosov-r`);const u=[10,10,11,11,11,11,11,11,11,11];let p=0;for(let r=0;10>r;++r){const e=new o.Texture(this.resources.aether.texture.baseTexture);e.frame=new o.Rectangle(345+p,0,u[r]+2,12),o.Texture.addToCache(e,`aether-${r}`),p+=u[r]+2}this.startMenu(),this.update()}),this.sounds={hit:new Howl({src:['assets/hit.ogg','assets/hit.mp3'],volume:.3}),hit2:new Howl({src:['assets/hit2.ogg','assets/hit2.mp3'],volume:.3}),beam:new Howl({src:['assets/beam.ogg','assets/beam.mp3'],volume:.4}),beamhit:new Howl({src:['assets/beamhit.ogg','assets/beamhit.mp3'],volume:.4}),explode:new Howl({src:['assets/explode.ogg','assets/explode.mp3'],volume:.2}),explodeship:new Howl({src:['assets/explodeship.ogg','assets/explodeship.mp3'],volume:.5}),warp:new Howl({src:['assets/warp3.ogg','assets/warp3.mp3'],volume:.6}),launch:new Howl({src:['assets/launch.ogg','assets/launch.mp3']})}}clear(){null!==this.scene&&this.scene.destroy()}up(e,t){this.scene.up(e,t)}down(e,t){this.scene.down(e,t)}update(e){e=e||0,s.update(e);let t=e-this.lastTime;25<t&&(t=25);const r=t/(1e3/60);this.lastTime=e,this.scene.update(t,r),this.input.update(t,r),window.requestAnimationFrame(this.update.bind(this))}startMenu(){this.clear(),this.scene=new a(this),this.scene.start()}startGame(e,t,r){this.clear(),this.scene=new n(this,e,t,r),this.scene.start()}ready2P(e){this.clear(),this.scene=new u(this,e),this.scene.start()}}},function(e,t,r){var o=Math.ceil,n=Math.max,a=Math.abs;(function(r){var i,s;(function(){'use strict';var d=function(){this.init()};d.prototype={init:function(){var e=this||l;return e._counter=0,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent='canplaythrough',e._navigator='undefined'!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.mobileAutoEnable=!0,e._setup(),e},volume:function(e){var t=this||l;if(e=parseFloat(e),t.ctx||m(),'undefined'!=typeof e&&0<=e&&1>=e){if(t._volume=e,t._muted)return t;t.usingWebAudio&&(t.masterGain.gain.value=e);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),n=0,a;n<o.length;n++)a=t._howls[r]._soundById(o[n]),a&&a._node&&(a._node.volume=a._volume*e);return t}return t._volume},mute:function(e){var t=this||l;t.ctx||m(),t._muted=e,t.usingWebAudio&&(t.masterGain.gain.value=e?0:t._volume);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),n=0,a;n<o.length;n++)a=t._howls[r]._soundById(o[n]),a&&a._node&&(a._node.muted=!!e||a._muted);return t},unload:function(){for(var e=this||l,t=e._howls.length-1;0<=t;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&'undefined'!=typeof e.ctx.close&&(e.ctx.close(),e.ctx=null,m()),e},codecs:function(e){return(this||l)._codecs[e.replace(/^x-/,'')]},_setup:function(){var e=this||l;if(e.state=e.ctx?e.ctx.state||'running':'running',e._autoSuspend(),!e.usingWebAudio)if('undefined'!=typeof Audio)try{var t=new Audio;'undefined'==typeof t.oncanplaythrough&&(e._canPlayEvent='canplay')}catch(t){e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||l,t=null;try{t='undefined'==typeof Audio?null:new Audio}catch(t){return e}if(!t||'function'!=typeof t.canPlayType)return e;var r=t.canPlayType('audio/mpeg;').replace(/^no$/,''),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),n=o&&33>parseInt(o[0].split('/')[1],10);return e._codecs={mp3:!!(!n&&(r||t.canPlayType('audio/mp3;').replace(/^no$/,''))),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,''),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,''),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,''),aac:!!t.canPlayType('audio/aac;').replace(/^no$/,''),caf:!!t.canPlayType('audio/x-caf;').replace(/^no$/,''),m4a:!!(t.canPlayType('audio/x-m4a;')||t.canPlayType('audio/m4a;')||t.canPlayType('audio/aac;')).replace(/^no$/,''),mp4:!!(t.canPlayType('audio/x-mp4;')||t.canPlayType('audio/mp4;')||t.canPlayType('audio/aac;')).replace(/^no$/,''),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,''),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,''),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,''),flac:!!(t.canPlayType('audio/x-flac;')||t.canPlayType('audio/flac;')).replace(/^no$/,'')},e},_enableMobileAudio:function(){var e=this||l,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),r=!!('ontouchend'in window||e._navigator&&0<e._navigator.maxTouchPoints||e._navigator&&0<e._navigator.msMaxTouchPoints);if(!e._mobileEnabled&&e.ctx&&(t||r)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var o=function(){var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),'undefined'==typeof t.start?t.noteOn(0):t.start(0),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener('touchend',o,!0)}};return document.addEventListener('touchend',o,!0),e}},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&'undefined'!=typeof e.ctx.suspend&&l.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state='suspending',e.ctx.suspend().then(function(){e.state='suspended',e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&'undefined'!=typeof e.ctx.resume&&l.usingWebAudio)return'running'===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):'suspended'===e.state?(e.state='resuming',e.ctx.resume().then(function(){e.state='running';for(var t=0;t<e._howls.length;t++)e._howls[t]._emit('resume')}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):'suspending'===e.state&&(e._resumeAfterSuspend=!0),e}};var l=new d,u=function(e){var t=this;return e.src&&0!==e.src.length?void t.init(e):void console.error('An array of source files must be passed with any new Howl.')};u.prototype={init:function(e){var t=this;return l.ctx||m(),t._autoplay=e.autoplay||!1,t._format='string'==typeof e.format?[e.format]:e.format,t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload='boolean'!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src='string'==typeof e.src?[e.src]:e.src,t._volume=void 0===e.volume?1:e.volume,t._duration=0,t._state='unloaded',t._sounds=[],t._endTimers={},t._queue=[],t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onresume=[],t._webAudio=l.usingWebAudio&&!t._html5,'undefined'!=typeof l.ctx&&l.ctx&&l.mobileAutoEnable&&l._enableMobileAudio(),l._howls.push(t),t._autoplay&&t._queue.push({event:'play',action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(l.noAudio)return void e._emit('loaderror',null,'No audio support.');'string'==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var o,n;if(e._format&&e._format[r])o=e._format[r];else{if(n=e._src[r],'string'!=typeof n){e._emit('loaderror',null,'Non-string found in selected audio sources - ignoring.');continue}o=/^data:audio\/([^;,]+);/i.exec(n),o||(o=/\.([^.]+)$/.exec(n.split('?',1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&l.codecs(o)){t=e._src[r];break}}return t?(e._src=t,e._state='loading','https:'===window.location.protocol&&'http:'===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new p(e),e._webAudio&&h(e),e):void e._emit('loaderror',null,'No codec support for selected audio sources.')},play:function(e,t){var r=this,o=null;if('number'==typeof e)o=e,e=null;else{if('string'==typeof e&&'loaded'===r._state&&!r._sprite[e])return null;if('undefined'==typeof e){e='__default';for(var s=0,d=0;d<r._sounds.length;d++)r._sounds[d]._paused&&!r._sounds[d]._ended&&(s++,o=r._sounds[d]._id);1==s?e=null:o=null}}var i=o?r._soundById(o):r._inactiveSound();if(!i)return null;if(o&&!e&&(e=i._sprite||'__default'),'loaded'!==r._state&&!r._sprite[e])return r._queue.push({event:'play',action:function(){r.play(r._soundById(i._id)?i._id:void 0)}}),i._id;if(o&&!i._paused)return t||setTimeout(function(){r._emit('play',i._id)},0),i._id;r._webAudio&&l._autoResume();var u=n(0,0<i._seek?i._seek:r._sprite[e][0]/1e3),p=n(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-u),c=1e3*p/a(i._rate);i._paused=!1,i._ended=!1,i._sprite=e,i._seek=u,i._start=r._sprite[e][0]/1e3,i._stop=(r._sprite[e][0]+r._sprite[e][1])/1e3,i._loop=!!(i._loop||r._sprite[e][2]);var h=i._node;if(r._webAudio){var g=function(){r._refreshBuffer(i);var e=i._muted||r._muted?0:i._volume;h.gain.setValueAtTime(e,l.ctx.currentTime),i._playStart=l.ctx.currentTime,'undefined'==typeof h.bufferSource.start?i._loop?h.bufferSource.noteGrainOn(0,u,86400):h.bufferSource.noteGrainOn(0,u,p):i._loop?h.bufferSource.start(0,u,86400):h.bufferSource.start(0,u,p),c!=Infinity&&(r._endTimers[i._id]=setTimeout(r._ended.bind(r,i),c)),t||setTimeout(function(){r._emit('play',i._id)},0)},f='running'===l.state;if('loaded'===r._state&&f)g();else{var y=f||'loaded'!==r._state?'load':'resume';r.once(y,g,f?i._id:null),r._clearTimer(i._id)}}else{var m=function(){h.currentTime=u,h.muted=i._muted||r._muted||l._muted||h.muted,h.volume=i._volume*l.volume(),h.playbackRate=i._rate,h.play(),c!=Infinity&&(r._endTimers[i._id]=setTimeout(r._ended.bind(r,i),c)),t||r._emit('play',i._id)},_='loaded'===r._state&&(window&&window.ejecta||!h.readyState&&l._navigator.isCocoonJS);if(4===h.readyState||_)m();else{var x=function(){m(),h.removeEventListener(l._canPlayEvent,x,!1)};h.addEventListener(l._canPlayEvent,x,!1),r._clearTimer(i._id)}}return i._id},pause:function(e){var t=this;if('loaded'!==t._state)return t._queue.push({event:'pause',action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),o=0;o<r.length;o++){t._clearTimer(r[o]);var n=t._soundById(r[o]);if(n&&!n._paused&&(n._seek=t.seek(r[o]),n._rateSeek=0,n._paused=!0,t._stopFade(r[o]),n._node))if(t._webAudio){if(!n._node.bufferSource)return t;'undefined'==typeof n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),t._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==Infinity||n._node.pause();arguments[1]||t._emit('pause',n?n._id:null)}return t},stop:function(e,t){var r=this;if('loaded'!==r._state)return r._queue.push({event:'stop',action:function(){r.stop(e)}}),r;for(var o=r._getSoundIds(e),n=0;n<o.length;n++){r._clearTimer(o[n]);var a=r._soundById(o[n]);if(a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,r._stopFade(o[n]),a._node))if(r._webAudio){if(!a._node.bufferSource)return t||r._emit('stop',a._id),r;'undefined'==typeof a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),r._cleanBuffer(a._node)}else isNaN(a._node.duration)&&a._node.duration!==Infinity||(a._node.currentTime=a._start||0,a._node.pause());a&&!t&&r._emit('stop',a._id)}return r},mute:function(e,t){var r=this;if('loaded'!==r._state)return r._queue.push({event:'mute',action:function(){r.mute(e,t)}}),r;if('undefined'==typeof t)if('boolean'==typeof e)r._muted=e;else return r._muted;for(var o=r._getSoundIds(t),n=0,a;n<o.length;n++)a=r._soundById(o[n]),a&&(a._muted=e,r._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,l.ctx.currentTime):a._node&&(a._node.muted=!!l._muted||e),r._emit('mute',a._id));return r},volume:function(){var e=this,t=arguments,r,o;if(0===t.length)return e._volume;if(1===t.length||2===t.length&&'undefined'==typeof t[1]){var n=e._getSoundIds(),a=n.indexOf(t[0]);0<=a?o=parseInt(t[0],10):r=parseFloat(t[0])}else 2<=t.length&&(r=parseFloat(t[0]),o=parseInt(t[1],10));var s;if('undefined'!=typeof r&&0<=r&&1>=r){if('loaded'!==e._state)return e._queue.push({event:'volume',action:function(){e.volume.apply(e,t)}}),e;'undefined'==typeof o&&(e._volume=r),o=e._getSoundIds(o);for(var d=0;d<o.length;d++)s=e._soundById(o[d]),s&&(s._volume=r,!t[2]&&e._stopFade(o[d]),e._webAudio&&s._node&&!s._muted?s._node.gain.setValueAtTime(r,l.ctx.currentTime):s._node&&!s._muted&&(s._node.volume=r*l.volume()),e._emit('volume',s._id))}else return s=o?e._soundById(o):e._sounds[0],s?s._volume:0;return e},fade:function(e,t,r,s){var d=this,u=a(e-t),p=e>t?'out':'in',c=u/0.01,h=0<c?r/c:r;if(4>h&&(c=o(c/(4/h)),h=4),'loaded'!==d._state)return d._queue.push({event:'fade',action:function(){d.fade(e,t,r,s)}}),d;d.volume(e,s);for(var g=d._getSoundIds(s),f=0,i;f<g.length;f++)if(i=d._soundById(g[f]),i){if(s||d._stopFade(g[f]),d._webAudio&&!i._muted){var y=l.ctx.currentTime;i._volume=e,i._node.gain.setValueAtTime(e,y),i._node.gain.linearRampToValueAtTime(t,y+r/1e3)}var m=e;i._interval=setInterval(function(r,o){0<c&&(m+='in'==p?0.01:-0.01),m=n(0,m),m=Math.min(1,m),m=Math.round(100*m)/100,d._webAudio?('undefined'==typeof s&&(d._volume=m),o._volume=m):d.volume(m,r,!0),(t<e&&m<=t||t>e&&m>=t)&&(clearInterval(o._interval),o._interval=null,d.volume(t,r),d._emit('fade',r))}.bind(d,g[f],i),h)}return d},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(l.ctx.currentTime),clearInterval(r._interval),r._interval=null,t._emit('fade',e)),t},loop:function(){var e=this,t=arguments,r,o,n;if(0===t.length)return e._loop;if(1!==t.length)2===t.length&&(r=t[0],o=parseInt(t[1],10));else if('boolean'==typeof t[0])r=t[0],e._loop=r;else return n=e._soundById(parseInt(t[0],10)),!!n&&n._loop;for(var a=e._getSoundIds(o),s=0;s<a.length;s++)n=e._soundById(a[s]),n&&(n._loop=r,e._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=r,r&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return e},rate:function(){var e=this,t=arguments,r,o;if(0===t.length)o=e._sounds[0]._id;else if(1===t.length){var n=e._getSoundIds(),s=n.indexOf(t[0]);0<=s?o=parseInt(t[0],10):r=parseFloat(t[0])}else 2===t.length&&(r=parseFloat(t[0]),o=parseInt(t[1],10));var d;if('number'==typeof r){if('loaded'!==e._state)return e._queue.push({event:'rate',action:function(){e.rate.apply(e,t)}}),e;'undefined'==typeof o&&(e._rate=r),o=e._getSoundIds(o);for(var u=0;u<o.length;u++)if(d=e._soundById(o[u]),d){d._rateSeek=e.seek(o[u]),d._playStart=e._webAudio?l.ctx.currentTime:d._playStart,d._rate=r,e._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.value=r:d._node&&(d._node.playbackRate=r);var i=e.seek(o[u]),p=(e._sprite[d._sprite][0]+e._sprite[d._sprite][1])/1e3-i,c=1e3*p/a(d._rate);(e._endTimers[o[u]]||!d._paused)&&(e._clearTimer(o[u]),e._endTimers[o[u]]=setTimeout(e._ended.bind(e,d),c)),e._emit('rate',d._id)}}else return d=e._soundById(o),d?d._rate:e._rate;return e},seek:function(){var e=this,t=arguments,r,o;if(0===t.length)o=e._sounds[0]._id;else if(1===t.length){var n=e._getSoundIds(),i=n.indexOf(t[0]);0<=i?o=parseInt(t[0],10):(o=e._sounds[0]._id,r=parseFloat(t[0]))}else 2===t.length&&(r=parseFloat(t[0]),o=parseInt(t[1],10));if('undefined'==typeof o)return e;if('loaded'!==e._state)return e._queue.push({event:'seek',action:function(){e.seek.apply(e,t)}}),e;var s=e._soundById(o);if(s)if('number'==typeof r&&0<=r){var d=e.playing(o);d&&e.pause(o,!0),s._seek=r,s._ended=!1,e._clearTimer(o),d&&e.play(o,!0),!e._webAudio&&s._node&&(s._node.currentTime=r),e._emit('seek',o)}else{if(e._webAudio){var u=e.playing(o)?l.ctx.currentTime-s._playStart:0,p=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(p+u*a(s._rate))}return s._node.currentTime}return e},playing:function(e){var t=this;if('number'==typeof e){var r=t._soundById(e);return!!r&&!r._paused}for(var o=0;o<t._sounds.length;o++)if(!t._sounds[o]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,o=t._soundById(e);return o&&(r=t._sprite[o._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++){t[r]._paused||e.stop(t[r]._id),e._webAudio||(t[r]._node.src='data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA',t[r]._node.removeEventListener('error',t[r]._errorFn,!1),t[r]._node.removeEventListener(l._canPlayEvent,t[r]._loadFn,!1)),delete t[r]._node,e._clearTimer(t[r]._id);var o=l._howls.indexOf(e);0<=o&&l._howls.splice(o,1)}var n=!0;for(r=0;r<l._howls.length;r++)if(l._howls[r]._src===e._src){n=!1;break}return c&&n&&delete c[e._src],l.noAudio=!1,e._state='unloaded',e._sounds=[],e=null,null},on:function(e,t,r,o){var n=this,a=n['_on'+e];return'function'==typeof t&&a.push(o?{id:r,fn:t,once:o}:{id:r,fn:t}),n},off:function(e,t,r){var o=this,n=o['_on'+e],a=0;if(t){for(a=0;a<n.length;a++)if(t===n[a].fn&&r===n[a].id){n.splice(a,1);break}}else if(e)o['_on'+e]=[];else{var i=Object.keys(o);for(a=0;a<i.length;a++)0===i[a].indexOf('_on')&&Array.isArray(o[i[a]])&&(o[i[a]]=[])}return o},once:function(e,t,r){var o=this;return o.on(e,t,r,1),o},_emit:function(e,t,r){for(var o=this,n=o['_on'+e],a=n.length-1;0<=a;a--)n[a].id&&n[a].id!==t&&'load'!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(o,n[a].fn),0),n[a].once&&o.off(e,n[a].fn,n[a].id));return o},_loadQueue:function(){var e=this;if(0<e._queue.length){var t=e._queue[0];e.once(t.event,function(){e._queue.shift(),e._loadQueue()}),t.action()}return e},_ended:function(e){var t=this,r=e._sprite,o=!!(e._loop||t._sprite[r][2]);if(t._emit('end',e._id),!t._webAudio&&o&&t.stop(e._id,!0).play(e._id),t._webAudio&&o){t._emit('play',e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=l.ctx.currentTime;var n=1e3*(e._stop-e._start)/a(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),n)}return t._webAudio&&!o&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),l._autoSuspend()),t._webAudio||o||t.stop(e._id),t},_clearTimer:function(e){var t=this;return t._endTimers[e]&&(clearTimeout(t._endTimers[e]),delete t._endTimers[e]),t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new p(e)},_drain:function(){var e=this,t=e._pool,r=0,o=0;if(!(e._sounds.length<t)){for(o=0;o<e._sounds.length;o++)e._sounds[o]._ended&&r++;for(o=e._sounds.length-1;0<=o;o--){if(r<=t)return;e._sounds[o]._ended&&(e._webAudio&&e._sounds[o]._node&&e._sounds[o]._node.disconnect(0),e._sounds.splice(o,1),r--)}}},_getSoundIds:function(e){var t=this;if('undefined'==typeof e){for(var r=[],o=0;o<t._sounds.length;o++)r.push(t._sounds[o]._id);return r}return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=l.ctx.createBufferSource(),e._node.bufferSource.buffer=c[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=e._rate,t},_cleanBuffer:function(e){var t=this;if(t._scratchBuffer){e.bufferSource.onended=null,e.bufferSource.disconnect(0);try{e.bufferSource.buffer=t._scratchBuffer}catch(t){}}return e.bufferSource=null,t}};var p=function(e){this._parent=e,this.init()};p.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite='__default',e._id=++l._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=l._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node='undefined'==typeof l.ctx.createGain?l.ctx.createGainNode():l.ctx.createGain(),e._node.gain.setValueAtTime(r,l.ctx.currentTime),e._node.paused=!0,e._node.connect(l.masterGain)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener('error',e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(l._canPlayEvent,e._loadFn,!1),e._node.src=t._src,e._node.preload='auto',e._node.volume=r*l.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite='__default',e._id=++l._counter,e},_errorListener:function(){var e=this;e._parent._emit('loaderror',e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener('error',e._errorListener,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=o(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),'loaded'!==t._state&&(t._state='loaded',t._emit('load'),t._loadQueue()),e._node.removeEventListener(l._canPlayEvent,e._loadFn,!1)}};var c={},h=function(e){var t=e._src;if(c[t])return e._duration=c[t].duration,void y(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(',')[1]),o=new Uint8Array(r.length),n=0;n<r.length;++n)o[n]=r.charCodeAt(n);f(o.buffer,e)}else{var a=new XMLHttpRequest;a.open('GET',t,!0),a.responseType='arraybuffer',a.onload=function(){var t=(a.status+'')[0];return'0'!==t&&'2'!==t&&'3'!==t?void e._emit('loaderror',null,'Failed loading audio file with status: '+a.status+'.'):void f(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete c[t],e.load())},g(a)}},g=function(e){try{e.send()}catch(t){e.onerror()}},f=function(e,t){l.ctx.decodeAudioData(e,function(e){e&&0<t._sounds.length&&(c[t._src]=e,y(t,e))},function(){t._emit('loaderror',null,'Decoding audio data failed.')})},y=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),'loaded'!==e._state&&(e._state='loaded',e._emit('load'),e._loadQueue())},m=function(){try{'undefined'==typeof AudioContext?'undefined'==typeof webkitAudioContext?l.usingWebAudio=!1:l.ctx=new webkitAudioContext:l.ctx=new AudioContext}catch(t){l.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(l._navigator&&l._navigator.platform),t=l._navigator&&l._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&9>r){var o=/safari/.test(l._navigator&&l._navigator.userAgent.toLowerCase());(l._navigator&&l._navigator.standalone&&!o||l._navigator&&!l._navigator.standalone&&!o)&&(l.usingWebAudio=!1)}l.usingWebAudio&&(l.masterGain='undefined'==typeof l.ctx.createGain?l.ctx.createGainNode():l.ctx.createGain(),l.masterGain.gain.value=1,l.masterGain.connect(l.ctx.destination)),l._setup()};i=[],s=function(){return{Howler:l,Howl:u}}.apply(t,i),!(s!==void 0&&(e.exports=s)),t.Howler=l,t.Howl=u,'undefined'==typeof window?'undefined'!=typeof r&&(r.HowlerGlobal=d,r.Howler=l,r.Howl=u,r.Sound=p):(window.HowlerGlobal=d,window.Howler=l,window.Howl=u,window.Sound=p)})(),function(){'use strict';HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var r=t._howls.length-1;0<=r;r--)t._howls[r].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,r){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(t='number'==typeof t?t:o._pos[1],r='number'==typeof r?r:o._pos[2],'number'==typeof e)o._pos=[e,t,r],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(e,t,r,o,n,a){var i=this;if(!i.ctx||!i.ctx.listener)return i;var s=i._orientation;if(t='number'==typeof t?t:s[1],r='number'==typeof r?r:s[2],o='number'==typeof o?o:s[3],n='number'==typeof n?n:s[4],a='number'==typeof a?a:s[5],'number'==typeof e)i._orientation=[e,t,r,o,n,a],i.ctx.listener.setOrientation(e,t,r,o,n,a);else return s;return i},Howl.prototype.init=function(e){return function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._stereo=t.stereo||null,r._pos=t.pos||null,r._pannerAttr={coneInnerAngle:'undefined'==typeof t.coneInnerAngle?360:t.coneInnerAngle,coneOuterAngle:'undefined'==typeof t.coneOuterAngle?360:t.coneOuterAngle,coneOuterGain:'undefined'==typeof t.coneOuterGain?0:t.coneOuterGain,distanceModel:'undefined'==typeof t.distanceModel?'inverse':t.distanceModel,maxDistance:'undefined'==typeof t.maxDistance?1e4:t.maxDistance,panningModel:'undefined'==typeof t.panningModel?'HRTF':t.panningModel,refDistance:'undefined'==typeof t.refDistance?1:t.refDistance,rolloffFactor:'undefined'==typeof t.rolloffFactor?1:t.rolloffFactor},r._onstereo=t.onstereo?[{fn:t.onstereo}]:[],r._onpos=t.onpos?[{fn:t.onpos}]:[],r._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var o=this;if(!o._webAudio)return o;if('loaded'!==o._state)return o._queue.push({event:'stereo',action:function(){o.stereo(t,r)}}),o;var n='undefined'==typeof Howler.ctx.createStereoPanner?'spatial':'stereo';if('undefined'==typeof r)if('number'==typeof t)o._stereo=t,o._pos=[t,0,0];else return o._stereo;for(var a=o._getSoundIds(r),s=0,i;s<a.length;s++)if(i=o._soundById(a[s]),i)if('number'==typeof t)i._stereo=t,i._pos=[t,0,0],i._node&&(i._pannerAttr.panningModel='equalpower',(!i._panner||!i._panner.pan)&&e(i,n),'spatial'==n?i._panner.setPosition(t,0,0):i._panner.pan.value=t),o._emit('stereo',i._id);else return i._stereo;return o},Howl.prototype.pos=function(t,r,o,n){var a=this;if(!a._webAudio)return a;if('loaded'!==a._state)return a._queue.push({event:'pos',action:function(){a.pos(t,r,o,n)}}),a;if(r='number'==typeof r?r:0,o='number'==typeof o?o:-0.5,'undefined'==typeof n)if('number'==typeof t)a._pos=[t,r,o];else return a._pos;for(var s=a._getSoundIds(n),d=0,i;d<s.length;d++)if(i=a._soundById(s[d]),i)if('number'==typeof t)i._pos=[t,r,o],i._node&&((!i._panner||i._panner.pan)&&e(i,'spatial'),i._panner.setPosition(t,r,o)),a._emit('pos',i._id);else return i._pos;return a},Howl.prototype.orientation=function(t,r,o,n){var a=this;if(!a._webAudio)return a;if('loaded'!==a._state)return a._queue.push({event:'orientation',action:function(){a.orientation(t,r,o,n)}}),a;if(r='number'==typeof r?r:a._orientation[1],o='number'==typeof o?o:a._orientation[2],'undefined'==typeof n)if('number'==typeof t)a._orientation=[t,r,o];else return a._orientation;for(var s=a._getSoundIds(n),d=0,i;d<s.length;d++)if(i=a._soundById(s[d]),i)if('number'==typeof t)i._orientation=[t,r,o],i._node&&(!i._panner&&(!i._pos&&(i._pos=a._pos||[0,0,-0.5]),e(i,'spatial')),i._panner.setOrientation(t,r,o)),a._emit('orientation',i._id);else return i._orientation;return a},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,n,o,a;if(!t._webAudio)return t;if(0===r.length)return t._pannerAttr;if(1!==r.length)2===r.length&&(n=r[0],o=parseInt(r[1],10));else if('object'==typeof r[0])n=r[0],'undefined'==typeof o&&(t._pannerAttr={coneInnerAngle:'undefined'==typeof n.coneInnerAngle?t._coneInnerAngle:n.coneInnerAngle,coneOuterAngle:'undefined'==typeof n.coneOuterAngle?t._coneOuterAngle:n.coneOuterAngle,coneOuterGain:'undefined'==typeof n.coneOuterGain?t._coneOuterGain:n.coneOuterGain,distanceModel:'undefined'==typeof n.distanceModel?t._distanceModel:n.distanceModel,maxDistance:'undefined'==typeof n.maxDistance?t._maxDistance:n.maxDistance,panningModel:'undefined'==typeof n.panningModel?t._panningModel:n.panningModel,refDistance:'undefined'==typeof n.refDistance?t._refDistance:n.refDistance,rolloffFactor:'undefined'==typeof n.rolloffFactor?t._rolloffFactor:n.rolloffFactor});else return a=t._soundById(parseInt(r[0],10)),a?a._pannerAttr:t._pannerAttr;for(var s=t._getSoundIds(o),d=0;d<s.length;d++)if(a=t._soundById(s[d]),a){var i=a._pannerAttr;i={coneInnerAngle:'undefined'==typeof n.coneInnerAngle?i.coneInnerAngle:n.coneInnerAngle,coneOuterAngle:'undefined'==typeof n.coneOuterAngle?i.coneOuterAngle:n.coneOuterAngle,coneOuterGain:'undefined'==typeof n.coneOuterGain?i.coneOuterGain:n.coneOuterGain,distanceModel:'undefined'==typeof n.distanceModel?i.distanceModel:n.distanceModel,maxDistance:'undefined'==typeof n.maxDistance?i.maxDistance:n.maxDistance,panningModel:'undefined'==typeof n.panningModel?i.panningModel:n.panningModel,refDistance:'undefined'==typeof n.refDistance?i.refDistance:n.refDistance,rolloffFactor:'undefined'==typeof n.rolloffFactor?i.rolloffFactor:n.rolloffFactor};var l=a._panner;l?(l.coneInnerAngle=i.coneInnerAngle,l.coneOuterAngle=i.coneOuterAngle,l.coneOuterGain=i.coneOuterGain,l.distanceModel=i.distanceModel,l.maxDistance=i.maxDistance,l.panningModel=i.panningModel,l.refDistance=i.refDistance,l.rolloffFactor=i.rolloffFactor):(!a._pos&&(a._pos=t._pos||[0,0,-0.5]),e(a,'spatial'))}return t},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,e.call(this),t._stereo?r.stereo(t._stereo):t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._pos=r._pos,t._pannerAttr=r._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e,t){t=t||'spatial','spatial'===t?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.value=e._stereo),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id)}}()}).call(t,r(18))},function(e){'use strict';/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function t(e){if(null===e||e===void 0)throw new TypeError('Object.assign cannot be called with null or undefined');return Object(e)}var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String('abc');if(e[5]='de','5'===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;10>r;r++)t['_'+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if('0123456789'!==o.join(''))return!1;var n={};return['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t'].forEach(function(e){n[e]=e}),'abcdefghijklmnopqrst'===Object.keys(Object.assign({},n)).join('')}catch(e){return!1}}()?Object.assign:function(e){for(var a=t(e),d=1,s,l;d<arguments.length;d++){for(var u in s=Object(arguments[d]),s)o.call(s,u)&&(a[u]=s[u]);if(r){l=r(s);for(var p=0;p<l.length;p++)n.call(s,l[p])&&(a[l[p]]=s[l[p]])}}return a}},function(e){var t=new ArrayBuffer(0),r=function(e,r,o,n){this.gl=e,this.buffer=e.createBuffer(),this.type=r||e.ARRAY_BUFFER,this.drawType=n||e.STATIC_DRAW,this.data=t,o&&this.upload(o),this._updateID=0};r.prototype.upload=function(e,t,r){r||this.bind();var o=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?o.bufferSubData(this.type,t,e):o.bufferData(this.type,e,this.drawType),this.data=e},r.prototype.bind=function(){var e=this.gl;e.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(e,t,o){return new r(e,e.ARRAY_BUFFER,t,o)},r.createIndexBuffer=function(e,t,o){return new r(e,e.ELEMENT_ARRAY_BUFFER,t,o)},r.create=function(e,t,o,n){return new r(e,t,o,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},function(e,t,r){var o=r(48),n=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};n.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new o(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(e,t,r,o){this.bind();var n=this.gl;n.clearColor(e,t,r,o),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},n.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},n.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(e,t,r){var a=o.fromData(e,null,t,r);a.enableNearestScaling(),a.enableWrapClamp();var i=new n(e,t,r);return i.enableTexture(a),i.unbind(),i},n.createFloat32=function(e,t,r,a){var i=new o.fromData(e,a,t,r);i.enableNearestScaling(),i.enableWrapClamp();var s=new n(e,t,r);return s.enableTexture(i),s.unbind(),s},e.exports=n},function(e,t,r){var o=r(50),n=r(52),a=r(53),i=r(56),s=r(54),d=function(e,t,r,d,l){this.gl=e,d&&(t=i(t,d),r=i(r,d)),this.program=o(e,t,r,l),this.attributes=n(e,this.program),this.uniformData=a(e,this.program),this.uniforms=s(e,this.uniformData)};d.prototype.bind=function(){this.gl.useProgram(this.program)},d.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var e=this.gl;e.deleteProgram(this.program)},e.exports=d},function(e,t,r){function o(e,t){if(this.nativeVaoExtension=null,o.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension('OES_vertex_array_object')||e.getExtension('MOZ_OES_vertex_array_object')||e.getExtension('WEBKIT_OES_vertex_array_object')),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(r),attribState:Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var n=r(49);o.prototype.constructor=o,e.exports=o,o.FORCE_NATIVE=!1,o.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},o.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},o.prototype.activate=function(){for(var e=this.gl,t=null,r=0,o;r<this.attributes.length;r++)o=this.attributes[r],t!==o.buffer&&(o.buffer.bind(),t=o.buffer),e.vertexAttribPointer(o.attribute.location,o.attribute.size,o.type||e.FLOAT,o.normalized||!1,o.stride||0,o.start||0);return n(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},o.prototype.addAttribute=function(e,t,r,o,n,a){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:o||!1,stride:n||0,start:a||0}),this.dirty=!0,this},o.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},o.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},o.prototype.draw=function(e,t,r){var o=this.gl;return this.indexBuffer?o.drawElements(e,t||this.indexBuffer.data.length,o.UNSIGNED_SHORT,2*(r||0)):o.drawArrays(e,r,t||this.getSize()),this},o.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},o.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},function(e){e.exports=function(e,t){var r=e.getContext('webgl',t)||e.getContext('experimental-webgl',t);if(!r)throw new Error('This browser does not support webGL. Try using the canvas renderer');return r}},function(e,t,r){e.exports={compileProgram:r(50),defaultValue:r(51),extractAttributes:r(52),extractUniforms:r(53),generateUniformAccessObject:r(54),setPrecision:r(56),mapSize:r(55),mapType:r(28)}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=r(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),i=r(27),d=o(i),l=r(57),u=o(l);s.utils.mixins.delayMixin(s.DisplayObject.prototype,u.default);var p=100,c=2,h=1,g=function(){function e(t){n(this,e),(d.default.tablet||d.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var r=document.createElement('div');r.style.width=p+'px',r.style.height=p+'px',r.style.position='absolute',r.style.top=0+'px',r.style.left=0+'px',r.style.zIndex=c,this.div=r,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener('keydown',this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement('button');t.style.width=h+'px',t.style.height=h+'px',t.style.position='absolute',t.style.top=-1e3+'px',t.style.left=-1e3+'px',t.style.zIndex=2,t.style.backgroundColor='#FF0000',t.title='HOOK DIV',t.addEventListener('focus',function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener('mousemove',this._onMouseMove,!0),window.removeEventListener('keydown',this._onKeyDown,!1),this.renderer.on('postrender',this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this.isActive||this.isMobileAccessabillity||(this.isActive=!1,window.document.removeEventListener('mousemove',this._onMouseMove),window.addEventListener('keydown',this._onKeyDown,!1),this.renderer.off('postrender',this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(!e._accessibleActive&&this.addChild(e),e.renderId=this.renderId);for(var t=e.children,r=t.length-1;0<=r;r--)this.updateAccessibleObjects(t[r])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,r=e.height/this.renderer.height,o=this.div;o.style.left=e.left+'px',o.style.top=e.top+'px',o.style.width=this.renderer.width+'px',o.style.height=this.renderer.height+'px';for(var n=0,a;n<this.children.length;n++)if(a=this.children[n],a.renderId!==this.renderId)a._accessibleActive=!1,s.utils.removeItems(this.children,n,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{o=a._accessibleDiv;var i=a.hitArea,d=a.worldTransform;a.hitArea?(o.style.left=(d.tx+i.x*d.a)*t+'px',o.style.top=(d.ty+i.y*d.d)*r+'px',o.style.width=i.width*d.a*t+'px',o.style.height=i.height*d.d*r+'px'):(i=a.getBounds(),this.capHitArea(i),o.style.left=i.x*t+'px',o.style.top=i.y*r+'px',o.style.width=i.width*t+'px',o.style.height=i.height*r+'px')}this.renderId++}},e.prototype.capHitArea=function(e){0>e.x&&(e.width+=e.x,e.x=0),0>e.y&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement('button'),t.style.width=p+'px',t.style.height=p+'px',t.style.backgroundColor=this.debug?'rgba(255,0,0,0.5)':'transparent',t.style.position='absolute',t.style.zIndex=c,t.style.borderStyle='none',t.addEventListener('click',this._onClick.bind(this)),t.addEventListener('focus',this._onFocus.bind(this)),t.addEventListener('focusout',this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:!e.accessibleTitle&&!e.accessibleHint&&(t.title='displayObject '+this.tabIndex),e.accessibleHint&&t.setAttribute('aria-label',e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,'click',e.eventData)},e.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,'mouseover',e.eventData)},e.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,'mouseout',e.eventData)},e.prototype._onKeyDown=function(t){t.keyCode!==9||this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener('mousemove',this._onMouseMove),window.removeEventListener('keydown',this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();t.default=g,s.WebGLRenderer.registerPlugin('accessibility',g),s.CanvasRenderer.registerPlugin('accessibility',g)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(57);Object.defineProperty(t,'accessibleTarget',{enumerable:!0,get:function(){return o(n).default}});var a=r(104);Object.defineProperty(t,'AccessibilityManager',{enumerable:!0,get:function(){return o(a).default}})},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.atan2,d=Math.sqrt,l=Math.sin,u=Math.cos,p=Math.abs,h=Math.PI;t.__esModule=!0;var c=r(13),g=o(c),f=r(36),y=o(f),m=r(10),_=o(m),x=r(63),b=o(x),v=r(34),T=o(v),S=r(4),E=r(2),P=r(1),C=r(29),w=o(C),A=r(108),I=o(A),M=r(14),R=o(M),O=new S.Matrix,D=new S.Point,k=new Float32Array(4),L=new Float32Array(4),B=function(e){function t(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];n(this,t);var o=a(this,e.call(this));return o.fillAlpha=1,o.lineWidth=0,o.nativeLines=r,o.lineColor=0,o.graphicsData=[],o.tint=16777215,o._prevTint=16777215,o.blendMode=P.BLEND_MODES.NORMAL,o.currentPath=null,o._webGL={},o.isMask=!1,o.boundsPadding=0,o._localBounds=new w.default,o.dirty=0,o.fastRectDirty=-1,o.clearDirty=0,o.boundsDirty=-1,o.cachedSpriteDirty=!1,o._spriteRect=null,o._fastRect=!1,o}return i(t,e),t.prototype.clone=function(){var e=new t;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)e.graphicsData.push(this.graphicsData[r].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},t.prototype.lineStyle=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var o=new S.Polygon(this.currentPath.shape.points.slice(-2));o.closed=!1,this.drawShape(o)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},t.prototype.moveTo=function(e,t){var r=new S.Polygon([e,t]);return r.closed=!1,this.drawShape(r),this},t.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty++,this},t.prototype.quadraticCurveTo=function(e,t,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=20,n=this.currentPath.shape.points,s=0,d=0;0===n.length&&this.moveTo(0,0);for(var l=n[n.length-2],u=n[n.length-1],p=1,i;p<=a;++p)i=p/a,s=l+(e-l)*i,d=u+(t-u)*i,n.push(s+(e+(r-e)*i-s)*i,d+(t+(o-t)*i-d)*i);return this.dirty++,this},t.prototype.bezierCurveTo=function(e,t,r,o,n,a){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i=this.currentPath.shape.points,s=i[i.length-2],d=i[i.length-1];return i.length-=2,(0,I.default)(s,d,e,t,r,o,n,a,i),this.dirty++,this},t.prototype.arcTo=function(e,t,r,o,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var a=this.currentPath.shape.points,i=a[a.length-2],l=a[a.length-1],u=l-t,c=i-e,h=o-t,g=r-e,f=p(u*g-c*h);if(1e-8>f||0===n)(a[a.length-2]!==e||a[a.length-1]!==t)&&a.push(e,t);else{var y=u*u+c*c,m=h*h+g*g,_=u*h+c*g,x=n*d(y)/f,b=n*d(m)/f,v=x*_/y,T=b*_/m,S=x*g+b*c,E=x*h+b*u,P=s(u*(b+v)-E,c*(b+v)-S),C=s(h*(x+T)-E,g*(x+T)-S);this.arc(S+e,E+t,n,P,C,c*h>g*u)}return this.dirty++,this},t.prototype.arc=function(e,t,r,o,n){var a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(o===n)return this;!a&&n<=o?n+=2*h:a&&o<=n&&(o+=2*h);var d=n-o,g=40*Math.ceil(p(d)/(2*h));if(0==d)return this;var f=e+u(o)*r,y=t+l(o)*r,m=this.currentPath?this.currentPath.shape.points:null;m?(m[m.length-2]!==f||m[m.length-1]!==y)&&m.push(f,y):(this.moveTo(f,y),m=this.currentPath.shape.points);for(var _=d/(2*g),x=u(_),b=l(_),v=g-1,T=0;T<=v;++T){var i=T+v%1/v*T,S=_+o+2*_*i,E=u(S),c=-l(S);m.push((x*E+b*c)*r+e,(x*-c+b*E)*r+t)}return this.dirty++,this},t.prototype.beginFill=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(e,t,r,o){return this.drawShape(new S.Rectangle(e,t,r,o)),this},t.prototype.drawRoundedRect=function(e,t,r,o,n){return this.drawShape(new S.RoundedRectangle(e,t,r,o,n)),this},t.prototype.drawCircle=function(e,t,r){return this.drawShape(new S.Circle(e,t,r)),this},t.prototype.drawEllipse=function(e,t,r,o){return this.drawShape(new S.Ellipse(e,t,r,o)),this},t.prototype.drawPolygon=function(e){var t=e,r=!0;if(t instanceof S.Polygon&&(r=t.closed,t=t.points),!Array.isArray(t)){t=Array(arguments.length);for(var o=0;o<t.length;++o)t[o]=arguments[o]}var n=new S.Polygon(t);return n.closed=r,this.drawShape(n),this},t.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===P.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new T.default(new _.default(_.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var o=k,n=L;(0,E.hex2rgb)(this.graphicsData[0].fillColor,o),(0,E.hex2rgb)(this.tint,n),o[0]*=n[0],o[1]*=n[1],o[2]*=n[2],r.tint=(0,E.rgb2hex)(o)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=t.width,r._texture._frame.height=t.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-t.x/t.width,-t.y/t.height),r._onAnchorUpdate(),r._renderWebGL(e)},t.prototype._renderCanvas=function(e){!0===this.isMask||e.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,D);for(var t=this.graphicsData,r=0,o;r<t.length;++r)if((o=t[r],!!o.fill)&&o.shape&&o.shape.contains(D.x,D.y)){if(o.holes)for(var n=0,a;n<o.holes.length;n++)if(a=o.holes[n],a.contains(D.x,D.y))return!1;return!0}return!1},t.prototype.updateLocalBounds=function(){var e=Infinity,t=-Infinity,r=Infinity,o=-Infinity;if(this.graphicsData.length)for(var n=0,a=0,s=0,l=0,u=0,c=0;c<this.graphicsData.length;c++){var i=this.graphicsData[c],h=i.type,g=i.lineWidth;if(n=i.shape,h===P.SHAPES.RECT||h===P.SHAPES.RREC)a=n.x-g/2,s=n.y-g/2,l=n.width+g,u=n.height+g,e=a<e?a:e,t=a+l>t?a+l:t,r=s<r?s:r,o=s+u>o?s+u:o;else if(h===P.SHAPES.CIRC)a=n.x,s=n.y,l=n.radius+g/2,u=n.radius+g/2,e=a-l<e?a-l:e,t=a+l>t?a+l:t,r=s-u<r?s-u:r,o=s+u>o?s+u:o;else if(h===P.SHAPES.ELIP)a=n.x,s=n.y,l=n.width+g/2,u=n.height+g/2,e=a-l<e?a-l:e,t=a+l>t?a+l:t,r=s-u<r?s-u:r,o=s+u>o?s+u:o;else for(var f=n.points,y=0,m=0,_=0,x=0,b=0,v=0,T=0,S=0,E=0;E+2<f.length;E+=2)(a=f[E],s=f[E+1],y=f[E+2],m=f[E+3],_=p(y-a),x=p(m-s),u=g,l=d(_*_+x*x),!(1e-9>l))&&(b=(u/l*x+_)/2,v=(u/l*_+x)/2,T=(y+a)/2,S=(m+s)/2,e=T-b<e?T-b:e,t=T+b>t?T+b:t,r=S-v<r?S-v:r,o=S+v>o?S+v:o)}else e=0,t=0,r=0,o=0;var C=this.boundsPadding;this._localBounds.minX=e-C,this._localBounds.maxX=t+C,this._localBounds.minY=r-C,this._localBounds.maxY=o+C},t.prototype.drawShape=function(e){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var t=new b.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e);return this.graphicsData.push(t),t.type===P.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),o=y.default.create(r.width,r.height,e,t);N||(N=new R.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(O),O.invert(),O.tx-=r.x,O.ty-=r.y,N.render(this,o,!0,O);var n=_.default.fromCanvas(o.baseTexture._canvasRenderTarget.canvas,e,'graphics');return n.baseTexture.resolution=t,n.baseTexture.update(),n},t.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},t.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var o in this._webgl)for(var n=0;n<this._webgl[o].data.length;++n)this._webgl[o].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},t}(g.default),N;t.default=B,B._SPRITE_TEXTURE=null},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(14),a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=r(1),i=function(){function e(t){o(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,r=t.context,o=e.worldAlpha,n=e.transform.worldTransform,a=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var d=0;d<e.graphicsData.length;d++){var i=e.graphicsData[d],l=i.shape,u=i._fillTint,p=i._lineTint;if(r.lineWidth=i.lineWidth,i.type===s.SHAPES.POLY){r.beginPath(),this.renderPolygon(l.points,l.closed,r);for(var c=0;c<i.holes.length;c++)this.renderPolygon(i.holes[c].points,!0,r);i.fill&&(r.globalAlpha=i.fillAlpha*o,r.fillStyle='#'+('00000'+(0|u).toString(16)).substr(-6),r.fill()),i.lineWidth&&(r.globalAlpha=i.lineAlpha*o,r.strokeStyle='#'+('00000'+(0|p).toString(16)).substr(-6),r.stroke())}else if(i.type===s.SHAPES.RECT)(i.fillColor||0===i.fillColor)&&(r.globalAlpha=i.fillAlpha*o,r.fillStyle='#'+('00000'+(0|u).toString(16)).substr(-6),r.fillRect(l.x,l.y,l.width,l.height)),i.lineWidth&&(r.globalAlpha=i.lineAlpha*o,r.strokeStyle='#'+('00000'+(0|p).toString(16)).substr(-6),r.strokeRect(l.x,l.y,l.width,l.height));else if(i.type===s.SHAPES.CIRC)r.beginPath(),r.arc(l.x,l.y,l.radius,0,2*Math.PI),r.closePath(),i.fill&&(r.globalAlpha=i.fillAlpha*o,r.fillStyle='#'+('00000'+(0|u).toString(16)).substr(-6),r.fill()),i.lineWidth&&(r.globalAlpha=i.lineAlpha*o,r.strokeStyle='#'+('00000'+(0|p).toString(16)).substr(-6),r.stroke());else if(i.type===s.SHAPES.ELIP){var g=2*l.width,f=2*l.height,h=l.x-g/2,m=l.y-f/2;r.beginPath();var y=0.5522848,_=g/2*y,x=f/2*y,b=h+g,v=m+f,T=h+g/2,S=m+f/2;r.moveTo(h,S),r.bezierCurveTo(h,S-x,T-_,m,T,m),r.bezierCurveTo(T+_,m,b,S-x,b,S),r.bezierCurveTo(b,S+x,T+_,v,T,v),r.bezierCurveTo(T-_,v,h,S+x,h,S),r.closePath(),i.fill&&(r.globalAlpha=i.fillAlpha*o,r.fillStyle='#'+('00000'+(0|u).toString(16)).substr(-6),r.fill()),i.lineWidth&&(r.globalAlpha=i.lineAlpha*o,r.strokeStyle='#'+('00000'+(0|p).toString(16)).substr(-6),r.stroke())}else if(i.type===s.SHAPES.RREC){var E=l.x,P=l.y,C=l.width,w=l.height,A=l.radius,I=0|Math.min(C,w)/2;A=A>I?I:A,r.beginPath(),r.moveTo(E,P+A),r.lineTo(E,P+w-A),r.quadraticCurveTo(E,P+w,E+A,P+w),r.lineTo(E+C-A,P+w),r.quadraticCurveTo(E+C,P+w,E+C,P+w-A),r.lineTo(E+C,P+A),r.quadraticCurveTo(E+C,P,E+C-A,P),r.lineTo(E+A,P),r.quadraticCurveTo(E,P,E,P+A),r.closePath(),(i.fillColor||0===i.fillColor)&&(r.globalAlpha=i.fillAlpha*o,r.fillStyle='#'+('00000'+(0|u).toString(16)).substr(-6),r.fill()),i.lineWidth&&(r.globalAlpha=i.lineAlpha*o,r.strokeStyle='#'+('00000'+(0|p).toString(16)).substr(-6),r.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(255&e.tint>>16)/255,r=(255&e.tint>>8)/255,o=(255&e.tint)/255,n=0;n<e.graphicsData.length;++n){var a=e.graphicsData[n],i=0|a.fillColor,s=0|a.lineColor;a._fillTint=(255*((255&i>>16)/255*t)<<16)+(255*((255&i>>8)/255*r)<<8)+255*((255&i)/255*o),a._lineTint=(255*((255&s>>16)/255*t)<<16)+(255*((255&s>>8)/255*r)<<8)+255*((255&s)/255*o)}},e.prototype.renderPolygon=function(e,t,r){r.moveTo(e[0],e[1]);for(var o=1;o<e.length/2;++o)r.lineTo(e[2*o],e[2*o+1]);t&&r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();t.default=i,a.default.registerPlugin('graphics',i)},function(e,t){'use strict';t.__esModule=!0,t.default=function(e,t,r,o,a,s,d,l){var u=8<arguments.length&&arguments[8]!==void 0?arguments[8]:[],p=20,n=0,c=0,h=0,g=0,f=0;u.push(e,t);for(var y=1,i=0;y<=p;++y)i=y/p,n=1-i,c=n*n,h=c*n,g=i*i,f=g*i,u.push(h*e+3*c*i*r+3*n*g*a+f*d,h*t+3*c*i*o+3*n*g*s+f*l);return u}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(2),d=r(1),l=r(21),u=o(l),p=r(20),c=o(p),h=r(110),g=o(h),f=r(111),y=o(f),m=r(113),_=o(m),x=r(114),b=o(x),v=r(115),T=o(v),S=r(112),E=o(S),P=function(e){function t(r){n(this,t);var o=a(this,e.call(this,r));return o.graphicsDataPool=[],o.primitiveShader=null,o.gl=r.gl,o.CONTEXT_UID=0,o}return i(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new y.default(this.gl)},t.prototype.destroy=function(){u.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,r=t.gl,o=e._webGL[this.CONTEXT_UID],a;o&&e.dirty===o.dirty||(this.updateGraphics(e),o=e._webGL[this.CONTEXT_UID]);var d=this.primitiveShader;t.bindShader(d),t.state.setBlendMode(e.blendMode);for(var l=0,i=o.data.length;l<i;l++){a=o.data[l];var n=a.shader;t.bindShader(n),n.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),n.uniforms.tint=(0,s.hex2rgb)(e.tint),n.uniforms.alpha=e.worldAlpha,t.bindVao(a.vao),a.nativeLines?r.drawArrays(r.LINES,0,a.points.length/6):a.vao.draw(r.TRIANGLE_STRIP,a.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var o=0;o<r.data.length;o++)this.graphicsDataPool.push(r.data[o]);r.data.length=0,r.lastIndex=0}for(var n=void 0,a=void 0,i=r.lastIndex,s;i<e.graphicsData.length;i++)s=e.graphicsData[i],n=this.getWebGLData(r,0),s.nativeLines&&s.lineWidth&&(a=this.getWebGLData(r,0,!0),r.lastIndex++),s.type===d.SHAPES.POLY&&(0,_.default)(s,n,a),s.type===d.SHAPES.RECT?(0,b.default)(s,n,a):s.type===d.SHAPES.CIRC||s.type===d.SHAPES.ELIP?(0,E.default)(s,n,a):s.type===d.SHAPES.RREC&&(0,T.default)(s,n,a),r.lastIndex++;this.renderer.bindVao(null);for(var l=0;l<r.data.length;l++)n=r.data[l],n.dirty&&n.upload()},t.prototype.getWebGLData=function(e,t,r){var o=e.data[e.data.length-1];return(!o||o.nativeLines!==r||3.2e5<o.points.length)&&(o=this.graphicsDataPool.pop()||new g.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),o.nativeLines=r,o.reset(t),e.data.push(o)),o.dirty=!0,o},t}(u.default);t.default=P,c.default.registerPlugin('graphics',P)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(7),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=function(){function e(t,r,n){o(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new a.default.VertexArrayObject(t,n).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,r.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();t.default=i},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(12),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=function(e){function t(r){return o(this,t),n(this,e.call(this,r,'attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}','varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}'))}return a(t,e),t}(s.default);t.default=d},function(e,t,r){'use strict';var o=Math.sqrt,n=Math.floor,a=Math.sin,s=Math.cos;t.__esModule=!0,t.default=function(e,t,p){var c=e.shape,h=c.x,f=c.y,y,m;if(e.type===l.SHAPES.CIRC?(y=c.radius,m=c.radius):(y=c.width,m=c.height),0!==y&&0!==m){var _=n(30*o(c.radius))||n(15*o(c.width+c.height)),x=2*Math.PI/_;if(e.fill){var v=(0,u.hex2rgb)(e.fillColor),T=e.fillAlpha,S=v[0]*T,r=v[1]*T,g=v[2]*T,b=t.points,E=t.indices,P=b.length/6;E.push(P);for(var C=0;C<_+1;C++)b.push(h,f,S,r,g,T),b.push(h+a(x*C)*y,f+s(x*C)*m,S,r,g,T),E.push(P++,P++);E.push(P-1)}if(e.lineWidth){var i=e.points;e.points=[];for(var w=0;w<_+1;w++)e.points.push(h+a(x*w)*y,f+s(x*w)*m);(0,d.default)(e,t,p),e.points=i}}};var i=r(19),d=function(e){return e&&e.__esModule?e:{default:e}}(i),l=r(1),u=r(2)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e,t,o){e.points=e.shape.points.slice();var n=e.points;if(e.fill&&6<=n.length){for(var l=[],u=e.holes,p=0,i;p<u.length;p++)i=u[p],l.push(n.length/2),n=n.concat(i.points);var c=t.points,h=t.indices,f=n.length/2,y=(0,s.hex2rgb)(e.fillColor),m=e.fillAlpha,_=y[0]*m,r=y[1]*m,g=y[2]*m,x=(0,d.default)(n,l,2);if(!x)return;for(var b=c.length/6,v=0;v<x.length;v+=3)h.push(x[v]+b),h.push(x[v]+b),h.push(x[v+1]+b),h.push(x[v+2]+b),h.push(x[v+2]+b);for(var T=0;T<f;T++)c.push(n[2*T],n[2*T+1],_,r,g,m)}0<e.lineWidth&&(0,a.default)(e,t,o)};var n=r(19),a=o(n),s=r(2),i=r(45),d=o(i)},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(e,t,o){var i=e.shape,s=i.x,d=i.y,l=i.width,u=i.height;if(e.fill){var p=(0,a.hex2rgb)(e.fillColor),c=e.fillAlpha,h=p[0]*c,r=p[1]*c,g=p[2]*c,f=t.points,y=t.indices,m=f.length/6;f.push(s,d),f.push(h,r,g,c),f.push(s+l,d),f.push(h,r,g,c),f.push(s,d+u),f.push(h,r,g,c),f.push(s+l,d+u),f.push(h,r,g,c),y.push(m,m,m+1,m+2,m+3,m+3)}if(e.lineWidth){var _=e.points;e.points=[s,d,s+l,d,s+l,d+u,s,d+u,s,d],(0,n.default)(e,t,o),e.points=_}};var o=r(19),n=function(e){return e&&e.__esModule?e:{default:e}}(o),a=r(2)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){return e+(t-e)*r}function n(e,t,r,o,s,d){for(var l=6<arguments.length&&arguments[6]!==void 0?arguments[6]:[],u=20,n=l,p=0,c=0,h=0,g=0,f=0,m=0,y=0,i=0;y<=u;++y)i=y/u,p=a(e,r,i),c=a(t,o,i),h=a(r,s,i),g=a(o,d,i),f=a(p,h,i),m=a(c,g,i),n.push(f,m);return n}t.__esModule=!0,t.default=function(e,t,o){var a=e.shape,d=a.x,p=a.y,c=a.width,h=a.height,f=a.radius,y=[];if(y.push(d,p+f),n(d,p+h-f,d,p+h,d+f,p+h,y),n(d+c-f,p+h,d+c,p+h,d+c,p+h-f,y),n(d+c,p+f,d+c,p,d+c-f,p,y),n(d+f,p,d,p,d,p+f+1e-10,y),e.fill){for(var m=(0,u.hex2rgb)(e.fillColor),_=e.fillAlpha,x=m[0]*_,r=m[1]*_,g=m[2]*_,b=t.points,v=t.indices,T=b.length/6,S=(0,s.default)(y,null,2),E=0,i=S.length;E<i;E+=3)v.push(S[E]+T),v.push(S[E]+T),v.push(S[E+1]+T),v.push(S[E+2]+T),v.push(S[E+2]+T);for(var P=0,C=y.length;P<C;P++)b.push(y[P],y[++P],x,r,g,_)}if(e.lineWidth){var w=e.points;e.points=y,(0,l.default)(e,t,o),e.points=w}};var i=r(45),s=o(i),d=r(19),l=o(d),u=r(2)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(33),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(1),s=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;o(this,e),this.x=t,this.y=r,this.radius=n,this.type=i.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(0>=this.radius)return!1;var r=this.radius*this.radius,o=this.x-e,n=this.y-t;return o*=o,n*=n,o+n<=r},e.prototype.getBounds=function(){return new a.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}();t.default=s},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(33),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(1),s=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;o(this,e),this.x=t,this.y=r,this.width=n,this.height=a,this.type=i.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(0>=this.width||0>=this.height)return!1;var r=(e-this.x)/this.width,o=(t-this.y)/this.height;return r*=r,o*=o,1>=r+o},e.prototype.getBounds=function(){return new a.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();t.default=s},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(32),a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=r(1),i=function(){function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(o(this,e),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof a.default){for(var d=[],l=0,i=r.length;l<i;l++)d.push(r[l].x,r[l].y);r=d}this.closed=!0,this.points=r,this.type=s.SHAPES.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var e=this.points;(e[0]!==e[e.length-2]||e[1]!==e[e.length-1])&&e.push(e[0],e[1])},e.prototype.contains=function(e,t){for(var r=!1,o=this.points.length/2,n=0,a=o-1;n<o;a=n++){var i=this.points[2*n],s=this.points[2*n+1],d=this.points[2*a],l=this.points[2*a+1];s>t!=l>t&&e<(d-i)*((t-s)/(l-s))+i&&(r=!r)}return r},e}();t.default=i},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(1),a=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;o(this,e),this.x=t,this.y=r,this.width=a,this.height=i,this.radius=s,this.type=n.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(0>=this.width||0>=this.height)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),o=t-(this.y+this.radius),n=this.radius*this.radius;if(r*r+o*o<=n)return!0;if(r=e-(this.x+this.width-this.radius),r*r+o*o<=n)return!0;if(o=t-(this.y+this.height-this.radius),r*r+o*o<=n)return!0;if(r=e-(this.x+this.radius),r*r+o*o<=n)return!0}return!1},e}();t.default=a},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(1),a=function(){function e(t){o(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,o=e.transform.worldTransform,n=t.resolution;t.context.setTransform(o.a*n,o.b*n,o.c*n,o.d*n,o.tx*n,o.ty*n),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var o=0;o<r;o++){var a=e.graphicsData[o],i=a.shape;if(a.type===n.SHAPES.POLY){var s=i.points;t.moveTo(s[0],s[1]);for(var d=1;d<s.length/2;d++)t.lineTo(s[2*d],s[2*d+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(a.type===n.SHAPES.RECT)t.rect(i.x,i.y,i.width,i.height),t.closePath();else if(a.type===n.SHAPES.CIRC)t.arc(i.x,i.y,i.radius,0,2*Math.PI),t.closePath();else if(a.type===n.SHAPES.ELIP){var l=2*i.width,u=2*i.height,p=i.x-l/2,c=i.y-u/2,h=0.5522848,g=l/2*h,f=u/2*h,y=p+l,m=c+u,_=p+l/2,x=c+u/2;t.moveTo(p,x),t.bezierCurveTo(p,x-f,_-g,c,_,c),t.bezierCurveTo(_+g,c,y,x-f,y,x),t.bezierCurveTo(y,x+f,_+g,m,_,m),t.bezierCurveTo(_-g,m,p,x+f,p,x),t.closePath()}else if(a.type===n.SHAPES.RREC){var b=i.x,v=i.y,T=i.width,S=i.height,E=i.radius,P=0|Math.min(T,S)/2;E=E>P?P:E,t.moveTo(b,v+E),t.lineTo(b,v+S-E),t.quadraticCurveTo(b,v+S,b+E,v+S),t.lineTo(b+T-E,v+S),t.quadraticCurveTo(b+T,v+S,b+T,v+S-E),t.lineTo(b+T,v+E),t.quadraticCurveTo(b+T,v,b+T-E,v),t.lineTo(b+E,v),t.quadraticCurveTo(b,v,b,v+E),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore()},e.prototype.destroy=function(){},e}();t.default=a},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,a.default)()?(e[o.BLEND_MODES.NORMAL]='source-over',e[o.BLEND_MODES.ADD]='lighter',e[o.BLEND_MODES.MULTIPLY]='multiply',e[o.BLEND_MODES.SCREEN]='screen',e[o.BLEND_MODES.OVERLAY]='overlay',e[o.BLEND_MODES.DARKEN]='darken',e[o.BLEND_MODES.LIGHTEN]='lighten',e[o.BLEND_MODES.COLOR_DODGE]='color-dodge',e[o.BLEND_MODES.COLOR_BURN]='color-burn',e[o.BLEND_MODES.HARD_LIGHT]='hard-light',e[o.BLEND_MODES.SOFT_LIGHT]='soft-light',e[o.BLEND_MODES.DIFFERENCE]='difference',e[o.BLEND_MODES.EXCLUSION]='exclusion',e[o.BLEND_MODES.HUE]='hue',e[o.BLEND_MODES.SATURATION]='saturate',e[o.BLEND_MODES.COLOR]='color',e[o.BLEND_MODES.LUMINOSITY]='luminosity'):(e[o.BLEND_MODES.NORMAL]='source-over',e[o.BLEND_MODES.ADD]='lighter',e[o.BLEND_MODES.MULTIPLY]='source-over',e[o.BLEND_MODES.SCREEN]='source-over',e[o.BLEND_MODES.OVERLAY]='source-over',e[o.BLEND_MODES.DARKEN]='source-over',e[o.BLEND_MODES.LIGHTEN]='source-over',e[o.BLEND_MODES.COLOR_DODGE]='source-over',e[o.BLEND_MODES.COLOR_BURN]='source-over',e[o.BLEND_MODES.HARD_LIGHT]='source-over',e[o.BLEND_MODES.SOFT_LIGHT]='source-over',e[o.BLEND_MODES.DIFFERENCE]='source-over',e[o.BLEND_MODES.EXCLUSION]='source-over',e[o.BLEND_MODES.HUE]='source-over',e[o.BLEND_MODES.SATURATION]='source-over',e[o.BLEND_MODES.COLOR]='source-over',e[o.BLEND_MODES.LUMINOSITY]='source-over'),e};var o=r(1),n=r(68),a=function(e){return e&&e.__esModule?e:{default:e}}(n)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(1),a=r(3),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){o(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=i.default.GC_MAX_IDLE,this.checkCountMax=i.default.GC_MAX_CHECK_COUNT,this.mode=i.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode===n.GC_MODES.MANUAL||(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,o=0,n;o<t.length;o++)n=t[o],!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[o]=null,r=!0);if(r){for(var a=0,i=0;i<t.length;i++)null!==t[i]&&(t[a++]=t[i]);t.length=a}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;0<=r;r--)this.unload(e.children[r])},e}();t.default=s},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(7),a=r(1),i=r(22),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=r(2),l=function(){function e(t){o(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var r=this.gl,o=!!e._glRenderTargets;if(!e.hasLoaded)return null;var d=this.renderer.boundTextures;if(void 0===t){t=0;for(var l=0;l<d.length;++l)if(d[l]===e){t=l;break}}d[t]=e,r.activeTexture(r.TEXTURE0+t);var i=e._glTextures[this.renderer.CONTEXT_UID];if(!i){if(o){var u=new s.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);u.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=u,i=u.texture}else i=new n.GLTexture(this.gl,null,null,null,null),i.bind(t),i.premultiplyAlpha=!0,i.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=i,e.on('update',this.updateTexture,this),e.on('dispose',this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&i.enableMipmap(),e.wrapMode===a.WRAP_MODES.CLAMP?i.enableWrapClamp():e.wrapMode===a.WRAP_MODES.REPEAT?i.enableWrapRepeat():i.enableWrapMirrorRepeat()):i.enableWrapClamp(),e.scaleMode===a.SCALE_MODES.NEAREST?i.enableNearestScaling():i.enableLinearScaling()}else o?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):i.upload(e.source);return i},e.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e,!!e.hasLoaded)&&e._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(e),e._glTextures[this.renderer.CONTEXT_UID].destroy(),e.off('update',this.updateTexture,this),e.off('dispose',this.destroyTexture,this),delete e._glTextures[this.renderer.CONTEXT_UID],!t)){var r=this._managedTextures.indexOf(e);-1!==r&&(0,d.removeItems)(this._managedTextures,r,1)}},e.prototype.removeAll=function(){for(var e=0,t;e<this._managedTextures.length;++e)t=this._managedTextures[e],t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]},e.prototype.destroy=function(){for(var e=0,t;e<this._managedTextures.length;++e)t=this._managedTextures[e],this.destroyTexture(t,!0),t.off('update',this.updateTexture,this),t.off('dispose',this.destroyTexture,this);this._managedTextures=null},e}();t.default=l},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(131),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=0,s=1,d=2,l=3,u=4,p=function(){function e(t){o(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,a.default)(t),this.nativeVaoExtension=t.getExtension('OES_vertex_array_object')||t.getExtension('MOZ_OES_vertex_array_object')||t.getExtension('WEBKIT_OES_vertex_array_object')}return e.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},e.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},e.prototype.setState=function(e){this.setBlend(e[i]),this.setDepthTest(e[s]),this.setFrontFace(e[d]),this.setCullFace(e[l]),this.setBlendMode(e[u])},e.prototype.setBlend=function(e){e=e?1:0,this.activeState[i]===e||(this.activeState[i]=e,this.gl[e?'enable':'disable'](this.gl.BLEND))},e.prototype.setBlendMode=function(e){e===this.activeState[u]||(this.activeState[u]=e,this.gl.blendFunc(this.blendModes[e][0],this.blendModes[e][1]))},e.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[s]===e||(this.activeState[s]=e,this.gl[e?'enable':'disable'](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(e){e=e?1:0,this.activeState[l]===e||(this.activeState[l]=e,this.gl[e?'enable':'disable'](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[d]===e||(this.activeState[d]=e,this.gl.frontFace(this.gl[e?'CW':'CCW']))},e.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();t.default=p},function(e,t,r){'use strict';function o(e){for(var t=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,r={},o=void 0,n=e.replace(/\s+/g,' ').split(/\s*;\s*/),a=0,s;a<n.length;a++)if(s=n[a].trim(),-1<s.indexOf('uniform')){var d=s.split(' '),l=d[1],u=d[2],p=1;-1<u.indexOf('[')&&(o=u.split(/\[|]/),u=o[0],p*=+o[1]),u.match(t)||(r[u]={value:i(l,p),name:u,type:l})}return r}t.__esModule=!0,t.default=function(e,t,r){var n=o(e,r),a=o(t,r);return Object.assign(n,a)};var n=r(7),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a.default.shader.defaultValue},function(e,t,r){'use strict';t.__esModule=!0,t.calculateScreenSpaceMatrix=function(e,t,r){var o=e.identity();return o.translate(t.x/r.width,t.y/r.height),o.scale(r.width,r.height),o},t.calculateNormalizedScreenSpaceMatrix=function(e,t,r){var o=e.identity();o.translate(t.x/r.width,t.y/r.height);var n=r.width/t.width,a=r.height/t.height;return o.scale(n,a),o},t.calculateSpriteMatrix=function(e,t,r,n){var a=n.worldTransform.copy(o.Matrix.TEMP_MATRIX),i=n._texture.baseTexture,s=e.identity(),d=r.height/r.width;s.translate(t.x/r.width,t.y/r.height),s.scale(1,d);var l=r.width/i.width,u=r.height/i.height;return a.tx/=i.width*l,a.ty/=i.width*l,a.invert(),s.prepend(a),s.scale(1,1/d),s.scale(l,u),s.translate(n.anchor.x,n.anchor.y),s};var o=r(4)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var s=r(15),d=o(s),l=r(22),u=o(l),p=r(71),c=o(p),h=r(4),g=r(12),f=o(g),y=r(126),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y),_=r(26),x=o(_),b=function e(){i(this,e),this.renderTarget=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[],this.target=null,this.resolution=1},v=function(e){function t(r){i(this,t);var o=n(this,e.call(this,r));return o.gl=o.renderer.gl,o.quad=new c.default(o.gl,r.state.attribState),o.shaderCache={},o.pool={},o.filterData=null,o}return a(t,e),t.prototype.pushFilter=function(e,t){var r=this.renderer,o=this.filterData;if(!o){o=this.renderer._activeRenderTarget.filterStack;var n=new b;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=o={index:0,stack:[n]},this.filterData=o}var a=o.stack[++o.index];a||(a=o.stack[o.index]=new b);var i=t[0].resolution,s=0|t[0].padding,d=e.filterArea||e.getBounds(!0),l=a.sourceFrame,u=a.destinationFrame;l.x=(0|d.x*i)/i,l.y=(0|d.y*i)/i,l.width=(0|d.width*i)/i,l.height=(0|d.height*i)/i,o.stack[0].renderTarget.transform||t[0].autoFit&&l.fit(o.stack[0].destinationFrame),l.pad(s),u.width=l.width,u.height=l.height;var p=this.getPotRenderTarget(r.gl,l.width,l.height,i);a.target=e,a.filters=t,a.resolution=i,a.renderTarget=p,p.setFrame(u,l),r.bindRenderTarget(p),p.clear()},t.prototype.popFilter=function(){var e=this.filterData,r=e.stack[e.index-1],o=e.stack[e.index];this.quad.map(o.renderTarget.size,o.sourceFrame).upload();var n=o.filters;if(1===n.length)n[0].apply(this,o.renderTarget,r.renderTarget,!1,o),this.freePotRenderTarget(o.renderTarget);else{var a=o.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,o.sourceFrame.width,o.sourceFrame.height,o.resolution);s.setFrame(o.destinationFrame,o.sourceFrame),s.clear();var d=0;for(d=0;d<n.length-1;++d){n[d].apply(this,a,s,!0,o);var i=a;a=s,s=i}n[d].apply(this,a,r.renderTarget,!1,o),this.freePotRenderTarget(a),this.freePotRenderTarget(s)}e.index--,0===e.index&&(this.filterData=null)},t.prototype.applyFilter=function(e,t,r,o){var n=this.renderer,a=n.gl,i=e.glShaders[n.CONTEXT_UID];i||(e.glShaderKey?(i=this.shaderCache[e.glShaderKey],!i&&(i=new f.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[n.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=i)):i=e.glShaders[n.CONTEXT_UID]=new f.default(this.gl,e.vertexSrc,e.fragmentSrc),n.bindVao(null),this.quad.initVao(i)),n.bindVao(this.quad.vao),n.bindRenderTarget(r),o&&(a.disable(a.SCISSOR_TEST),n.clear(),a.enable(a.SCISSOR_TEST)),r===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(i);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(i,e),n.state.setBlendMode(e.blendMode),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),a.bindTexture(a.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(e,t){var r=t.uniformData,o=t.uniforms,n=1,a;if(e.uniforms.filterArea){a=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=a.renderTarget.size.width,s[1]=a.renderTarget.size.height,s[2]=a.sourceFrame.x,s[3]=a.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){a=a||this.filterData.stack[this.filterData.index];var d=e.uniforms.filterClamp;d[0]=0,d[1]=0,d[2]=(a.sourceFrame.width-1)/a.renderTarget.size.width,d[3]=(a.sourceFrame.height-1)/a.renderTarget.size.height,e.uniforms.filterClamp=d}for(var l in r)if('sampler2D'===r[l].type&&0!==o[l]){if(o[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(o[l].baseTexture,n);else{e.uniforms[l]=n;var i=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],i.activeTexture(i.TEXTURE0+n),o[l].texture.bind()}n++}else if('mat3'===r[l].type)e.uniforms[l]=void 0===o[l].a?o[l]:o[l].toArray(!0);else if('vec2'!==r[l].type)'float'===r[l].type?e.uniforms.data[l].value!==r[l]&&(e.uniforms[l]=o[l]):e.uniforms[l]=o[l];else if(void 0!==o[l].x){var u=e.uniforms[l]||new Float32Array(2);u[0]=o[l].x,u[1]=o[l].y,e.uniforms[l]=u}else e.uniforms[l]=o[l]},t.prototype.getRenderTarget=function(e,t){var r=this.filterData.stack[this.filterData.index],o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,t||r.resolution);return o.setFrame(r.destinationFrame,r.sourceFrame),o},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return m.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return m.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(e,t){var r=this.filterData.stack[this.filterData.index];return m.calculateSpriteMatrix(e,r.sourceFrame,r.renderTarget.size,t)},t.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},t.prototype.getPotRenderTarget=function(e,t,r,o){t=x.default.nextPow2(t*o),r=x.default.nextPow2(r*o);var n=(65535&t)<<16|65535&r;this.pool[n]||(this.pool[n]=[]);var a=this.pool[n].pop();if(!a){var i=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),a=new u.default(e,t,r,null,1),e.bindTexture(e.TEXTURE_2D,i._glTextures[this.renderer.CONTEXT_UID].texture)}return a.resolution=o,a.defaultFrame.width=a.size.width=t/o,a.defaultFrame.height=a.size.height=r/o,a},t.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){var t=e.size.width*e.resolution,r=e.size.height*e.resolution;this.pool[(65535&t)<<16|65535&r].push(e)},t}(d.default);t.default=v},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(15),d=o(s),l=r(70),u=o(l),p=function(e){function t(r){n(this,t);var o=a(this,e.call(this,r));return o.scissor=!1,o.scissorData=null,o.scissorRenderTarget=null,o.enableScissor=!0,o.alphaMaskPool=[],o.alphaMaskIndex=0,o}return i(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,o=Math.atan2(r.b,r.a);o=Math.round(o*(180/Math.PI)),o%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new u.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,o=t.getBounds();o.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(o.x*n,(r.root?r.size.height-o.y-o.height:o.y)*n,o.width*n,o.height*n),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(d.default);t.default=p},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(15),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=function(e){function t(r){o(this,t);var a=n(this,e.call(this,r));return a.stencilMaskStack=null,a}return a(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack;0===r.length&&(t.enable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.stencilFunc(t.ALWAYS,1,1)),r.push(e),t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,r.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack,r=t.pop();0===t.length?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(r),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,t.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP))},t.prototype.destroy=function(){s.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(s.default);t.default=d},function(e,t,r){'use strict';function o(e){for(var t='',r=0;r<e;++r)0<r&&(t+='\nelse '),r<e-1&&(t+='if(test == '+r+'.0){}');return t}t.__esModule=!0,t.default=function(e,t){var r=!t;if(0===e)throw new Error('Invalid value of `0` passed to `checkMaxIfStatementsInShader`');if(r){var n=document.createElement('canvas');n.width=1,n.height=1,t=a.default.createContext(n)}for(var s=t.createShader(t.FRAGMENT_SHADER),d;d=i.replace(/%forloop%/gi,o(e)),t.shaderSource(s,d),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS);)e=0|e/2;return r&&t.getExtension('WEBGL_lose_context')&&t.getExtension('WEBGL_lose_context').loseContext(),e};var n=r(7),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i='precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}'},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t[o.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[o.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[o.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[o.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t};var o=r(1)},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t[o.DRAW_MODES.POINTS]=e.POINTS,t[o.DRAW_MODES.LINES]=e.LINES,t[o.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[o.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[o.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[o.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[o.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var o=r(1)},function(e,t){'use strict';t.__esModule=!0,t.default=function(e){var t=e.getContextAttributes();t.stencil||console.warn('Provided WebGL context does not have a stencil buffer, masks may not render correctly')}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=r(14),i=o(a),s=r(1),d=r(4),l=r(35),u=o(l),p=new d.Matrix,c=function(){function e(t){n(this,e),this.renderer=t}return e.prototype.render=function(e){var t=e._texture,r=this.renderer,o=t._frame.width,n=t._frame.height,a=e.transform.worldTransform,i=0,l=0;if(!(0>=t.orig.width||0>=t.orig.height||!t.baseTexture.source)&&(r.setBlendMode(e.blendMode),t.valid)){r.context.globalAlpha=e.worldAlpha;var c=t.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==c&&(r.context[r.smoothProperty]=c),t.trim?(i=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,l=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(i=(0.5-e.anchor.x)*t.orig.width,l=(0.5-e.anchor.y)*t.orig.height),t.rotate&&(a.copy(p),a=p,d.GroupD8.matrixAppendRotationInv(a,t.rotate,i,l),i=0,l=0),i-=o/2,l-=n/2,r.roundPixels?(r.context.setTransform(a.a,a.b,a.c,a.d,0|a.tx*r.resolution,0|a.ty*r.resolution),i|=0,l|=0):r.context.setTransform(a.a,a.b,a.c,a.d,a.tx*r.resolution,a.ty*r.resolution);var h=t.baseTexture.resolution;16777215===e.tint?r.context.drawImage(t.baseTexture.source,t._frame.x*h,t._frame.y*h,o*h,n*h,i*r.resolution,l*r.resolution,o*r.resolution,n*r.resolution):((e.cachedTint!==e.tint||e.tintedTexture.tintId!==e._texture._updateID)&&(e.cachedTint=e.tint,e.tintedTexture=u.default.getTintedTexture(e,e.tint)),r.context.drawImage(e.tintedTexture,0,0,o*h,n*h,i*r.resolution,l*r.resolution,o*r.resolution,n*r.resolution))}},e.prototype.destroy=function(){this.renderer=null},e}();t.default=c,i.default.registerPlugin('sprite',c)},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(t){r(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();t.default=o},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.min;t.__esModule=!0;var d=r(21),l=o(d),u=r(20),p=o(u),c=r(38),h=o(c),g=r(137),f=o(g),y=r(130),m=o(y),_=r(135),x=o(_),b=r(3),v=o(b),T=r(7),S=o(T),E=r(26),P=o(E),C=0,w=0,A=function(e){function t(r){n(this,t);var o=a(this,e.call(this,r));o.vertSize=5,o.vertByteSize=4*o.vertSize,o.size=v.default.SPRITE_BATCH_SIZE,o.buffers=[];for(var s=1;s<=P.default.nextPow2(o.size);s*=2)o.buffers.push(new x.default(4*s*o.vertByteSize));o.indices=(0,h.default)(o.size),o.shader=null,o.currentIndex=0,o.groups=[];for(var i=0;i<o.size;i++)o.groups[i]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return o.sprites=[],o.vertexBuffers=[],o.vaos=[],o.vaoMax=2,o.vertexCount=0,o.renderer.on('prerender',o.onPrerender,o),o}return i(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=s(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),v.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,m.default)(this.MAX_TEXTURES,e)),this.shader=(0,f.default)(e,this.MAX_TEXTURES),this.indexBuffer=S.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var o=this.vertexBuffers[r]=S.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(o,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(o,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(o,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&n.addAttribute(o,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,r=this.MAX_TEXTURES,o=P.default.nextPow2(this.currentIndex),n=P.default.log2(o),a=this.buffers[n],d=this.sprites,l=this.groups,u=a.float32View,p=a.uint32View,c=this.boundTextures,h=this.renderer.boundTextures,g=this.renderer.textureGC.count,f=0,y=1,m=0,_=l[0],x=d[0].blendMode,b,T,E,A;_.textureCount=0,_.start=0,_.blend=x,C++;var I;for(I=0;I<r;++I)c[I]=h[I],c[I]._virtalBoundId=I;for(I=0;I<this.currentIndex;++I){var i=d[I];if(b=i._texture.baseTexture,x!==i.blendMode&&(x=i.blendMode,T=null,m=r,C++),T!==b&&(T=b,b._enabled!==C)){if(m===r&&(C++,_.size=I-_.start,m=0,_=l[y++],_.blend=x,_.textureCount=0,_.start=I),b.touched=g,-1===b._virtalBoundId)for(var M=0;M<r;++M){var R=(M+w)%r,O=c[R];if(O._enabled!==C){w++,O._virtalBoundId=-1,b._virtalBoundId=R,c[R]=b;break}}b._enabled=C,_.textureCount++,_.ids[m]=b._virtalBoundId,_.textures[m++]=b}if(E=i.vertexData,A=i._texture._uvs.uvsUint32,this.renderer.roundPixels){var t=this.renderer.resolution;u[f]=(0|E[0]*t)/t,u[f+1]=(0|E[1]*t)/t,u[f+5]=(0|E[2]*t)/t,u[f+6]=(0|E[3]*t)/t,u[f+10]=(0|E[4]*t)/t,u[f+11]=(0|E[5]*t)/t,u[f+15]=(0|E[6]*t)/t,u[f+16]=(0|E[7]*t)/t}else u[f]=E[0],u[f+1]=E[1],u[f+5]=E[2],u[f+6]=E[3],u[f+10]=E[4],u[f+11]=E[5],u[f+15]=E[6],u[f+16]=E[7];p[f+2]=A[0],p[f+7]=A[1],p[f+12]=A[2],p[f+17]=A[3],p[f+3]=p[f+8]=p[f+13]=p[f+18]=i._tintRGB+(255*s(i.worldAlpha,1)<<24),u[f+4]=u[f+9]=u[f+14]=u[f+19]=b._virtalBoundId,f+=20}if(_.size=I-_.start,!v.default.CAN_UPLOAD_SAME_BUFFER){if(this.vaoMax<=this.vertexCount){this.vaoMax++;var D=this.shader.attributes,k=this.vertexBuffers[this.vertexCount]=S.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),L=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(k,D.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(k,D.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(k,D.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);D.aTextureId&&L.addAttribute(k,D.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=L}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(a.vertices,0,!1),this.vertexCount++}else this.vertexBuffers[this.vertexCount].upload(a.vertices,0,!0);for(I=0;I<r;++I)h[I]._virtalBoundId=-1;for(I=0;I<y;++I){for(var B=l[I],N=B.textureCount,F=0;F<N;F++)T=B.textures[F],h[B.ids[F]]!==T&&this.renderer.bindTexture(T,B.ids[F],!0),T._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),e.drawElements(e.TRIANGLES,6*B.size,e.UNSIGNED_SHORT,2*(6*B.start))}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),v.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off('prerender',this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},t}(l.default);t.default=A,p.default.registerPlugin('sprite',A)},function(e,t,r){'use strict';function o(e){var t='';t+='\n',t+='\n';for(var r=0;r<e;r++)0<r&&(t+='\nelse '),r<e-1&&(t+='if(textureId == '+r+'.0)'),t+='\n{',t+='\n\tcolor = texture2D(uSamplers['+r+'], vTextureCoord);',t+='\n}';return t+='\n',t+='\n',t}t.__esModule=!0,t.default=function(e,t){var r=s;r=r.replace(/%count%/gi,t),r=r.replace(/%forloop%/gi,o(t));for(var n=new a.default(e,'precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n',r),d=[],l=0;l<t;l++)d[l]=l;return n.bind(),n.uniforms.uSamplers=d,n};var n=r(12),a=function(e){return e&&e.__esModule?e:{default:e}}(n),i=r(8),s='varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}'},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.ceil,d=Math.abs;t.__esModule=!0;var l=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=r(34),p=o(u),c=r(10),h=o(c),g=r(4),f=r(2),y=r(1),m=r(3),_=o(m),x=r(73),b=o(x),v=r(72),T=o(v),S=r(147),E=o(S),P={texture:!0,children:!1,baseTexture:!0},C=function(e){function t(r,o,i){n(this,t),i=i||document.createElement('canvas'),i.width=3,i.height=3;var s=h.default.fromCanvas(i,_.default.SCALE_MODE,'text');s.orig=new g.Rectangle,s.trim=new g.Rectangle;var d=a(this,e.call(this,s));return h.default.addToCache(d._texture,d._texture.baseTexture.textureCacheIds[0]),d.canvas=i,d.context=d.canvas.getContext('2d'),d.resolution=_.default.RESOLUTION,d._text=null,d._style=null,d._styleListener=null,d._font='',d.text=r,d.style=o,d.localStyleID=-1,d}return i(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var r=this.context,o=T.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=o.width,a=o.height,d=o.lines,l=o.lineHeight,u=o.lineWidths,p=o.maxLineWidth,c=o.fontProperties;this.canvas.width=s((n+2*t.padding)*this.resolution),this.canvas.height=s((a+2*t.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=t.stroke,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;var h,g;if(t.dropShadow){r.shadowBlur=t.dropShadowBlur,r.globalAlpha=t.dropShadowAlpha,0<t.dropShadowBlur?r.shadowColor=t.dropShadowColor:r.fillStyle=t.dropShadowColor;for(var f=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,y=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,m=0;m<d.length;m++)h=t.strokeThickness/2,g=t.strokeThickness/2+m*l+c.ascent,'right'===t.align?h+=p-u[m]:'center'===t.align&&(h+=(p-u[m])/2),t.fill&&(this.drawLetterSpacing(d[m],h+f+t.padding,g+y+t.padding),t.stroke&&t.strokeThickness&&(r.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(d[m],h+f+t.padding,g+y+t.padding,!0),r.strokeStyle=t.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(t,d);for(var i=0;i<d.length;i++)h=t.strokeThickness/2,g=t.strokeThickness/2+i*l+c.ascent,'right'===t.align?h+=p-u[i]:'center'===t.align&&(h+=(p-u[i])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(d[i],h+t.padding,g+t.padding,!0),t.fill&&this.drawLetterSpacing(d[i],h+t.padding,g+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,r){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=this._style,a=n.letterSpacing;if(0===a)return void(o?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));for(var i=String.prototype.split.call(e,''),s=t,d=0,l='';d<e.length;)l=i[d++],o?this.context.strokeText(l,s,r):this.context.fillText(l,s,r),s+=this.context.measureText(l).width+a},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,E.default)(e);e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0)}var r=this._texture,o=this._style,n=o.trim?0:o.padding,a=r.baseTexture;a.hasLoaded=!0,a.resolution=this.resolution,a.realWidth=e.width,a.realHeight=e.height,a.width=e.width/this.resolution,a.height=e.height/this.resolution,r.trim.width=r._frame.width=e.width/this.resolution,r.trim.height=r._frame.height=e.height/this.resolution,r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),a.emit('update',a),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var r=this.canvas.width/this.resolution,o=this.canvas.height/this.resolution,n=e.fill.slice(),a=e.fillGradientStops.slice(),s,d,l,u;if(!a.length)for(var p=n.length+1,c=1;c<p;++c)a.push(c/p);if(n.unshift(e.fill[0]),a.unshift(0),n.push(e.fill[e.fill.length-1]),a.push(1),e.fillGradientType===y.TEXT_GRADIENT.LINEAR_VERTICAL){s=this.context.createLinearGradient(r/2,0,r/2,o),d=(n.length+1)*t.length,l=0;for(var i=0;i<t.length;i++){l+=1;for(var h=0;h<n.length;h++)u='number'==typeof a[h]?a[h]/t.length+i/t.length:l/d,s.addColorStop(u,n[h]),l++}}else{s=this.context.createLinearGradient(0,o/2,r,o/2),d=n.length+1,l=1;for(var g=0;g<n.length;g++)u='number'==typeof a[g]?a[g]:l/d,s.addColorStop(u,n[g]),l++}return s},t.prototype.destroy=function(t){'boolean'==typeof t&&(t={children:t}),t=Object.assign({},P,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},l(t,[{key:'width',get:function(){return this.updateText(!0),d(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=(0,f.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:'height',get:function(){return this.updateText(!0),d(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=(0,f.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:'style',get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof b.default?e:new b.default(e),this.localStyleID=-1,this.dirty=!0}},{key:'text',get:function(){return this._text},set:function(e){e=(''===e||null===e||void 0===e?' ':e)+'',this._text===e||(this._text=e,this.dirty=!0)}}]),t}(p.default);t.default=C},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=r(0),i=r(2),s=function(){function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;o(this,e),this.baseTexture=t,this.textures={},this.data=r,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(e,null,[{key:'BATCH_SIZE',get:function(){return 1e3}}]),e.prototype._updateResolution=function(e){var t=this.data.meta.scale,r=(0,i.getResolutionOfUrl)(e,null);return null===r&&(r=void 0===t?1:parseFloat(t)),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var r=t,o=e.BATCH_SIZE;r-t<o&&r<this._frameKeys.length;){var n=this._frameKeys[r],i=this._frames[n].frame;if(i){var s=null,d=null,l=new a.Rectangle(0,0,this._frames[n].sourceSize.w/this.resolution,this._frames[n].sourceSize.h/this.resolution);s=this._frames[n].rotated?new a.Rectangle(i.x/this.resolution,i.y/this.resolution,i.h/this.resolution,i.w/this.resolution):new a.Rectangle(i.x/this.resolution,i.y/this.resolution,i.w/this.resolution,i.h/this.resolution),this._frames[n].trimmed&&(d=new a.Rectangle(this._frames[n].spriteSourceSize.x/this.resolution,this._frames[n].spriteSourceSize.y/this.resolution,i.w/this.resolution,i.h/this.resolution)),this.textures[n]=new a.Texture(this.baseTexture,s,l,d,this._frames[n].rotated?2:0),a.Texture.addToCache(this.textures[n],n)}r++}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},e.prototype.destroy=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},e}();t.default=s},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),i=r(3),s=o(i),d=r(1),l=r(141),u=o(l),p=function(){function e(){var t=this;n(this,e),this._head=new u.default(null,null,Infinity),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:d.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,r))},e.prototype.addOnce=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:d.UPDATE_PRIORITY.NORMAL;return this._addListener(new u.default(e,t,r,!0))},e.prototype._addListener=function(e){var t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),t;if(e>this.lastTime){t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*s.default.TARGET_FPMS*this.speed;for(var r=this._head,o=r.next;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},a(e,[{key:'FPS',get:function(){return 1e3/this.elapsedMS}},{key:'minFPS',get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();t.default=p},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]&&arguments[3];r(this,e),this.fn=t,this.context=o,this.priority=n,this.once=a,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.previous;return this.next=e?null:t,this.previous=null,t},e}();t.default=o},function(e,t){'use strict';t.__esModule=!0,t.default=function(){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!e}},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:window.location;if(0===e.indexOf('data:'))return'';t=t||window.location,a||(a=document.createElement('a')),a.href=e,e=n.default.parse(a.href);var r=!e.port&&''===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?'':'anonymous'};var o=r(93),n=function(e){return e&&e.__esModule?e:{default:e}}(o),a=void 0},function(e,t,r){'use strict';t.__esModule=!0,t.default=function(e){return n.default.tablet||n.default.phone?4:e};var o=r(27),n=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t){'use strict';function r(e,t){if(e&&t)for(var r=Object.keys(t),o=0,n;o<r.length;++o)n=r[o],Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}t.__esModule=!0,t.mixin=r,t.delayMixin=function(e,t){o.push(e,t)},t.performMixins=function(){for(var e=0;e<o.length;e+=2)r(o[e],o[e+1]);o.length=0};var o=[]},function(e,t){'use strict';function r(e){e.__plugins={},e.registerPlugin=function(t,r){e.__plugins[t]=r},e.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}t.__esModule=!0,t.default={mixin:function(e){r(e)}}},function(e,t){'use strict';t.__esModule=!0,t.default=function(e){var t=e.width,r=e.height,o=e.getContext('2d'),n=o.getImageData(0,0,t,r),a=n.data,s=a.length,d={top:null,left:null,right:null,bottom:null},l,i,u;for(l=0;l<s;l+=4)0!==a[l+3]&&(i=l/4%t,u=~~(l/4/t),null===d.top&&(d.top=u),null===d.left?d.left=i:i<d.left&&(d.left=i),null===d.right?d.right=i+1:d.right<i&&(d.right=i+1),null===d.bottom?d.bottom=u:d.bottom<u&&(d.bottom=u));t=d.right-d.left,r=d.bottom-d.top+1;var p=o.getImageData(d.left,d.top,t,r);return{height:r,width:t,data:p}}},function(e,t){'use strict';function r(e){var t=new Error().stack;'undefined'==typeof t?console.warn('Deprecation Warning: ',e):(t=t.split('\n').splice(3).join('\n'),console.groupCollapsed?(console.groupCollapsed('%cDeprecation Warning: %c%s','color:#614108;background:#fffbe6','font-weight:normal;color:#614108;background:#fffbe6',e),console.warn(t),console.groupEnd()):(console.warn('Deprecation Warning: ',e),console.warn(t)))}t.__esModule=!0,t.default=function(e){var t=e.mesh,o=e.particles,n=e.extras,a=e.filters,s=e.prepare,d=e.loaders,l=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError('SpriteBatch does not exist any more, please use the new ParticleContainer instead.')}},AssetLoader:{get:function(){throw new ReferenceError('The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.')}},Stage:{get:function(){return r('You do not need to use a PIXI Stage any more, you can simply render any container.'),e.Container}},DisplayObjectContainer:{get:function(){return r('DisplayObjectContainer has been shortened to Container, please use Container from now on.'),e.Container}},Strip:{get:function(){return r('The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.'),t.Mesh}},Rope:{get:function(){return r('The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.'),t.Rope}},ParticleContainer:{get:function(){return r('The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on.'),o.ParticleContainer}},MovieClip:{get:function(){return r('The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite.'),n.AnimatedSprite}},TilingSprite:{get:function(){return r('The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.'),n.TilingSprite}},BitmapText:{get:function(){return r('The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.'),n.BitmapText}},blendModes:{get:function(){return r('The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.'),e.BLEND_MODES}},scaleModes:{get:function(){return r('The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.'),e.SCALE_MODES}},BaseTextureCache:{get:function(){return r('The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.'),e.utils.BaseTextureCache}},TextureCache:{get:function(){return r('The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.'),e.utils.TextureCache}},math:{get:function(){return r('The math namespace is deprecated, please access members already accessible on PIXI.'),e}},AbstractFilter:{get:function(){return r('AstractFilter has been renamed to Filter, please use PIXI.Filter'),e.Filter}},TransformManual:{get:function(){return r('TransformManual has been renamed to TransformBase, please update your pixi-spine'),e.TransformBase}},TARGET_FPMS:{get:function(){return r('PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS'),e.settings.TARGET_FPMS},set:function(t){r('PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS'),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return r('PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION'),e.settings.FILTER_RESOLUTION},set:function(t){r('PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION'),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return r('PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION'),e.settings.RESOLUTION},set:function(t){r('PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION'),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return r('PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES'),e.settings.MIPMAP_TEXTURES},set:function(t){r('PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES'),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return r('PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE'),e.settings.SPRITE_BATCH_SIZE},set:function(t){r('PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE'),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return r('PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES'),e.settings.SPRITE_MAX_TEXTURES},set:function(t){r('PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES'),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return r('PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX'),e.settings.RETINA_PREFIX},set:function(t){r('PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX'),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return r('PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS'),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:'TRANSFORM_MODE',target:'TRANSFORM_MODE'},{parent:'GC_MODES',target:'GC_MODE'},{parent:'WRAP_MODES',target:'WRAP_MODE'},{parent:'SCALE_MODES',target:'SCALE_MODE'},{parent:'PRECISION',target:'PRECISION_FRAGMENT'}],p=function(t){var o=u[t];Object.defineProperty(e[o.parent],'DEFAULT',{get:function(){return r('PIXI.'+o.parent+'.DEFAULT has been deprecated, '+('please use PIXI.settings.'+o.target)),e.settings[o.target]},set:function(t){r('PIXI.'+o.parent+'.DEFAULT has been deprecated, '+('please use PIXI.settings.'+o.target)),e.settings[o.target]=t}})},c=0;c<u.length;c++)p(c);Object.defineProperties(e.settings,{PRECISION:{get:function(){return r('PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT'),e.settings.PRECISION_FRAGMENT},set:function(t){r('PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT'),e.settings.PRECISION_FRAGMENT=t}}}),Object.defineProperties(n,{MovieClip:{get:function(){return r('The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on.'),n.AnimatedSprite}}}),e.DisplayObject.prototype.generateTexture=function(e,t,o){return r('generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)'),e.generateTexture(this,t,o)},e.Graphics.prototype.generateTexture=function(e,t){return r('graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture'),this.generateCanvasTexture(e,t)},e.RenderTexture.prototype.render=function(e,t,o,n){this.legacyRenderer.render(e,this,o,t,!n),r('RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)')},e.RenderTexture.prototype.getImage=function(e){return r('RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)'),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return r('RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)'),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return r('RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)'),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return r('RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)'),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,r('setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;')},n.BitmapText.prototype.setText=function(e){this.text=e,r('setText is now deprecated, please use the text property, e.g : myBitmapText.text = \'my text\';')},e.Text.prototype.setText=function(e){this.text=e,r('setText is now deprecated, please use the text property, e.g : myText.text = \'my text\';')},e.Text.calculateFontProperties=function(t){return r('Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont'),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return r('Text.fontPropertiesCache is deprecated'),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r('Text.fontPropertiesCanvas is deprecated'),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r('Text.fontPropertiesContext is deprecated'),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,r('setStyle is now deprecated, please use the style property, e.g : myText.style = style;')},e.Text.prototype.determineFontProperties=function(t){return r('determineFontProperties is now deprecated, please use TextMetrics.measureFont method'),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return r('getFontStyle is now deprecated, please use TextStyle.toFontString() instead'),t=t||{},t instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){r('text style property \'font\' is now deprecated, please use the \'fontFamily\', \'fontSize\', \'fontStyle\', \'fontVariant\' and \'fontWeight\' properties from now on');var e='number'==typeof this._fontSize?this._fontSize+'px':this._fontSize;return this._fontStyle+' '+this._fontVariant+' '+this._fontWeight+' '+e+' '+this._fontFamily},set:function(e){r('text style property \'font\' is now deprecated, please use the \'fontFamily\',\'fontSize\',fontStyle\',\'fontVariant\' and \'fontWeight\' properties from now on'),this._fontStyle=1<e.indexOf('italic')?'italic':-1<e.indexOf('oblique')?'oblique':'normal',this._fontVariant=-1<e.indexOf('small-caps')?'small-caps':'normal';var t=e.split(' '),o=-1;this._fontSize=26;for(var n=0;n<t.length;++n)if(t[n].match(/(px|pt|em|%)/)){o=n,this._fontSize=t[n];break}this._fontWeight='normal';for(var a=0;a<o;++a)if(t[a].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[a];break}if(-1<o&&o<t.length-1){this._fontFamily='';for(var i=o+1;i<t.length;++i)this._fontFamily+=t[i]+' ';this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily='Arial';this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,r('setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;')},e.Texture.addTextureToCache=function(t,o){e.Texture.addToCache(t,o),r('Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.')},e.Texture.removeTextureFromCache=function(t){return r('Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache'),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(a,{AbstractFilter:{get:function(){return r('AstractFilter has been renamed to Filter, please use PIXI.Filter'),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return r('filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.'),e.SpriteMaskFilter}}}),e.utils.uuid=function(){return r('utils.uuid() is deprecated, please use utils.uid() from now on.'),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return r('utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on'),e.CanvasTinter.canUseMultiply};var i=!0;if(Object.defineProperty(e.utils,'_saidHello',{set:function(e){e&&(r('PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()'),this.skipHello()),i=e},get:function(){return i}}),s.BasePrepare.prototype.register=function(e,t){return r('renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook'),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this},Object.defineProperty(s.canvas,'UPLOADS_PER_FRAME',{set:function(){r('PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer')},get:function(){return r('PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter'),NaN}}),Object.defineProperty(s.webgl,'UPLOADS_PER_FRAME',{set:function(){r('PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer')},get:function(){return r('PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter'),NaN}}),d.Loader){var h=d.Resource,g=d.Loader;Object.defineProperties(h.prototype,{isJson:{get:function(){return r('The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`.'),this.type===h.TYPE.JSON}},isXml:{get:function(){return r('The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`.'),this.type===h.TYPE.XML}},isImage:{get:function(){return r('The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`.'),this.type===h.TYPE.IMAGE}},isAudio:{get:function(){return r('The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`.'),this.type===h.TYPE.AUDIO}},isVideo:{get:function(){return r('The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`.'),this.type===h.TYPE.VIDEO}}}),Object.defineProperties(g.prototype,{before:{get:function(){return r('The before() method is deprecated, please use pre().'),this.pre}},after:{get:function(){return r('The after() method is deprecated, please use use().'),this.use}}})}Object.defineProperty(l.interactiveTarget,'defaultCursor',{set:function(e){r('Property defaultCursor has been replaced with \'cursor\'. '),this.cursor=e},get:function(){return r('Property defaultCursor has been replaced with \'cursor\'. '),this.cursor}}),Object.defineProperty(l.InteractionManager,'defaultCursorStyle',{set:function(e){r('Property defaultCursorStyle has been replaced with \'cursorStyles.default\'. '),this.cursorStyles.default=e},get:function(){return r('Property defaultCursorStyle has been replaced with \'cursorStyles.default\'. '),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,'currentCursorStyle',{set:function(e){r('Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.'),this.currentCursorMode=e},get:function(){return r('Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently.'),this.currentCursorMode}})}},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),i=new a.Rectangle,s=function(){function e(t){o(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,r,o,n,s;e&&(e instanceof a.RenderTexture?s=e:s=t.generateTexture(e)),s?(r=s.baseTexture._canvasRenderTarget.context,o=s.baseTexture._canvasRenderTarget.resolution,n=s.frame):(r=t.rootContext,n=i,n.width=this.renderer.width,n.height=this.renderer.height);var d=n.width*o,l=n.height*o,u=new a.CanvasRenderTarget(d,l),p=r.getImageData(n.x*o,n.y*o,d,l);return u.context.putImageData(p,0,0),u.canvas},e.prototype.pixels=function(e){var t=this.renderer,r,o,n,s;return e&&(e instanceof a.RenderTexture?s=e:s=t.generateTexture(e)),s?(r=s.baseTexture._canvasRenderTarget.context,o=s.baseTexture._canvasRenderTarget.resolution,n=s.frame):(r=t.rootContext,n=i,n.width=t.width,n.height=t.height),r.getImageData(0,0,n.width*o,n.height*o).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();t.default=s,a.CanvasRenderer.registerPlugin('extract',s)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(151);Object.defineProperty(t,'webgl',{enumerable:!0,get:function(){return o(n).default}});var a=r(149);Object.defineProperty(t,'canvas',{enumerable:!0,get:function(){return o(a).default}})},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var n=r(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(n),i=new a.Rectangle,s=4,d=function(){function e(t){o(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,r=!1,o,n,d,l;e&&(e instanceof a.RenderTexture?l=e:l=this.renderer.generateTexture(e)),l?(o=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=o.resolution,d=l.frame,r=!1):(o=this.renderer.rootRenderTarget,n=o.resolution,r=!0,d=i,d.width=o.size.width,d.height=o.size.height);var u=d.width*n,p=d.height*n,c=new a.CanvasRenderTarget(u,p);if(o){t.bindRenderTarget(o);var h=new Uint8Array(s*u*p),g=t.gl;g.readPixels(d.x*n,d.y*n,u,p,g.RGBA,g.UNSIGNED_BYTE,h);var f=c.context.getImageData(0,0,u,p);f.data.set(h),c.context.putImageData(f,0,0),r&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-p))}return c.canvas},e.prototype.pixels=function(e){var t=this.renderer,r,o,n,d;e&&(e instanceof a.RenderTexture?d=e:d=this.renderer.generateTexture(e)),d?(r=d.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],o=r.resolution,n=d.frame):(r=this.renderer.rootRenderTarget,o=r.resolution,n=i,n.width=r.size.width,n.height=r.size.height);var l=n.width*o,u=n.height*o,p=new Uint8Array(s*l*u);if(r){t.bindRenderTarget(r);var c=t.gl;c.readPixels(n.x*o,n.y*o,l,u,c.RGBA,c.UNSIGNED_BYTE,p)}return p},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();t.default=d,a.WebGLRenderer.registerPlugin('extract',d)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=Math.floor;t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),u=function(e){function t(r,a){o(this,t);var i=n(this,e.call(this,r[0]instanceof l.Texture?r[0]:r[0].texture));return i._textures=null,i._durations=null,i.textures=r,i._autoUpdate=!1!==a,i.animationSpeed=1,i.loop=!0,i.onComplete=null,i.onFrameChange=null,i._currentTime=0,i.playing=!1,i}return a(t,e),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&l.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var t=this.animationSpeed*e,r=this.currentFrame;if(null!==this._durations){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=1e3*(t/60);0>o;)this._currentTime--,o+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*e);for(this._currentTime=i(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=t;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&this.updateTexture()},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},t.fromFrames=function(e){for(var r=[],o=0;o<e.length;++o)r.push(l.Texture.fromFrame(e[o]));return new t(r)},t.fromImages=function(e){for(var r=[],o=0;o<e.length;++o)r.push(l.Texture.fromImage(e[o]));return new t(r)},s(t,[{key:'totalFrames',get:function(){return this._textures.length}},{key:'textures',get:function(){return this._textures},set:function(e){if(e[0]instanceof l.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:'currentFrame',get:function(){var e=i(this._currentTime)%this._textures.length;return 0>e&&(e+=this._textures.length),e}}]),t}(l.Sprite);t.default=u},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.max;t.__esModule=!0;var d=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),p=r(65),c=o(p),h=r(3),g=o(h),f=function(e){function t(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};n(this,t);var i=a(this,e.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0===o.tint?16777215:o.tint,align:o.align||'left',name:null,size:0},i.font=o.font,i._text=r,i.maxWidth=0,i.maxLineHeight=0,i._anchor=new c.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return i(t,e),t.prototype.updateText=function(){for(var e=t.fonts[this._font.name],r=this._font.size/e.size,o=new u.Point,n=[],a=[],d=null,l=0,p=0,h=0,g=-1,f=0,y=0,m=0,i;m<this.text.length;m++){if(i=this.text.charCodeAt(m),/(\s)/.test(this.text.charAt(m))&&(g=m,f=l),/(?:\r\n|\r|\n)/.test(this.text.charAt(m))){a.push(l),p=s(p,l),h++,o.x=0,o.y+=e.lineHeight,d=null;continue}if(-1!==g&&0<this.maxWidth&&o.x*r>this.maxWidth){u.utils.removeItems(n,g,m-g),m=g,g=-1,a.push(f),p=s(p,f),h++,o.x=0,o.y+=e.lineHeight,d=null;continue}var _=e.chars[i];_&&(d&&_.kerning[d]&&(o.x+=_.kerning[d]),n.push({texture:_.texture,line:h,charCode:i,position:new u.Point(o.x+_.xOffset,o.y+_.yOffset)}),l=o.x+(_.texture.width+_.xOffset),o.x+=_.xAdvance,y=s(y,_.yOffset+_.texture.height),d=i)}a.push(l),p=s(p,l);for(var x=[],b=0,v;b<=h;b++)v=0,'right'===this._font.align?v=p-a[b]:'center'===this._font.align&&(v=(p-a[b])/2),x.push(v);for(var T=n.length,S=this.tint,E=0,P;E<T;E++)P=this._glyphs[E],P?P.texture=n[E].texture:(P=new u.Sprite(n[E].texture),this._glyphs.push(P)),P.position.x=(n[E].position.x+x[n[E].line])*r,P.position.y=n[E].position.y*r,P.scale.x=P.scale.y=r,P.tint=S,P.parent||this.addChild(P);for(var c=T;c<this._glyphs.length;++c)this.removeChild(this._glyphs[c]);if(this._textWidth=p*r,this._textHeight=(o.y+e.lineHeight)*r,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<T;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this.maxLineHeight=y*r},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(e,r){var o={},n=e.getElementsByTagName('info')[0],a=e.getElementsByTagName('common')[0],s=r.baseTexture.resolution||g.default.RESOLUTION;o.font=n.getAttribute('face'),o.size=parseInt(n.getAttribute('size'),10),o.lineHeight=parseInt(a.getAttribute('lineHeight'),10)/s,o.chars={};for(var d=e.getElementsByTagName('char'),l=0;l<d.length;l++){var i=d[l],p=parseInt(i.getAttribute('id'),10),c=new u.Rectangle(parseInt(i.getAttribute('x'),10)/s+r.frame.x/s,parseInt(i.getAttribute('y'),10)/s+r.frame.y/s,parseInt(i.getAttribute('width'),10)/s,parseInt(i.getAttribute('height'),10)/s);o.chars[p]={xOffset:parseInt(i.getAttribute('xoffset'),10)/s,yOffset:parseInt(i.getAttribute('yoffset'),10)/s,xAdvance:parseInt(i.getAttribute('xadvance'),10)/s,kerning:{},texture:new u.Texture(r.baseTexture,c)}}for(var h=e.getElementsByTagName('kerning'),f=0;f<h.length;f++){var y=h[f],m=parseInt(y.getAttribute('first'),10)/s,_=parseInt(y.getAttribute('second'),10)/s,x=parseInt(y.getAttribute('amount'),10)/s;o.chars[_]&&(o.chars[_].kerning[m]=x)}return t.fonts[o.font]=o,o},d(t,[{key:'tint',get:function(){return this._font.tint},set:function(e){this._font.tint='number'==typeof e&&0<=e?e:16777215,this.dirty=!0}},{key:'align',get:function(){return this._font.align},set:function(e){this._font.align=e||'left',this.dirty=!0}},{key:'anchor',get:function(){return this._anchor},set:function(e){'number'==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:'font',get:function(){return this._font},set:function(e){e&&('string'==typeof e?(e=e.split(' '),this._font.name=1===e.length?e[0]:e.slice(1).join(' '),this._font.size=2<=e.length?parseInt(e[0],10):t.fonts[this._font.name].size):(this._font.name=e.name,this._font.size='number'==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:'text',get:function(){return this._text},set:function(e){e=e.toString()||' ',this._text===e||(this._text=e,this.dirty=!0)}},{key:'textWidth',get:function(){return this.validate(),this._textWidth}},{key:'textHeight',get:function(){return this.validate(),this._textHeight}}]),t}(u.Container);t.default=f,f.fonts={}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),d=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),u=r(35),p=o(u),c=r(39),h=o(c),g=new l.Point,f=function(e){function t(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;n(this,t);var s=a(this,e.call(this,r));return s.tileTransform=new l.TransformStatic,s._width=o,s._height=i,s._canvasPattern=null,s.uvTransform=r.transform||new h.default(r),s.pluginName='tilingSprite',s.uvRespectAnchor=!1,s}return i(t,e),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},t.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var r=e.context,o=this.worldTransform,n=e.resolution,a=t.baseTexture,i=a.resolution,s=this.tilePosition.x/this.tileScale.x%t._frame.width*i,d=this.tilePosition.y/this.tileScale.y%t._frame.height*i;if(!this._canvasPattern){var u=new l.CanvasRenderTarget(t._frame.width,t._frame.height,i);16777215===this.tint?u.context.drawImage(a.source,-t._frame.x,-t._frame.y):(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=p.default.getTintedTexture(this,this.tint)),u.context.drawImage(this.tintedTexture,0,0)),this._canvasPattern=u.context.createPattern(u.canvas,'repeat')}r.globalAlpha=this.worldAlpha,r.setTransform(o.a*n,o.b*n,o.c*n,o.d*n,o.tx*n,o.ty*n),e.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/i,this.tileScale.y/i);var c=this.anchor.x*-this._width,h=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(s,d),r.fillRect(-s+c,-d+h,this._width/this.tileScale.x*i,this._height/this.tileScale.y*i)):(r.translate(s+c,d+h),r.fillRect(-s,-d,this._width/this.tileScale.x*i,this._height/this.tileScale.y*i))}},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,o)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(!this._localBoundsRect&&(this._localBoundsRect=new l.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,g);var t=this._width,r=this._height,o=-t*this.anchor._x;if(g.x>o&&g.x<o+t){var n=-r*this.anchor._y;if(g.y>n&&g.y<n+r)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},t.from=function(e,r,o){return new t(l.Texture.from(e),r,o)},t.fromFrame=function(e,r,o){var n=l.utils.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new t(n,r,o)},t.fromImage=function(e,r,o,n,a){return new t(l.Texture.fromImage(e,n,a),r,o)},s(t,[{key:'clampMargin',get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:'tileScale',get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:'tilePosition',get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:'width',get:function(){return this._width},set:function(e){this._width=e}},{key:'height',get:function(){return this._height},set:function(e){this._height=e}}]),t}(l.Sprite);t.default=f},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var a=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),s=r(10),d=o(s),l=r(11),u=o(l),p=r(2),c=i.DisplayObject,h=new i.Matrix;c.prototype._cacheAsBitmap=!1,c.prototype._cacheData=!1;var g=function e(){n(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(c.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t;e?(!this._cacheData&&(this._cacheData=new g),t=this._cacheData,t.originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this._calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this._calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),c.prototype._renderCachedWebGL=function(e){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(e),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},c.prototype._initCachedDisplayObject=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var o=this._filters[0].padding;r.pad(o)}var n=e._activeRenderTarget,a=e.filterManager.filterStack,s=i.RenderTexture.create(0|r.width,0|r.height),l='cacheAsBitmap_'+(0,p.uid)();this._cacheData.textureCacheId=l,u.default.addToCache(s.baseTexture,l),d.default.addToCache(s,l);var c=h;c.tx=-r.x,c.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,s,!0,c,!0),e.bindRenderTarget(n),e.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var g=new i.Sprite(s);g.transform.worldTransform=this.transform.worldTransform,g.anchor.x=-(r.x/r.width),g.anchor.y=-(r.y/r.height),g.alpha=t,g._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=g,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=g.containsPoint.bind(g)}},c.prototype._renderCachedCanvas=function(e){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(e))},c.prototype._initCachedDisplayObjectCanvas=function(e){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(),r=this.alpha;this.alpha=1;var o=e.context,n=i.RenderTexture.create(0|t.width,0|t.height),a='cacheAsBitmap_'+(0,p.uid)();this._cacheData.textureCacheId=a,u.default.addToCache(n.baseTexture,a),d.default.addToCache(n,a);var s=h;this.transform.localTransform.copy(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,n,!0,s,!1),e.context=o,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var l=new i.Sprite(n);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(t.x/t.width),l.anchor.y=-(t.y/t.height),l._bounds=this._bounds,l.alpha=r,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=l,this.containsPoint=l.containsPoint.bind(l)}},c.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,u.default.removeFromCache(this._cacheData.textureCacheId),d.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},c.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)}},function(e,t,r){'use strict';var o=r(0),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o);n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},function(e,t,r){'use strict';var o=r(0),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o);n.DisplayObject.prototype.getGlobalPosition=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new n.Point,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e}},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),d=r(1),l=r(8),u=new s.Matrix,p=new Float32Array(4),c=function(e){function t(r){o(this,t);var a=n(this,e.call(this,r));return a.shader=null,a.simpleShader=null,a.quad=null,a}return a(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new s.Shader(e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n','varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n'),this.simpleShader=new s.Shader(e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n','varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n'),this.renderer.bindVao(null),this.quad=new s.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(e){var t=this.renderer,r=this.quad;t.bindVao(r.vao);var o=r.vertices;o[0]=o[6]=e._width*-e.anchor.x,o[1]=o[3]=e._height*-e.anchor.y,o[2]=o[4]=e._width*(1-e.anchor.x),o[5]=o[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&(o=r.uvs,o[0]=o[6]=-e.anchor.x,o[1]=o[3]=-e.anchor.y,o[2]=o[4]=1-e.anchor.x,o[5]=o[7]=1-e.anchor.y),r.upload();var n=e._texture,a=n.baseTexture,i=e.tileTransform.localTransform,l=e.uvTransform,c=a.isPowerOfTwo&&n.frame.width===a.width&&n.frame.height===a.height;c&&(a._glTextures[t.CONTEXT_UID]?c=a.wrapMode!==d.WRAP_MODES.CLAMP:a.wrapMode===d.WRAP_MODES.CLAMP&&(a.wrapMode=d.WRAP_MODES.REPEAT));var g=c?this.simpleShader:this.shader;t.bindShader(g);var f=n.width,y=n.height,h=e._width,m=e._height;u.set(i.a*f/h,i.b*f/m,i.c*y/h,i.d*y/m,i.tx/h,i.ty/m),u.invert(),c?u.prepend(l.mapCoord):(g.uniforms.uMapCoord=l.mapCoord.toArray(!0),g.uniforms.uClampFrame=l.uClampFrame,g.uniforms.uClampOffset=l.uClampOffset),g.uniforms.uTransform=u.toArray(!0);var _=p;s.utils.hex2rgb(e.tint,_),_[3]=e.worldAlpha,g.uniforms.uColor=_,g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=t.bindTexture(n),t.setBlendMode(e.blendMode),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(s.ObjectRenderer);t.default=c,s.WebGLRenderer.registerPlugin('tilingSprite',c)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=Math.max,d=Math.abs;t.__esModule=!0;var l=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=r(0),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c=r(78),h=o(c),g=r(79),f=o(g),y=function(e){function t(r,o,i,s){n(this,t);var d=a(this,e.call(this));return d.blurXFilter=new h.default(r,o,i,s),d.blurYFilter=new f.default(r,o,i,s),d.padding=0,d.resolution=i||p.settings.RESOLUTION,d.quality=o||4,d.blur=r||8,d}return i(t,e),t.prototype.apply=function(e,t,r){var o=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,o,!0),this.blurYFilter.apply(e,o,r,!1),e.returnRenderTarget(o)},l(t,[{key:'blur',get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*s(d(this.blurXFilter.strength),d(this.blurYFilter.strength))}},{key:'quality',get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:'blurX',get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*s(d(this.blurXFilter.strength),d(this.blurYFilter.strength))}},{key:'blurY',get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*s(d(this.blurXFilter.strength),d(this.blurYFilter.strength))}}]),t}(p.Filter);t.default=y},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(8),u=function(e){function t(){o(this,t);var r=n(this,e.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}','varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n'));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return a(t,e),t.prototype._loadMatrix=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r},t.prototype._multiply=function(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],t)},t.prototype.greyscale=function(e,t){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var r=Math.cos(e),o=Math.sin(e),n=Math.sqrt,a=1/3,i=n(a);this._loadMatrix([r+(1-r)*a,a*(1-r)-i*o,a*(1-r)+i*o,0,0,a*(1-r)+i*o,r+a*(1-r),a*(1-r)-i*o,0,0,a*(1-r)-i*o,a*(1-r)+i*o,r+a*(1-r),0,0,0,0,0,1,0],t)},t.prototype.contrast=function(e,t){var r=(e||0)+1,n=-128*(r-1);this._loadMatrix([r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0],t)},t.prototype.saturate=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=2*e/3+1,o=-0.5*(r-1);this._loadMatrix([r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0],t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,r,o,n){e=e||0.2,t=t||0.15,r=r||16770432,o=o||3375104;var a=(255&r>>16)/255,i=(255&r>>8)/255,s=(255&r)/255,d=(255&o>>16)/255,l=(255&o>>8)/255,u=(255&o)/255,p=[0.3,0.59,0.11,0,0,a,i,s,e,0,d,l,u,t,0,a-d,i-l,s-u,0,0];this._loadMatrix(p,n)},t.prototype.night=function(e,t){e=e||0.1;var r=[-2*e,-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)},t.prototype.predator=function(e,t){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,0.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,0.8044459223747253*e,0,0,0,1,0],t)},t.prototype.lsd=function(e){this._loadMatrix([2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i(t,[{key:'matrix',get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:'alpha',get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(d.Filter);t.default=u,u.prototype.grayscale=u.prototype.greyscale},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(8),u=function(e){function t(r,a){o(this,t);var i=new d.Matrix;r.renderable=!1;var s=n(this,e.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}','varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n'));return s.maskSprite=r,s.maskMatrix=i,s.uniforms.mapSampler=r._texture,s.uniforms.filterMatrix=i,s.uniforms.scale={x:1,y:1},(null===a||void 0===a)&&(a=20),s.scale=new d.Point(a,a),s}return a(t,e),t.prototype.apply=function(e,t,r){var o=1/r.destinationFrame.width*(r.size.width/t.size.width);this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*o,this.uniforms.scale.y=this.scale.y*o,e.applyFilter(this,t,r)},i(t,[{key:'map',get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(d.Filter);t.default=u},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),d=r(8),l=function(e){function t(){return o(this,t),n(this,e.call(this,'\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}','varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return a(t,e),t}(s.Filter);t.default=l},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(162);Object.defineProperty(t,'FXAAFilter',{enumerable:!0,get:function(){return o(n).default}});var a=r(164);Object.defineProperty(t,'NoiseFilter',{enumerable:!0,get:function(){return o(a).default}});var i=r(161);Object.defineProperty(t,'DisplacementFilter',{enumerable:!0,get:function(){return o(i).default}});var s=r(159);Object.defineProperty(t,'BlurFilter',{enumerable:!0,get:function(){return o(s).default}});var d=r(78);Object.defineProperty(t,'BlurXFilter',{enumerable:!0,get:function(){return o(d).default}});var l=r(79);Object.defineProperty(t,'BlurYFilter',{enumerable:!0,get:function(){return o(l).default}});var u=r(160);Object.defineProperty(t,'ColorMatrixFilter',{enumerable:!0,get:function(){return o(u).default}});var p=r(165);Object.defineProperty(t,'VoidFilter',{enumerable:!0,get:function(){return o(p).default}})},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(8),u=function(e){function t(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0.5,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();o(this,t);var i=n(this,e.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}','precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n'));return i.noise=r,i.seed=a,i}return a(t,e),i(t,[{key:'noise',get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:'seed',get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(d.Filter);t.default=u},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),d=r(8),l=function(e){function t(){o(this,t);var r=n(this,e.call(this,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}','varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n'));return r.glShaderKey='void',r}return a(t,e),t}(s.Filter);t.default=l},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(){r(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();t.default=o},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},d=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),u=r(83),p=o(u),c=r(166),h=o(c),g=r(168),f=o(g),y=r(9),m=o(y),_=r(84),x=o(_);l.utils.mixins.delayMixin(l.DisplayObject.prototype,x.default);var b='MOUSE',v={target:null,data:{global:null}},T=function(e){function t(r,o){n(this,t);var i=a(this,e.call(this));return o=o||{},i.renderer=r,i.autoPreventDefault=void 0===o.autoPreventDefault||o.autoPreventDefault,i.interactionFrequency=o.interactionFrequency||10,i.mouse=new p.default,i.mouse.identifier=b,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[b]=i.mouse,i.interactionDataPool=[],i.eventData=new h.default,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents='ontouchstart'in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:'inherit',pointer:'pointer'},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new l.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return i(t,e),t.prototype.hitTest=function(e,t){return v.target=null,v.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(v,t,null,!0),v.target},t.prototype.setTargetElement=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style['-ms-content-zooming']='none',this.interactionDOMElement.style['-ms-touch-action']='none'):this.supportsPointerEvents&&(this.interactionDOMElement.style['touch-action']='none'),this.supportsPointerEvents?(window.document.addEventListener('pointermove',this.onPointerMove,!0),this.interactionDOMElement.addEventListener('pointerdown',this.onPointerDown,!0),this.interactionDOMElement.addEventListener('pointerleave',this.onPointerOut,!0),this.interactionDOMElement.addEventListener('pointerover',this.onPointerOver,!0),window.addEventListener('pointercancel',this.onPointerCancel,!0),window.addEventListener('pointerup',this.onPointerUp,!0)):(window.document.addEventListener('mousemove',this.onPointerMove,!0),this.interactionDOMElement.addEventListener('mousedown',this.onPointerDown,!0),this.interactionDOMElement.addEventListener('mouseout',this.onPointerOut,!0),this.interactionDOMElement.addEventListener('mouseover',this.onPointerOver,!0),window.addEventListener('mouseup',this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener('touchstart',this.onPointerDown,!0),this.interactionDOMElement.addEventListener('touchcancel',this.onPointerCancel,!0),this.interactionDOMElement.addEventListener('touchend',this.onPointerUp,!0),this.interactionDOMElement.addEventListener('touchmove',this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(l.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style['-ms-content-zooming']='',this.interactionDOMElement.style['-ms-touch-action']=''):this.supportsPointerEvents&&(this.interactionDOMElement.style['touch-action']=''),this.supportsPointerEvents?(window.document.removeEventListener('pointermove',this.onPointerMove,!0),this.interactionDOMElement.removeEventListener('pointerdown',this.onPointerDown,!0),this.interactionDOMElement.removeEventListener('pointerleave',this.onPointerOut,!0),this.interactionDOMElement.removeEventListener('pointerover',this.onPointerOver,!0),window.removeEventListener('pointercancel',this.onPointerCancel,!0),window.removeEventListener('pointerup',this.onPointerUp,!0)):(window.document.removeEventListener('mousemove',this.onPointerMove,!0),this.interactionDOMElement.removeEventListener('mousedown',this.onPointerDown,!0),this.interactionDOMElement.removeEventListener('mouseout',this.onPointerOut,!0),this.interactionDOMElement.removeEventListener('mouseover',this.onPointerOver,!0),window.removeEventListener('mouseup',this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener('touchstart',this.onPointerDown,!0),this.interactionDOMElement.removeEventListener('touchcancel',this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener('touchend',this.onPointerUp,!0),this.interactionDOMElement.removeEventListener('touchmove',this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(e){if((this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency))&&(this._deltaTime=0,!!this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&'touch'!==r.pointerType){var o=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||'default',this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch('undefined'==typeof t?'undefined':s(t)){case'string':this.interactionDOMElement.style.cursor=t;break;case'function':t(e);break;case'object':Object.assign(this.interactionDOMElement.style,t);}else'string'!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,r){r.stopped||(r.currentTarget=e,r.type=t,e.emit(t,r),e[t]&&e[t](r))},t.prototype.mapPositionToPoint=function(e,t,r){var o=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-o.left)*(this.interactionDOMElement.width/o.width)*n,e.y=(r-o.top)*(this.interactionDOMElement.height/o.height)*n},t.prototype.processInteractive=function(e,t,r,o,n){if(!t||!t.visible)return!1;var a=e.data.global;n=t.interactive||n;var s=!1,d=n;if(t.hitArea?d=!1:o&&t._mask&&!t._mask.containsPoint(a)&&(o=!1),t.interactiveChildren&&t.children)for(var l=t.children,u=l.length-1;0<=u;u--){var i=l[u],p=this.processInteractive(e,i,r,o,d);if(p){if(!i.parent)continue;d=!1,p&&(e.target&&(o=!1),s=!0)}}return n&&(o&&!e.target&&(t.hitArea?(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):t.containsPoint&&t.containsPoint(a)&&(s=!0)),t.interactive&&(s&&!e.target&&(e.target=t),r&&r(e,t,!!s))),s},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&'touch'===e.pointerType)){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var r=t.length,o=0;o<r;o++){var n=t[o],a=this.getInteractionDataForPointerId(n),i=this.configureInteractionEventForDOMEvent(this.eventData,n,a);if(i.data.originalEvent=e,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit('pointerdown',i),'touch'===n.pointerType)this.emit('touchstart',i);else if('mouse'===n.pointerType||'pen'===n.pointerType){var s=2===n.button;this.emit(s?'rightdown':'mousedown',this.eventData)}}}},t.prototype.processPointerDown=function(e,t,r){var o=e.data,n=e.data.identifier;if(r)if(t.trackedPointers[n]||(t.trackedPointers[n]=new f.default(n)),this.dispatchEvent(t,'pointerdown',e),'touch'===o.pointerType)this.dispatchEvent(t,'touchstart',e);else if('mouse'===o.pointerType||'pen'===o.pointerType){var a=2===o.button;a?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,a?'rightdown':'mousedown',e)}},t.prototype.onPointerComplete=function(e,t,r){for(var o=this.normalizeToPointerData(e),n=o.length,a=e.target===this.interactionDOMElement?'':'outside',s=0;s<n;s++){var i=o[s],d=this.getInteractionDataForPointerId(i),l=this.configureInteractionEventForDOMEvent(this.eventData,i,d);if(l.data.originalEvent=e,this.processInteractive(l,this.renderer._lastObjectRendered,r,t||!a),this.emit(t?'pointercancel':'pointerup'+a,l),'mouse'===i.pointerType||'pen'===i.pointerType){var u=2===i.button;this.emit(u?'rightup'+a:'mouseup'+a,l)}else'touch'===i.pointerType&&(this.emit(t?'touchcancel':'touchend'+a,l),this.releaseInteractionDataForPointerId(i.pointerId,d))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&'touch'===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var r=e.data,o=e.data.identifier;void 0!==t.trackedPointers[o]&&(delete t.trackedPointers[o],this.dispatchEvent(t,'pointercancel',e),'touch'===r.pointerType&&this.dispatchEvent(t,'touchcancel',e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&'touch'===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,r){var o=e.data,n=e.data.identifier,a=t.trackedPointers[n],i='touch'===o.pointerType,s='mouse'===o.pointerType||'pen'===o.pointerType;if(s){var d=2===o.button,l=f.default.FLAGS,u=d?l.RIGHT_DOWN:l.LEFT_DOWN,p=void 0!==a&&a.flags&u;r?(this.dispatchEvent(t,d?'rightup':'mouseup',e),p&&this.dispatchEvent(t,d?'rightclick':'click',e)):p&&this.dispatchEvent(t,d?'rightupoutside':'mouseupoutside',e),a&&(d?a.rightDown=!1:a.leftDown=!1)}r?(this.dispatchEvent(t,'pointerup',e),i&&this.dispatchEvent(t,'touchend',e),a&&(this.dispatchEvent(t,'pointertap',e),i&&(this.dispatchEvent(t,'tap',e),a.over=!1))):a&&(this.dispatchEvent(t,'pointerupoutside',e),i&&this.dispatchEvent(t,'touchendoutside',e)),a&&a.none&&delete t.trackedPointers[n]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&'touch'===e.pointerType)){var t=this.normalizeToPointerData(e);'mouse'===t[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var r=t.length,o=0;o<r;o++){var n=t[o],a=this.getInteractionDataForPointerId(n),i=this.configureInteractionEventForDOMEvent(this.eventData,n,a);i.data.originalEvent=e;var s='touch'!==n.pointerType||this.moveWhenInside;this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit('pointermove',i),'touch'===n.pointerType&&this.emit('touchmove',i),('mouse'===n.pointerType||'pen'===n.pointerType)&&this.emit('mousemove',i)}'mouse'===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,r){var o=e.data,n='touch'===o.pointerType,a='mouse'===o.pointerType||'pen'===o.pointerType;a&&this.processPointerOverOut(e,t,r),(!this.moveWhenInside||r)&&(this.dispatchEvent(t,'pointermove',e),n&&this.dispatchEvent(t,'touchmove',e),a&&this.dispatchEvent(t,'mousemove',e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&'touch'===e.pointerType)){var t=this.normalizeToPointerData(e),r=t[0];'mouse'===r.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(r),n=this.configureInteractionEventForDOMEvent(this.eventData,r,o);n.data.originalEvent=r,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit('pointerout',n),'mouse'===r.pointerType||'pen'===r.pointerType?this.emit('mouseout',n):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(e,t,r){var o=e.data,n=e.data.identifier,a='mouse'===o.pointerType||'pen'===o.pointerType,i=t.trackedPointers[n];r&&!i&&(i=t.trackedPointers[n]=new f.default(n)),void 0===i||(r&&this.mouseOverRenderer?(!i.over&&(i.over=!0,this.dispatchEvent(t,'pointerover',e),a&&this.dispatchEvent(t,'mouseover',e)),a&&null===this.cursor&&(this.cursor=t.cursor)):i.over&&(i.over=!1,this.dispatchEvent(t,'pointerout',this.eventData),a&&this.dispatchEvent(t,'mouseout',e),i.none&&delete t.trackedPointers[n]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e),r=t[0],o=this.getInteractionDataForPointerId(r),n=this.configureInteractionEventForDOMEvent(this.eventData,r,o);n.data.originalEvent=r,'mouse'===r.pointerType&&(this.mouseOverRenderer=!0),this.emit('pointerover',n),('mouse'===r.pointerType||'pen'===r.pointerType)&&this.emit('mouseover',n)},t.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,r;return t===b||'mouse'===e.pointerType?r=this.mouse:this.activeInteractionData[t]?r=this.activeInteractionData[t]:(r=this.interactionDataPool.pop()||new p.default,r.identifier=t,this.activeInteractionData[t]=r),r._copyEvent(e),r},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t._reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,r){return e.data=r,this.mapPositionToPoint(r.global,t.clientX,t.clientY),navigator.isCocoonJS&&'touch'===t.pointerType&&(r.global.x/=this.resolution,r.global.y/=this.resolution),'touch'===t.pointerType&&(t.globalX=r.global.x,t.globalY=r.global.y),r.originalEvent=t,e._reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var r=0,o=e.changedTouches.length,n;r<o;r++)n=e.changedTouches[r],'undefined'==typeof n.button&&(n.button=e.touches.length?1:0),'undefined'==typeof n.buttons&&(n.buttons=e.touches.length?1:0),'undefined'==typeof n.isPrimary&&(n.isPrimary=1===e.touches.length&&'touchstart'===e.type),'undefined'==typeof n.width&&(n.width=n.radiusX||1),'undefined'==typeof n.height&&(n.height=n.radiusY||1),'undefined'==typeof n.tiltX&&(n.tiltX=0),'undefined'==typeof n.tiltY&&(n.tiltY=0),'undefined'==typeof n.pointerType&&(n.pointerType='touch'),'undefined'==typeof n.pointerId&&(n.pointerId=n.identifier||0),'undefined'==typeof n.pressure&&(n.pressure=n.force||0.5),n.twist=0,n.tangentialPressure=0,'undefined'==typeof n.layerX&&(n.layerX=n.offsetX=n.clientX),'undefined'==typeof n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,t.push(n);else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent?t.push(e):('undefined'==typeof e.isPrimary&&(e.isPrimary=!0),'undefined'==typeof e.width&&(e.width=1),'undefined'==typeof e.height&&(e.height=1),'undefined'==typeof e.tiltX&&(e.tiltX=0),'undefined'==typeof e.tiltY&&(e.tiltY=0),'undefined'==typeof e.pointerType&&(e.pointerType='mouse'),'undefined'==typeof e.pointerId&&(e.pointerId=b),'undefined'==typeof e.pressure&&(e.pressure=0.5),e.twist=0,e.tangentialPressure=0,e.isNormalized=!0,t.push(e));return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(m.default);t.default=T,l.WebGLRenderer.registerPlugin('interaction',T),l.CanvasRenderer.registerPlugin('interaction',T)},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=function(){function e(t){r(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){t?this._flags|=e:this._flags&=~e},o(e,[{key:'pointerId',get:function(){return this._pointerId}},{key:'flags',get:function(){return this._flags},set:function(e){this._flags=e}},{key:'none',get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:'over',get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:'rightDown',get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:'leftDown',get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),e}();t.default=n,n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(83);Object.defineProperty(t,'InteractionData',{enumerable:!0,get:function(){return o(n).default}});var a=r(167);Object.defineProperty(t,'InteractionManager',{enumerable:!0,get:function(){return o(a).default}});var i=r(84);Object.defineProperty(t,'interactiveTarget',{enumerable:!0,get:function(){return o(i).default}})},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.shared=t.Resource=t.textureParser=t.getResourcePath=t.spritesheetParser=t.parseBitmapFontData=t.bitmapFontParser=t.Loader=void 0;var n=r(85);Object.defineProperty(t,'bitmapFontParser',{enumerable:!0,get:function(){return o(n).default}}),Object.defineProperty(t,'parseBitmapFontData',{enumerable:!0,get:function(){return n.parse}});var a=r(86);Object.defineProperty(t,'spritesheetParser',{enumerable:!0,get:function(){return o(a).default}}),Object.defineProperty(t,'getResourcePath',{enumerable:!0,get:function(){return a.getResourcePath}});var i=r(87);Object.defineProperty(t,'textureParser',{enumerable:!0,get:function(){return o(i).default}});var s=r(17);Object.defineProperty(t,'Resource',{enumerable:!0,get:function(){return s.Resource}});var d=r(58),l=o(d),u=r(171),p=o(u);t.Loader=p.default;var c=new p.default;c.destroy=function(){},t.shared=c;var h=l.default.prototype;h._loader=null,Object.defineProperty(h,'loader',{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?c:new p.default}return this._loader}}),h._parentDestroy=h.destroy,h.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(17),d=o(s),l=r(196),u=r(9),p=o(u),c=r(87),h=o(c),g=r(86),f=o(g),y=r(85),m=o(y),_=function(e){function t(r,o){n(this,t);var s=a(this,e.call(this,r,o));p.default.call(s);for(var d=0;d<t._pixiMiddleware.length;++d)s.use(t._pixiMiddleware[d]());return s.onStart.add(function(e){return s.emit('start',e)}),s.onProgress.add(function(e,t){return s.emit('progress',e,t)}),s.onError.add(function(t,e,o){return s.emit('error',t,e,o)}),s.onLoad.add(function(e,t){return s.emit('load',e,t)}),s.onComplete.add(function(e,t){return s.emit('complete',e,t)}),s}return i(t,e),t.addPixiMiddleware=function(e){t._pixiMiddleware.push(e)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(d.default);for(var x in t.default=_,p.default.prototype)_.prototype[x]=p.default.prototype[x];_._pixiMiddleware=[l.blobMiddlewareFactory,h.default,f.default,m.default];var b=d.default.Resource;b.setExtensionXhrType('fnt',b.XHR_RESPONSE_TYPE.DOCUMENT)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(88),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=10,u=function(e){function t(r,a,i,s,d){o(this,t);var u=n(this,e.call(this,r,4,4));return u._origWidth=r.orig.width,u._origHeight=r.orig.height,u._width=u._origWidth,u._height=u._origHeight,u.leftWidth='undefined'==typeof a?l:a,u.rightWidth='undefined'==typeof s?l:s,u.topHeight='undefined'==typeof i?l:i,u.bottomHeight='undefined'==typeof d?l:d,u.refresh(!0),u}return a(t,e),t.prototype.updateHorizontalVertices=function(){var e=this.vertices;e[9]=e[11]=e[13]=e[15]=this._topHeight,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices;e[2]=e[10]=e[18]=e[26]=this._leftWidth,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(e){var t=e.context;t.globalAlpha=this.worldAlpha;var r=this.worldTransform,o=e.resolution;e.roundPixels?t.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,0|r.tx*o,0|r.ty*o):t.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o);var n=this._texture.baseTexture,a=n.source,i=n.width,s=n.height;this.drawSegment(t,a,i,s,0,1,10,11),this.drawSegment(t,a,i,s,2,3,12,13),this.drawSegment(t,a,i,s,4,5,14,15),this.drawSegment(t,a,i,s,8,9,18,19),this.drawSegment(t,a,i,s,10,11,20,21),this.drawSegment(t,a,i,s,12,13,22,23),this.drawSegment(t,a,i,s,16,17,26,27),this.drawSegment(t,a,i,s,18,19,28,29),this.drawSegment(t,a,i,s,20,21,30,31)},t.prototype.drawSegment=function(e,t,r,o,n,a,i,s){var d=this.uvs,l=this.vertices,u=(d[i]-d[n])*r,p=(d[s]-d[a])*o,c=l[i]-l[n],h=l[s]-l[a];1>u&&(u=1),1>p&&(p=1),1>c&&(c=1),1>h&&(h=1),e.drawImage(t,d[n]*r,d[a]*o,u,p,l[n],l[a],c,h)},t.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,r=this._texture;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var o=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=o*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-o*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty=!0,this.multiplyUvs()},i(t,[{key:'width',get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:'height',get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:'leftWidth',get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:'rightWidth',get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:'topHeight',get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:'bottomHeight',get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(d.default);t.default=u},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(16),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=function(e){function t(r,a){o(this,t);var i=n(this,e.call(this,r));return i.points=a,i.vertices=new Float32Array(4*a.length),i.uvs=new Float32Array(4*a.length),i.colors=new Float32Array(2*a.length),i.indices=new Uint16Array(2*a.length),i.autoUpdate=!0,i.refresh(),i}return a(t,e),t.prototype._refresh=function(){var e=this.points;if(!(1>e.length)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,r=this.indices,o=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,o[0]=1,o[1]=1,r[0]=0,r[1]=1;for(var n=e.length,a=1;a<n;a++){var i=4*a,s=a/(n-1);t[i]=s,t[i+1]=0,t[i+2]=s,t[i+3]=1,i=2*a,o[i]=1,o[i+1]=1,i=2*a,r[i]=i,r[i+1]=i+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(1>e.length))for(var t=e[0],r=void 0,o=0,n=0,a=this.vertices,s=e.length,d=0;d<s;d++){var i=e[d],l=4*d;r=d<e.length-1?e[d+1]:i,n=-(r.x-t.x),o=r.y-t.y;var u=10*(1-d/(s-1));1<u&&(u=1);var p=Math.sqrt(o*o+n*n),c=this._texture.height/2;o/=p,n/=p,o*=c,n*=c,a[l]=i.x+o,a[l+1]=i.y+n,a[l+2]=i.x-o,a[l+3]=i.y-n,t=i}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(s.default);t.default=d},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var n=Math.sqrt;t.__esModule=!0;var a=r(0),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),s=r(16),d=function(e){return e&&e.__esModule?e:{default:e}}(s),l=function(){function e(t){o(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,r=t.context,o=e.worldTransform,n=t.resolution;t.roundPixels?r.setTransform(o.a*n,o.b*n,o.c*n,o.d*n,0|o.tx*n,0|o.ty*n):r.setTransform(o.a*n,o.b*n,o.c*n,o.d*n,o.tx*n,o.ty*n),t.setBlendMode(e.blendMode),e.drawMode===d.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,r=0,o;r<t-2;r++)o=2*r,this._renderDrawTriangle(e,o,o+2,o+4)},e.prototype._renderTriangles=function(e){for(var t=e.indices,r=t.length,o=0;o<r;o+=3){var n=2*t[o],a=2*t[o+1],i=2*t[o+2];this._renderDrawTriangle(e,n,a,i)}},e.prototype._renderDrawTriangle=function(e,t,r,o){var a=this.renderer.context,i=e.uvs,s=e.vertices,d=e._texture;if(d.valid){var l=d.baseTexture,u=l.source,p=l.width,c=l.height,h,g,f,y,m,_;if(e.uploadUvTransform){var x=e._uvTransform.mapCoord;h=(i[t]*x.a+i[t+1]*x.c+x.tx)*l.width,g=(i[r]*x.a+i[r+1]*x.c+x.tx)*l.width,f=(i[o]*x.a+i[o+1]*x.c+x.tx)*l.width,y=(i[t]*x.b+i[t+1]*x.d+x.ty)*l.height,m=(i[r]*x.b+i[r+1]*x.d+x.ty)*l.height,_=(i[o]*x.b+i[o+1]*x.d+x.ty)*l.height}else h=i[t]*l.width,g=i[r]*l.width,f=i[o]*l.width,y=i[t+1]*l.height,m=i[r+1]*l.height,_=i[o+1]*l.height;var b=s[t],v=s[r],T=s[o],S=s[t+1],E=s[r+1],P=s[o+1];if(0<e.canvasPadding){var C=e.canvasPadding/e.worldTransform.a,w=e.canvasPadding/e.worldTransform.d,A=(b+v+T)/3,I=(S+E+P)/3,M=b-A,R=S-I,O=n(M*M+R*R);b=A+M/O*(O+C),S=I+R/O*(O+w),M=v-A,R=E-I,O=n(M*M+R*R),v=A+M/O*(O+C),E=I+R/O*(O+w),M=T-A,R=P-I,O=n(M*M+R*R),T=A+M/O*(O+C),P=I+R/O*(O+w)}a.save(),a.beginPath(),a.moveTo(b,S),a.lineTo(v,E),a.lineTo(T,P),a.closePath(),a.clip();var D=h*m+y*f+g*_-m*f-y*g-h*_,k=b*m+y*T+v*_-m*T-y*v-b*_,L=h*v+b*f+g*T-v*f-b*g-h*T,B=h*m*T+y*v*f+b*g*_-b*m*f-y*g*T-h*v*_,N=S*m+y*P+E*_-m*P-y*E-S*_,F=h*E+S*f+g*P-E*f-S*g-h*P,U=h*m*P+y*E*f+S*g*_-S*m*f-y*g*P-h*E*_;a.transform(k/D,N/D,L/D,F/D,B/D,U/D),a.drawImage(u,0,0,p*l.resolution,c*l.resolution,0,0,p,c),a.restore()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,r=e.vertices,o=r.length/2;t.beginPath();for(var n=1;n<o-2;++n){var a=2*n,i=r[a],s=r[a+1],d=r[a+2],l=r[a+3],u=r[a+4],p=r[a+5];t.moveTo(i,s),t.lineTo(d,l),t.lineTo(u,p)}t.fillStyle='#FF0000',t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();t.default=l,i.CanvasRenderer.registerPlugin('mesh',l)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(16);Object.defineProperty(t,'Mesh',{enumerable:!0,get:function(){return o(n).default}});var a=r(176);Object.defineProperty(t,'MeshRenderer',{enumerable:!0,get:function(){return o(a).default}});var i=r(174);Object.defineProperty(t,'CanvasMeshRenderer',{enumerable:!0,get:function(){return o(i).default}});var s=r(88);Object.defineProperty(t,'Plane',{enumerable:!0,get:function(){return o(s).default}});var d=r(172);Object.defineProperty(t,'NineSlicePlane',{enumerable:!0,get:function(){return o(d).default}});var l=r(173);Object.defineProperty(t,'Rope',{enumerable:!0,get:function(){return o(l).default}})},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(7),u=o(l),p=r(16),c=o(p),h=r(8),g=d.Matrix.IDENTITY,f=function(e){function t(r){n(this,t);var o=a(this,e.call(this,r));return o.shader=null,o}return i(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new d.Shader(e,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n','varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n')},t.prototype.render=function(e){var t=this.renderer,r=t.gl,o=e._texture;if(o.valid){var n=e._glDatas[t.CONTEXT_UID];n||(t.bindVao(null),n={shader:this.shader,vertexBuffer:u.default.GLBuffer.createVertexBuffer(r,e.vertices,r.STREAM_DRAW),uvBuffer:u.default.GLBuffer.createVertexBuffer(r,e.uvs,r.STREAM_DRAW),indexBuffer:u.default.GLBuffer.createIndexBuffer(r,e.indices,r.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty},n.vao=new u.default.VertexArrayObject(r).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=n),t.bindVao(n.vao),e.dirty!==n.dirty&&(n.dirty=e.dirty,n.uvBuffer.upload(e.uvs)),e.indexDirty!==n.indexDirty&&(n.indexDirty=e.indexDirty,n.indexBuffer.upload(e.indices)),n.vertexBuffer.upload(e.vertices),t.bindShader(n.shader),n.shader.uniforms.uSampler=t.bindTexture(o),t.state.setBlendMode(e.blendMode),n.shader.uniforms.uTransform&&(e.uploadUvTransform?n.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=g.toArray(!0)),n.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),n.shader.uniforms.alpha=e.worldAlpha,n.shader.uniforms.tint=e.tintRgb;var a=e.drawMode===c.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;n.vao.draw(a,e.indices.length,0)}},t}(d.ObjectRenderer);t.default=f,d.WebGLRenderer.registerPlugin('mesh',f)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=function(){function e(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,'value'in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(2),u=function(e){function t(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,a=arguments[1],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384;o(this,t);var s=n(this,e.call(this)),l=16384;return i>l&&(i=l),i>r&&(i=r),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=i,s._glBuffers={},s._bufferToUpdate=0,s.interactiveChildren=!1,s.blendMode=d.BLEND_MODES.NORMAL,s.roundPixels=!0,s.baseTexture=null,s.setProperties(a),s._tint=null,s._tintRGB=[],s.tint=16777215,s}return a(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]='scale'in e?!!e.scale:this._properties[0],this._properties[1]='position'in e?!!e.position:this._properties[1],this._properties[2]='rotation'in e?!!e.rotation:this._properties[2],this._properties[3]='uvs'in e?!!e.uvs:this._properties[3],this._properties[4]='alpha'in e?!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(!this.baseTexture&&(this.baseTexture=this.children[0]._texture.baseTexture,!this.baseTexture.hasLoaded&&this.baseTexture.once('update',function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){var t=Math.floor(e/this._batchSize);t<this._bufferToUpdate&&(this._bufferToUpdate=t)},t.prototype.renderCanvas=function(e){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,o=!0,n=0,a=0,s=0,d=0,l=e.blendModes[this.blendMode];l!==t.globalCompositeOperation&&(t.globalCompositeOperation=l),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0,i;u<this.children.length;++u)if(i=this.children[u],!!i.visible){var p=i._texture.frame;if(t.globalAlpha=this.worldAlpha*i.alpha,0==i.rotation%(2*Math.PI))o&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),o=!1),n=i.anchor.x*(-p.width*i.scale.x)+i.position.x+0.5,a=i.anchor.y*(-p.height*i.scale.y)+i.position.y+0.5,s=p.width*i.scale.x,d=p.height*i.scale.y;else{o||(o=!0),i.displayObjectUpdateTransform();var c=i.worldTransform;e.roundPixels?t.setTransform(c.a,c.b,c.c,c.d,0|c.tx*e.resolution,0|c.ty*e.resolution):t.setTransform(c.a,c.b,c.c,c.d,c.tx*e.resolution,c.ty*e.resolution),n=i.anchor.x*-p.width+0.5,a=i.anchor.y*-p.height+0.5,s=p.width,d=p.height}var h=i._texture.baseTexture.resolution;t.drawImage(i._texture.baseTexture.source,p.x*h,p.y*h,p.width*h,p.height*h,n*e.resolution,a*e.resolution,s*e.resolution,d*e.resolution)}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null},i(t,[{key:'tint',get:function(){return this._tint},set:function(e){this._tint=e,(0,l.hex2rgb)(e,this._tintRGB)}}]),t}(d.Container);t.default=u},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(177);Object.defineProperty(t,'ParticleContainer',{enumerable:!0,get:function(){return o(n).default}});var a=r(180);Object.defineProperty(t,'ParticleRenderer',{enumerable:!0,get:function(){return o(a).default}})},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a=r(7),s=o(a),i=r(38),d=o(i),l=function(){function e(t,r,o,a){n(this,e),this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=a,this.dynamicProperties=[],this.staticProperties=[];for(var s=0,i;s<r.length;++s)i=r[s],i={attribute:i.attribute,size:i.size,uploadFunction:i.uploadFunction,offset:i.offset},o[s]?this.dynamicProperties.push(i):this.staticProperties.push(i);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,d.default)(this.size),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var r=0,o;r<this.dynamicProperties.length;++r)o=this.dynamicProperties[r],o.offset=t,t+=o.size,this.dynamicStride+=o.size;this.dynamicData=new Float32Array(4*(this.size*this.dynamicStride)),this.dynamicBuffer=s.default.GLBuffer.createVertexBuffer(e,this.dynamicData,e.STREAM_DRAW);var n=0;this.staticStride=0;for(var a=0,i;a<this.staticProperties.length;++a)i=this.staticProperties[a],i.offset=n,n+=i.size,this.staticStride+=i.size;this.staticData=new Float32Array(4*(this.size*this.staticStride)),this.staticBuffer=s.default.GLBuffer.createVertexBuffer(e,this.staticData,e.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var l=0,u;l<this.dynamicProperties.length;++l)u=this.dynamicProperties[l],this.vao.addAttribute(this.dynamicBuffer,u.attribute,e.FLOAT,!1,4*this.dynamicStride,4*u.offset);for(var p=0,c;p<this.staticProperties.length;++p)c=this.staticProperties[p],this.vao.addAttribute(this.staticBuffer,c.attribute,e.FLOAT,!1,4*this.staticStride,4*c.offset)},e.prototype.uploadDynamic=function(e,t,r){for(var o=0,n;o<this.dynamicProperties.length;o++)n=this.dynamicProperties[o],n.uploadFunction(e,t,r,this.dynamicData,this.dynamicStride,n.offset);this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(e,t,r){for(var o=0,n;o<this.staticProperties.length;o++)n=this.staticProperties[o],n.uploadFunction(e,t,r,this.staticData,this.staticStride,n.offset);this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},e}();t.default=l},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function i(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(0),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(181),u=o(l),p=r(179),c=o(p),h=function(e){function t(r){n(this,t);var o=a(this,e.call(this,r));return o.shader=null,o.indexBuffer=null,o.properties=null,o.tempMatrix=new d.Matrix,o.CONTEXT_UID=0,o}return i(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new u.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,r=e._maxSize,o=e._batchSize,n=this.renderer,a=t.length;if(0!==a){a>r&&(a=r);var s=e._glBuffers[n.CONTEXT_UID];s||(s=e._glBuffers[n.CONTEXT_UID]=this.generateBuffers(e)),this.renderer.setBlendMode(e.blendMode);var d=n.gl,l=e.worldTransform.copy(this.tempMatrix);l.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uAlpha=e.worldAlpha,this.shader.uniforms.tint=e._tintRGB;var u=t[0]._texture.baseTexture;this.shader.uniforms.uSampler=n.bindTexture(u);for(var p=0,i=0,c;p<a;p+=o,i+=1){c=a-p,c>o&&(c=o);var h=s[i];h.uploadDynamic(t,p,c),e._bufferToUpdate===i&&(h.uploadStatic(t,p,c),e._bufferToUpdate=i+1),n.bindVao(h.vao),h.vao.draw(d.TRIANGLES,6*c)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],o=e._maxSize,n=e._batchSize,a=e._properties,s=0;s<o;s+=n)r.push(new c.default(t,this.properties,a,n));return r},t.prototype.uploadVertices=function(e,t,r,o,n,a){for(var s=0,d=0,l=0,u=0,p=0;p<r;++p){var i=e[t+p],c=i._texture,h=i.scale.x,g=i.scale.y,f=c.trim,y=c.orig;f?(d=f.x-i.anchor.x*y.width,s=d+f.width,u=f.y-i.anchor.y*y.height,l=u+f.height):(s=y.width*(1-i.anchor.x),d=y.width*-i.anchor.x,l=y.height*(1-i.anchor.y),u=y.height*-i.anchor.y),o[a]=d*h,o[a+1]=u*g,o[a+n]=s*h,o[a+n+1]=u*g,o[a+2*n]=s*h,o[a+2*n+1]=l*g,o[a+3*n]=d*h,o[a+3*n+1]=l*g,a+=4*n}},t.prototype.uploadPosition=function(e,t,r,o,n,a){for(var s=0,i;s<r;s++)i=e[t+s].position,o[a]=i.x,o[a+1]=i.y,o[a+n]=i.x,o[a+n+1]=i.y,o[a+2*n]=i.x,o[a+2*n+1]=i.y,o[a+3*n]=i.x,o[a+3*n+1]=i.y,a+=4*n},t.prototype.uploadRotation=function(e,t,r,o,n,a){for(var s=0,i;s<r;s++)i=e[t+s].rotation,o[a]=i,o[a+n]=i,o[a+2*n]=i,o[a+3*n]=i,a+=4*n},t.prototype.uploadUvs=function(e,t,r,o,n,a){for(var s=0,i;s<r;++s)i=e[t+s]._texture._uvs,i?(o[a]=i.x0,o[a+1]=i.y0,o[a+n]=i.x1,o[a+n+1]=i.y1,o[a+2*n]=i.x2,o[a+2*n+1]=i.y2,o[a+3*n]=i.x3,o[a+3*n+1]=i.y3,a+=4*n):(o[a]=0,o[a+1]=0,o[a+n]=0,o[a+n+1]=0,o[a+2*n]=0,o[a+2*n+1]=0,o[a+3*n]=0,o[a+3*n+1]=0,a+=4*n)},t.prototype.uploadAlpha=function(e,t,r,o,n,a){for(var s=0,i;s<r;s++)i=e[t+s].alpha,o[a]=i,o[a+n]=i,o[a+2*n]=i,o[a+3*n]=i,a+=4*n},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(d.ObjectRenderer);t.default=h,d.WebGLRenderer.registerPlugin('particle',h)},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=r(12),s=function(e){return e&&e.__esModule?e:{default:e}}(i),d=function(e){function t(r){return o(this,t),n(this,e.call(this,r,'attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvarying float vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor;\n}','varying vec2 vTextureCoord;\nvarying float vColor;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nuniform vec3 tint;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * vec4(tint * uAlpha, uAlpha);\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}'))}return a(t,e),t}(s.default);t.default=d},function(){'use strict';var e=Math.sign;e||(e=function(e){return e=+e,0===e||isNaN(e)?e:0<e?1:-1})},function(e,t,r){'use strict';var o=r(97),n=function(e){return e&&e.__esModule?e:{default:e}}(o);Object.assign||(Object.assign=n.default)},function(e,t,r){'use strict';r(183),r(185),r(182),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(e,t,r){'use strict';(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(e.performance&&e.performance.now)){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var r=Date.now(),o=['ms','moz','webkit','o'],n=0,a;n<o.length&&!e.requestAnimationFrame;++n)a=o[n],e.requestAnimationFrame=e[a+'RequestAnimationFrame'],e.cancelAnimationFrame=e[a+'CancelAnimationFrame']||e[a+'CancelRequestAnimationFrame'];e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if('function'!=typeof e)throw new TypeError(e+'is not a function');var t=Date.now(),o=16+r-t;return 0>o&&(o=0),r=t,setTimeout(function(){r=Date.now(),e(performance.now())},o)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){return clearTimeout(e)})}).call(t,r(18))},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(t instanceof l.BaseTexture){var r=t.source,o=0===r.width?e.canvas.width:s(e.canvas.width,r.width),n=0===r.height?e.canvas.height:s(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,o,n,0,0,e.canvas.width,e.canvas.height),!0}return!1}var s=Math.min;t.__esModule=!0;var d=r(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(d),u=r(40),p=function(e){return e&&e.__esModule?e:{default:e}}(u),c=16,h=function(e){function t(r){o(this,t);var a=n(this,e.call(this,r));return a.uploadHookHelper=a,a.canvas=document.createElement('canvas'),a.canvas.width=c,a.canvas.height=c,a.ctx=a.canvas.getContext('2d'),a.registerUploadHook(i),a}return a(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(p.default);t.default=h,l.CanvasRenderer.registerPlugin('prepare',h)},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(189);Object.defineProperty(t,'webgl',{enumerable:!0,get:function(){return o(n).default}});var a=r(186);Object.defineProperty(t,'canvas',{enumerable:!0,get:function(){return o(a).default}});var i=r(40);Object.defineProperty(t,'BasePrepare',{enumerable:!0,get:function(){return o(i).default}});var s=r(89);Object.defineProperty(t,'CountLimiter',{enumerable:!0,get:function(){return o(s).default}});var d=r(188);Object.defineProperty(t,'TimeLimiter',{enumerable:!0,get:function(){return o(d).default}})},function(e,t){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var o=function(){function e(t){r(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();t.default=o},function(e,t,r){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function n(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e}function a(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return!!(t instanceof u.BaseTexture)&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function s(e,t){return!!(t instanceof u.Graphics)&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function d(e,t){return!!(e instanceof u.Graphics)&&(t.push(e),!0)}t.__esModule=!0;var l=r(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),p=r(40),c=function(e){return e&&e.__esModule?e:{default:e}}(p),h=function(e){function t(r){o(this,t);var a=n(this,e.call(this,r));return a.uploadHookHelper=a.renderer,a.registerFindHook(d),a.registerUploadHook(i),a.registerUploadHook(s),a}return a(t,e),t}(c.default);t.default=h,u.WebGLRenderer.registerPlugin('prepare',h)},function(e,t,r){(function(e,o){var n;(function(a){function s(e){throw new RangeError(R[e])}function i(e,t){for(var r=e.length,o=[];r--;)o[r]=t(e[r]);return o}function d(e,t){var r=e.split('@'),o='';1<r.length&&(o=r[0]+'@',e=r[1]),e=e.replace(M,'.');var n=e.split('.'),a=i(n,t).join('.');return o+a}function l(e){for(var t=[],r=0,o=e.length,n,a;r<o;)n=e.charCodeAt(r++),55296<=n&&56319>=n&&r<o?(a=e.charCodeAt(r++),56320==(64512&a)?t.push(((1023&n)<<10)+(1023&a)+65536):(t.push(n),r--)):t.push(n);return t}function u(e){return i(e,function(e){var t='';return 65535<e&&(e-=65536,t+=L(55296|1023&e>>>10),e=56320|1023&e),t+=L(e),t}).join('')}function p(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:b}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,r){var o=0;for(e=r?D(e/E):e>>1,e+=D(e/t);e>O*T>>1;o+=b)e=D(e/O);return D(o+(O+1)*e/(e+S))}function g(e){var r=[],o=e.length,a=0,i=C,n=P,d,l,c,g,f,y,m,_,S,t;for(l=e.lastIndexOf(w),0>l&&(l=0),c=0;c<l;++c)128<=e.charCodeAt(c)&&s('not-basic'),r.push(e.charCodeAt(c));for(g=0<l?l+1:0;g<o;){for(f=a,y=1,m=b;;m+=b){if(g>=o&&s('invalid-input'),_=p(e.charCodeAt(g++)),(_>=b||_>D((x-a)/y))&&s('overflow'),a+=_*y,S=m<=n?v:m>=n+T?T:m-n,_<S)break;t=b-S,y>D(x/t)&&s('overflow'),y*=t}d=r.length+1,n=h(a-f,d,0==f),D(a/d)>x-i&&s('overflow'),i+=D(a/d),a%=d,r.splice(a++,0,i)}return u(r)}function f(e){var r=[],o,n,a,i,d,u,p,g,f,y,t,m,_,S,E;for(e=l(e),m=e.length,o=C,n=0,d=P,u=0;u<m;++u)t=e[u],128>t&&r.push(L(t));for(a=i=r.length,i&&r.push(w);a<m;){for(p=x,u=0;u<m;++u)t=e[u],t>=o&&t<p&&(p=t);for(_=a+1,p-o>D((x-n)/_)&&s('overflow'),n+=(p-o)*_,o=p,u=0;u<m;++u)if(t=e[u],t<o&&++n>x&&s('overflow'),t==o){for(g=n,f=b;;f+=b){if(y=f<=d?v:f>=d+T?T:f-d,g<y)break;E=g-y,S=b-y,r.push(L(c(y+E%S,0))),g=D(E/S)}r.push(L(c(g,0))),d=h(n,_,a==i),n=0,++a}++n,++o}return r.join('')}var y='object'==typeof t&&t&&!t.nodeType&&t,m='object'==typeof e&&e&&!e.nodeType&&e,_='object'==typeof o&&o;(_.global===_||_.window===_||_.self===_)&&(a=_);var x=2147483647,b=36,v=1,T=26,S=38,E=700,P=72,C=128,w='-',A=/^xn--/,I=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:'Overflow: input needs wider integers to process',"not-basic":'Illegal input >= 0x80 (not a basic code point)',"invalid-input":'Invalid input'},O=b-v,D=Math.floor,L=String.fromCharCode,k;k={version:'1.4.1',ucs2:{decode:l,encode:u},decode:g,encode:f,toASCII:function(e){return d(e,function(e){return I.test(e)?'xn--'+f(e):e})},toUnicode:function(e){return d(e,function(e){return A.test(e)?g(e.slice(4).toLowerCase()):e})}};n=function(){return k}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))})(this)}).call(t,r(198)(e),r(18))},function(e){'use strict';function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,o,n,a){o=o||'&',n=n||'=';var s={};if('string'!=typeof e||0===e.length)return s;var d=/\+/g;e=e.split(o);var l=1e3;a&&'number'==typeof a.maxKeys&&(l=a.maxKeys);var u=e.length;0<l&&u>l&&(u=l);for(var p=0;p<u;++p){var i=e[p].replace(d,'%20'),c=i.indexOf(n),h,g,f,y;0<=c?(h=i.substr(0,c),g=i.substr(c+1)):(h=i,g=''),f=decodeURIComponent(h),y=decodeURIComponent(g),t(s,f)?r(s[f])?s[f].push(y):s[f]=[s[f],y]:s[f]=y}return s};var r=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)}},function(e){'use strict';function t(e,t){if(e.map)return e.map(t);for(var r=[],o=0;o<e.length;o++)r.push(t(e[o],o));return r}var r=function(e){switch(typeof e){case'string':return e;case'boolean':return e?'true':'false';case'number':return isFinite(e)?e:'';default:return'';}};e.exports=function(e,a,i,s){return a=a||'&',i=i||'=',null===e&&(e=void 0),'object'==typeof e?t(n(e),function(n){var s=encodeURIComponent(r(n))+i;return o(e[n])?t(e[n],function(e){return s+encodeURIComponent(r(e))}).join(a):s+encodeURIComponent(r(e[n]))}).join(a):s?encodeURIComponent(r(s))+i+encodeURIComponent(r(e)):''};var o=Array.isArray||function(e){return'[object Array]'===Object.prototype.toString.call(e)},n=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){'use strict';t.decode=t.parse=r(191),t.encode=t.stringify=r(192)},function(e){'use strict';e.exports=function(e,t,r){var o=e.length,n;if(!(t>=o||0===r)){r=t+r>o?o-t:r;var a=o-r;for(n=t;n<a;++n)e[n]=e[n+r];e.length=a}}},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}t.__esModule=!0;var a='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},i=r(46),s=o(i),d=r(47),l=o(d),u=r(91),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c=r(41),h=o(c),g=/(#[\w-]+)?$/,f=function(){function e(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'',o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;n(this,e),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString='',this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,r){return t._loadResource(e,r)},this._queue=p.queue(this._boundLoadResource,o),this._queue.pause(),this.resources={},this.onProgress=new s.default,this.onError=new s.default,this.onLoad=new s.default,this.onStart=new s.default,this.onComplete=new s.default}return e.prototype.add=function(e,t,r,o){if(Array.isArray(e)){for(var n=0;n<e.length;++n)this.add(e[n]);return this}if('object'===('undefined'==typeof e?'undefined':a(e))&&(o=t||e.callback||e.onComplete,r=e,t=e.url,e=e.name||e.key||e.url),'string'!=typeof t&&(o=r,r=t,t=e),'string'!=typeof t)throw new Error('No url passed to add resource to loader.');if('function'==typeof r&&(o=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error('Cannot add resources while the loader is running.');if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new h.default(e,t,r),'function'==typeof o&&this.resources[e].onAfterMiddleware.once(o),this.loading){for(var i=r.parentResource,s=[],d=0;d<i.children.length;++d)i.children[d].isComplete||s.push(i.children[d]);var l=i.progressChunk*(s.length+1),u=l/(s.length+2);i.children.push(this.resources[e]),i.progressChunk=u;for(var p=0;p<s.length;++p)s[p].progressChunk=u;this.resources[e].progressChunk=u}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},e.prototype.load=function(e){if('function'==typeof e&&this.onComplete.once(e),this.loading)return this;for(var t=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=t;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},e.prototype._prepareUrl=function(e){var t=(0,l.default)(e,{strictMode:!0}),r;if(r=t.protocol||!t.path||0===e.indexOf('//')?e:this.baseUrl.length&&this.baseUrl.lastIndexOf('/')!==this.baseUrl.length-1&&'/'!==e.charAt(0)?this.baseUrl+'/'+e:this.baseUrl+e,this.defaultQueryString){var o=g.exec(r)[0];r=r.substr(0,r.length-o.length),r+=-1===r.indexOf('?')?'?'+this.defaultQueryString:'&'+this.defaultQueryString,r+=o}return r},e.prototype._loadResource=function(e,t){var r=this;e._dequeue=t,p.eachSeries(this._beforeMiddleware,function(t,o){t.call(r,e,function(){o(e.isComplete?{}:null)})},function(){e.isComplete?r._onLoad(e):(e._onLoadBinding=e.onComplete.once(r._onLoad,r),e.load())})},e.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,e._dequeue(),this._resourcesParsing.push(e),p.eachSeries(this._afterMiddleware,function(r,o){r.call(t,e,o)},function(){e.onAfterMiddleware.dispatch(e),t.progress+=e.progressChunk,t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&(t.progress=100,t._onComplete())})},e}();t.default=f},function(e,t,r){'use strict';function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};t.blobMiddlewareFactory=function(){return function(e,t){if(!e.data)return void t();if(e.xhr&&e.xhrType===i.default.XHR_RESPONSE_TYPE.BLOB)if(!window.Blob||'string'==typeof e.data){var r=e.xhr.getResponseHeader('content-type');if(r&&0===r.indexOf('image'))return e.data=new Image,e.data.src='data:'+r+';base64,'+d.default.encodeBinary(e.xhr.responseText),e.type=i.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}else if(0===e.data.type.indexOf('image')){var o=function(){var r=l.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=r,e.type=i.default.TYPE.IMAGE,e.data.onload=function(){l.revokeObjectURL(r),e.data.onload=null,t()},{v:void 0}}();if('object'===('undefined'==typeof o?'undefined':n(o)))return o.v}t()}};var a=r(41),i=o(a),s=r(92),d=o(s),l=window.URL||window.webkitURL},function(e){'use strict';e.exports={isString:function(e){return'string'==typeof e},isObject:function(e){return'object'==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var o=Math.sqrt,n=Math.pow,i=Math.PI;const a=r(5),s=a.Vector,d=a.Body,l=r(6),u=r(202),p=r(203),c=r(200),h=r(201),g=i,f=2*i;e.exports=class{constructor(e,t,r){this.game=e,this.ship=t,this.target=r,this.debug=new l.Sprite(this.game.resources.ship1.texture),this.debug.tint=this.ship.sprite.tint,this.debug.renderable=!1,this.debug.position.set(100,100),this.game.stage.addChild(this.debug),this.state=null,this.stateTime=0,this.lastFire=0,this.states={charge:{weight:1,klass:c,maxTime:7e3},drift:{weight:3,klass:u,maxTime:4e3},corner:{weight:1,klass:h,maxTime:2e3},evadeMoon:{weight:0,klass:p,maxTime:6e3}},this.weights=0;for(let o of Object.keys(this.states))this.weights+=this.states[o].weight;this.pickState()}pickState(){let e=Math.random()*this.weights;for(let t of Object.keys(this.states))if(e-=this.states[t].weight,0>e){this.changeState(t);break}}changeState(e){null!==this.state&&this.state.destroy(),this.state=new this.states[e].klass(this,e,this.states[e].maxTime),this.stateTime=0}update(e,t){if(!this.ship.destroyed){this.ship.shield>this.ship.energy+1?this.ship.adjust(-1):this.ship.shield+1<this.ship.energy&&this.ship.adjust(1);const r=this.ship.body.position;for(let e of this.target.missiles){const t=e.body.position,a=o(n(r.x-t.x,2)+n(r.y-t.y,2));if(65>a){const e=s.angle(r,t);let o=e-this.ship.body.angle+i/2;o>g?o-=f:o<-g&&(o+=f),1>Math.abs(o)&&this.ship.fireBeam()}}if(this.lastFire+=e,'evadeMoon'!==this.state.name&&this.game.settings.planet){const e=this.game.moon.body.position,t=s.add(r,s.mult(this.ship.body.velocity,30));this.debug.position.set(t.x,t.y);const a=o(n(e.x-t.x,2)+n(e.y-t.y,2));100>a&&this.changeState('evadeMoon')}this.state.update(e,t),this.state.done&&this.pickState()}}}},function(e,t,r){var o=Math.pow,n=Math.abs,i=Math.PI;const a=r(5),s=r(24),d=a.Vector,l=i,u=2*i;e.exports=class extends s{update(e,t){if(super.update(e,t),this.target.destroyed)return void(this.done=!0);const r=this.ship.body.position,s=this.target.body,p=this.ship.body;let c=s.position;const h=Math.sqrt(o(r.x-c.x,2)+o(r.y-c.y,2));c=d.sub(d.add(c,d.mult(s.velocity,h/5)),d.mult(p.velocity,h/5));let g=d.angle(r,c)-i/2,a=g-p.angle;return a>l?a-=u:a<-l&&(a+=u),0<a?this.ship.thrustRight(t):0>a&&this.ship.thrustLeft(t),80>h&&1>n(a)?(this.ship.fireBeam(),void(this.done=!0)):void(1<n(a)||50>h||this.ship.thrust(t))}}},function(e,t,r){var o=Math.sqrt,n=Math.pow,i=Math.abs,s=Math.PI;const a=r(5),d=r(24),l=a.Vector,u=s,p=2*s;e.exports=class extends d{constructor(e,t,r){super(e,t,r);let o,n;o=.5>Math.random()?100:this.ai.game.width-100,n=.5>Math.random()?100:this.ai.game.height-100,this.target=l.create(o,n)}update(e,t){super.update(e,t);const r=this.ship.body.position,d=this.ship.body;let c=this.target;const h=this.ai.target.body.position,g=o(n(r.x-h.x,2)+n(r.y-h.y,2));70>g&&this.ship.warp();const f=o(n(r.x-c.x,2)+n(r.y-c.y,2));this.ai.debug.position.set(c.x,c.y);let y=l.angle(c,r),a=y-d.angle-s/2;return a>u?a-=p:a<-u&&(a+=p),0<a?this.ship.thrustRight(t):0>a&&this.ship.thrustLeft(t),80>f?void(this.done=!0):void(1<i(a)||50>f||6<i(d.velocity.x)||6<i(d.velocity.y)||this.ship.thrust(t))}}},function(e,t,r){var o=Math.pow,n=Math.PI;const a=r(24),i=n,s=2*n,d=n/2,l=r(5),u=l.Vector;e.exports=class extends a{update(e,t){if(super.update(e,t),this.target.destroyed)return;const r=this.ship.body.position,n=this.target.body,p=this.ship.body;let c=n.position;const h=Math.sqrt(o(r.x-c.x,2)+o(r.y-c.y,2));if(60>h)return this.done=!0,void this.ai.changeState('corner');let g=u.angle(c,r),a=g-p.angle-d;if(a>i?a-=s:a<-i&&(a+=s),0<a?this.ship.thrustRight(t):0>a&&this.ship.thrustLeft(t),1>Math.abs(a)&&300<this.ai.lastFire){const e=p.angle-d,t=u.add(p.position,u.create(400*Math.cos(e),400*Math.sin(e)));this.ai.debug.position.set(t.x,t.y),this.game.moon&&0!=l.Query.ray([this.game.moon.body],p.position,t,16).length?this.done=!0:(this.ai.lastFire=0,this.ship.fireMissile())}}}},function(e,t,r){var o=Math.sqrt,n=Math.pow,i=Math.PI;const a=r(5),s=a.Vector,d=r(24),l=i,u=2*i;e.exports=class extends d{constructor(e,t,r){super(e,t,r)}update(e,t){super.update(e,t);const r=this.ship.body.position,d=this.game.moon.body,p=this.ship.body;let c=d.position;const h=s.add(r,s.mult(this.ship.body.velocity,30)),g=o(n(c.x-h.x,2)+n(c.y-h.y,2)),f=o(n(c.x-r.x,2)+n(c.y-r.y,2));if(75>f)return this.ship.warp(),void(this.done=!0);if(100<g)return void(this.done=!0);let y=s.angle(c,r),a=y-p.angle-i/2;a>l?a-=u:a<-l&&(a+=u),0<a?this.ship.thrustLeft(t):0>a&&this.ship.thrustRight(t),.5<Math.abs(a)&&this.ai.ship.thrust(t)}}},function(e,t,r){const o=r(6);e.exports=class{constructor(e,t,r){this.sprite=new o.Graphics,this.sprite.position.set(t,r),this.game=e,this.game.stage.addChild(this.sprite)}draw(e){e*=3,this.sprite.clear(),this.sprite.beginFill(16777215),this.sprite.drawRect(0,4,e,8)}}},function(e,t,r){var o=Math.sin,n=Math.cos,s=Math.PI;const a=r(25),d=r(5),i=r(6),l=r(42);e.exports=class extends a{constructor(e,t){const r=new i.Graphics;r.lineStyle(2,t.color),r.arc(0,0,16,-s,0);let a=d.Vector.clone(t.body.position);const l=d.Bodies.circle(a.x,a.y,7,{angle:t.body.angle,frictionAir:0,frictionStatic:0,isSensor:!0});d.Body.setVelocity(l,d.Vector.add(t.body.velocity,d.Vector.create(5*o(t.body.angle),-5*n(t.body.angle)))),super(e,l,r,'BEAM'),this.game=e,this.ship=t,this.body=l,this.sprite=r,this.color=this.ship.color,d.Body.scale(this.body,2,2),this.life=0}update(e,t){super.update(e,t),this.sprite.scale.set(this.sprite.scale.x+.003*e),d.Body.scale(this.body,1+.003*e/2,1+.003*e/2),this.life+=e,300<this.life&&this.destruct()}destruct(){super.destruct(),this.ship.beam=null}collide(e,t){if(super.collide(e),'SHIP'===e.type&&e!==this.ship){const r=[this.ship.color,e.color],u=t[Object.keys(t)[0]].vertex;let p=0;do{p++;const e=Math.random()*(2*s)-s,t=.4+2*Math.random(),a=d.Vector.create(n(e)*t,o(e)*t);new l(this.game,u,a,15+30*Math.random(),r)}while(30>p);this.game.sounds.beamhit.play(),e.damage(4),this.destruct()}else'MISSILE'===e.type&&(this.game.sounds.beamhit.play(),e.destruct(),e.blowUp([this.color,e.color]))}}},function(e,t,r){const o=r(5);e.exports=class{constructor(e){this.game=e,this.hw=this.game.width/2,this.hh=this.game.height/2}update(e,t){const r=o.Composite.allBodies(this.game.engine.world);for(let n of r){let e=Math.atan2(n.position.y-this.hh,n.position.x-this.hw),r=o.Vector.create(-1e-4*Math.cos(e)*t,-1e-4*Math.sin(e)*t);o.Body.applyForce(n,n.position,r)}}destruct(){delete this.game}}},function(e){e.exports=class{constructor(e,t,r){this.keys={},this.down=(e)=>{e.key&&(('Space'===e.code||'Enter'===e.code)&&e.preventDefault(),this.keys[e.key]=!0,this.keys[e.code]=!0),e.btn&&(this.keys[e.btn]=!0),r(e,this.keys)},this.up=(e)=>{e.key&&(delete this.keys[e.key],delete this.keys[e.code]),e.btn&&delete this.keys[e.btn],t(e,this.keys)},this.newGamepad=(t)=>{console.log('Gamepad connected at index %d: %s. %d buttons, %d axes.',t.gamepad.index,t.gamepad.id,t.gamepad.buttons.length,t.gamepad.axes.length)},window.addEventListener('gamepadconnected',this.newGamepad,!0),window.addEventListener('keydown',this.down,!0),window.addEventListener('keyup',this.up,!0)}update(){for(let e of navigator.getGamepads())if(null!==e)for(let t in e.buttons){const r=`${e.index}.${t}`;e.buttons[t].pressed&&!this.keys[r]?this.down({btn:r,gp:e.index,hit:t}):this.keys[r]&&!e.buttons[t].pressed&&this.up({btn:r,gp:e.index,hit:t})}}destroy(){window.removeEventListener('gamepadconnected',this.newGamepad,!0),window.removeEventListener('keydown',this.down,!0),window.removeEventListener('keyup',this.up,!0)}}},function(e,t,r){var o=Math.cos,n=Math.PI;const a=r(6),i=r(43),s=r(44),d=r(94);e.exports=class extends i{start(){this.sf=new s(this),this.bg=new a.Sprite(this.resources.menu.texture),this.stage.addChild(this.bg),this.pointer=new a.Sprite(this.resources.missile1.texture),this.pointer.tint=5636095,this.pointer.position.set(415,240),this.pointer.anchor.set(.5),this.pointer.scale.set(3),this.pointer.rotation=n/2,this.stage.addChild(this.pointer),this.pointerPos=0,this.pointerPoses=[{x:415,y:240},{x:415,y:286},{x:415,y:332},{x:435,y:382},{x:435,y:409},{x:435,y:438},{x:435,y:466}],this.start1p=new a.Graphics,this.start1p.lineStyle(4,16777215),this.start1p.drawRect(0,0,333,35),this.start1p.position.set(440,224),this.stage.addChild(this.start1p),this.start1p.interactive=!0,this.start1p.hitArea=new a.Rectangle(0,0,333,35),this.start1p.renderable=!1,this.start2p=new a.Graphics,this.start2p.lineStyle(4,16777215),this.start2p.drawRect(0,0,333,35),this.start2p.position.set(440,270),this.stage.addChild(this.start2p),this.start2p.interactive=!0,this.start2p.hitArea=new a.Rectangle(0,0,333,35),this.start2p.renderable=!1,this.startai=new a.Graphics,this.startai.lineStyle(4,16777215),this.startai.drawRect(0,0,333,35),this.startai.position.set(440,315),this.stage.addChild(this.startai),this.startai.interactive=!0,this.startai.hitArea=new a.Rectangle(0,0,333,35),this.startai.renderable=!1,this.soundb=new a.Graphics,this.soundb.lineStyle(2,16777215),this.soundb.drawRect(0,0,17,17),this.soundb.position.set(460,374),this.stage.addChild(this.soundb),this.soundb.interactive=!0,this.soundb.hitArea=new a.Rectangle(0,0,17,17),this.gravb=new a.Graphics,this.gravb.lineStyle(2,16777215),this.gravb.drawRect(0,0,17,17),this.gravb.position.set(460,401),this.stage.addChild(this.gravb),this.gravb.interactive=!0,this.gravb.hitArea=new a.Rectangle(0,0,17,17),this.planb=new a.Graphics,this.planb.lineStyle(2,16777215),this.planb.drawRect(0,0,17,17),this.planb.position.set(460,430),this.stage.addChild(this.planb),this.planb.interactive=!0,this.planb.hitArea=new a.Rectangle(0,0,17,17),this.missb=new a.Graphics,this.missb.lineStyle(2,16777215),this.missb.drawRect(0,0,17,17),this.missb.position.set(460,458),this.stage.addChild(this.missb),this.missb.interactive=!0,this.missb.hitArea=new a.Rectangle(0,0,17,17),this.sounds=new a.Sprite(this.resources.check.texture),this.sounds.position.set(460,374),this.sounds.tint=16733695,this.stage.addChild(this.sounds),this.gravs=new a.Sprite(this.resources.check.texture),this.gravs.position.set(460,401),this.gravs.tint=16733695,this.stage.addChild(this.gravs),this.plans=new a.Sprite(this.resources.check.texture),this.plans.position.set(460,430),this.plans.tint=16733695,this.stage.addChild(this.plans),this.misss=new a.Sprite(this.resources.check.texture),this.misss.position.set(460,458),this.misss.tint=16733695,this.stage.addChild(this.misss),this.settings={sound:'false'!==window.localStorage.getItem('sw_sound'),gravity:!('true'!==window.localStorage.getItem('sw_gravity')),planet:'false'!==window.localStorage.getItem('sw_planet'),mseek:'false'!==window.localStorage.getItem('sw_mseek'),pcolors:[5636095,16733695],scolors:[5636095,16733695]},this.sounds.renderable=this.settings.sound,this.plans.renderable=this.settings.planet,this.gravs.renderable=this.settings.gravity,this.misss.renderable=this.settings.mseek,Howler.volume(this.settings.sound?1:0),this.soundb.on('mousedown',()=>{this.toggleSound()}),this.gravb.on('mousedown',()=>{this.toggleGravity()}),this.planb.on('mousedown',()=>{this.togglePlanet()}),this.missb.on('mousedown',()=>{this.toggleSeek()}),this.start1p.on('mousedown',()=>{this.settings.airight=!0,this.settings.aileft=!1,this.main.startGame(this.settings)}),this.start2p.on('mousedown',()=>{this.settings.airight=!1,this.settings.aileft=!1,this.main.ready2P(this.settings)}),this.startai.on('mousedown',()=>{this.settings.airight=!0,this.settings.aileft=!0,this.main.startGame(this.settings)});const e=new a.Container;this.stage.addChild(e);const t=(this.main.leftScore+'').split('');let r=0;for(let o of t){const t=new a.Sprite.fromFrame(`aether-${o}`);t.scale.set(2),t.position.set(r,0),r+=t.width,e.addChild(t)}e.position.set(131,390);const o=new a.Container;this.stage.addChild(o);const i=(this.main.rightScore+'').split('');r=0;for(let e of i){const t=new a.Sprite.fromFrame(`aether-${e}`);t.scale.set(2),t.position.set(r,0),r+=t.width,o.addChild(t)}o.position.set(330,390),this.leftShip=new a.Sprite(this.resources.ship1.texture),this.rightShip=new a.Sprite(this.resources.ship2.texture),this.rightShip.scale.set(2),this.rightShip.anchor.set(.5),this.rightShip.tint=this.settings.scolors[1],this.leftShip.scale.set(2),this.leftShip.anchor.set(.5),this.leftShip.tint=this.settings.scolors[0],this.leftShip.position.set(100,400),this.rightShip.position.set(300,400),this.stage.addChild(this.leftShip),this.stage.addChild(this.rightShip);const d=new a.Container;this.stage.addChild(d);const l=['s','p','a','c','e','w','a','r'];this.logosprites=[];let u=0;for(let e of l){const t=new a.Sprite.fromFrame(`kosov-${e}`);t.scale.set(4),t.position.set(u,30),u+=t.width,d.addChild(t),this.logosprites.push(t)}d.position.set(this.main.width/2-u/2,40),this.r=0,this.seg=2*n/8}toggleGravity(){this.main.sounds.beamhit.play(),this.settings.gravity=!this.settings.gravity,window.localStorage.setItem('sw_gravity',this.settings.gravity),this.gravs.renderable=this.settings.gravity}togglePlanet(){this.main.sounds.beamhit.play(),this.settings.planet=!this.settings.planet,window.localStorage.setItem('sw_planet',this.settings.planet),this.plans.renderable=this.settings.planet}toggleSound(){this.main.sounds.beamhit.play(),this.settings.sound=!this.settings.sound,window.localStorage.setItem('sw_sound',this.settings.sound),this.sounds.renderable=this.settings.sound,Howler.volume(this.settings.sound?1:0)}toggleSeek(){this.main.sounds.beamhit.play(),this.settings.mseek=!this.settings.mseek,window.localStorage.setItem('sw_mseek',this.settings.mseek),this.misss.renderable=this.settings.mseek}down(e){e.preventDefault&&e.preventDefault(),'s'===e.key||'ArrowDown'===e.code||e.btn&&'.13'===e.btn.substr(-3)?(this.main.sounds.beamhit.play(),this.pointerPos+=1,this.pointerPos>=this.pointerPoses.length&&(this.pointerPos=0)):'w'===e.key||'ArrowUp'===e.code||e.btn&&'.12'===e.btn.substr(-3)?(this.main.sounds.beamhit.play(),this.pointerPos-=1,0>this.pointerPos&&(this.pointerPos=this.pointerPoses.length-1)):('Enter'===e.code||'Space'===e.code||'14'!==e.hit&&'15'!==e.hit)&&(0===this.pointerPos?(this.main.sounds.beamhit.play(),this.settings.airight=!0,this.settings.aileft=!1,this.main.startGame(this.settings)):1===this.pointerPos?(this.main.sounds.beamhit.play(),this.settings.airight=!1,this.settings.aileft=!1,this.main.ready2P(this.settings)):2===this.pointerPos?(this.main.sounds.beamhit.play(),this.settings.airight=!0,this.settings.aileft=!0,this.main.startGame(this.settings)):3===this.pointerPos?this.toggleSound():4===this.pointerPos?this.toggleGravity():5===this.pointerPos?this.togglePlanet():6===this.pointerPos&&this.toggleSeek()),this.pointer.position.set(this.pointerPoses[this.pointerPos].x,this.pointerPoses[this.pointerPos].y)}update(e,t){this.r+=.1*t,this.r%=2*n;let r=0;for(let n of this.logosprites)n.position.y=30+15*o(this.r+r),r+=this.seg;this.pointer.scale.set(3+-1*o(this.r))}destroy(){super.destroy()}}},function(e,t,r){var o=Math.sin,n=Math.cos,a=Math.pow,i=Math.PI;const s=r(25),d=r(5),l=r(6),u=r(42),p=2*i,c=i,h=i/2;e.exports=class extends s{constructor(e,t,r){let a=t.left?e.resources.missile1.texture:e.resources.missile2.texture;const i=new l.Sprite(a);i.scale.set(1.5),i.anchor.set(.5);let s=d.Vector.clone(t.body.position);s=d.Vector.add(s,d.Vector.create(24*o(t.body.angle),-24*n(t.body.angle)));const u=d.Bodies.circle(s.x,s.y,6,{angle:t.body.angle,frictionAir:0,frictionStatic:0,density:0.01,isSensor:!0});d.Body.setVelocity(u,d.Vector.add(t.body.velocity,d.Vector.create(2.5*o(t.body.angle),-2.5*n(t.body.angle)))),super(e,u,i,'MISSILE'),this.game=e,this.ship=t,this.target=r,this.life=0,this.tsprite=new l.Sprite(a),this.tsprite.anchor.set(.5),this.tsprite.scale.set(1),this.tsprite.tint=16711680,this.tsprite.renderable=!1,this.game.stage.addChild(this.tsprite),this.sprite.tint=this.ship.left?this.game.settings.scolors[0]:this.game.settings.scolors[1],this.color=this.sprite.tint}update(e,t){if(super.update(e,t),this.destroyed)return;if(this.life+=e,1e4<this.life)return this.destruct(),void this.blowUp(this.color);if(!this.game.settings.mseek)return;const r=this.body.position;let i=this.target.body.position;this.tsprite.position.set(i.x,i.y);const s=Math.sqrt(a(r.x-i.x,2)+a(r.y-i.y,2));if(300>s&&!this.target.cloaking&&!this.target.destroyed){i=d.Vector.sub(d.Vector.add(this.target.body.position,d.Vector.mult(this.target.body.velocity,s/5)),d.Vector.mult(this.body.velocity,s/5)),this.tsprite.position.set(i.x,i.y);let e=d.Vector.angle(i,r),a=e-this.body.angle-h;if(a>c?a-=p:a<-c&&(a+=p),0<a?d.Body.setAngle(this.body,this.body.angle+.05*t):0>a&&d.Body.setAngle(this.body,this.body.angle-.05*t),1<Math.abs(a))return;e=this.body.angle+h;let l=d.Vector.create(-5e-4*n(e)*t,-5e-4*o(e)*t);d.Body.applyForce(this.body,this.body.position,l);let g=d.Vector.create(n(e),o(e));g=d.Vector.mult(g,1+3*Math.random()),g=d.Vector.add(g,this.body.velocity),new u(this.game,d.Vector.clone(this.body.position),g,10,this.color)}}blowUp(e){Math.floor(2*Math.random())?this.game.sounds.hit.play():this.game.sounds.hit2.play();let t=d.Vector.clone(this.body.velocity),r=d.Vector.clone(this.body.position),s=0;do{s++;let i=Math.random()*p-c,a=.4+2*Math.random(),l=d.Vector.add(t,d.Vector.create(n(i)*a,o(i)*a));new u(this.game,r,l,15+30*Math.random(),e)}while(30>s)}destruct(){super.destruct(),this.tsprite.destroy(),this.sprite.destroy(),this.ship.missiles.delete(this)}collide(e){'MISSILE'!==e.type&&'BEAM'!==e.type&&(super.collide(e),this.blowUp([this.color,e.color]),this.destruct())}}},function(e,t,r){const o=r(25),n=r(6),a=r(5);e.exports=class{constructor(e){this.game=e;const t=new n.Sprite(this.game.resources.moon.texture);t.anchor.set(.5),t.position.set(this.game.width/2,this.game.height/2);const r=a.Bodies.circle(this.game.width/2,this.game.height/2,32,{isStatic:!0});this.body=r,this.body.thing=this,this.sprite=t,this.type='MOON',a.World.add(this.game.engine.world,[r]),this.game.stage.addChild(this.sprite)}destruct(){a.World.remove(this.game.engine.world,[this.body]),this.game.stage.removeChild(this.sprite)}collide(){}}},function(e,t,r){const o=r(5),n=o.Body,a=o.Vector;e.exports=class{constructor(e,t,r){this.ship=t,this.game=e,this.controls=r,this.keys=this.game.main.input.keys,this.active={},this.actions={missile:this.ship.fireMissile.bind(this.ship),laser:this.ship.fireBeam.bind(this.ship),cloak:this.ship.cloakToggle.bind(this.ship),warp:this.ship.warp.bind(this.ship)}}down(e){const t=this.controls[e.key]||this.controls[e.code]||this.controls[e.btn];this.keys[t]||t&&(this.active[t]=!0,this.actions[t]&&this.actions[t]())}up(e){const t=this.controls[e.key]||this.controls[e.code]||this.controls[e.btn];t&&delete this.active[t]}update(e,t){this.active.addshield?this.ship.adjust(1):this.active.addenergy&&this.ship.adjust(-1),this.active.thrust&&1<=this.ship.energy&&this.ship.thrust(t),this.active.left&&1<=this.ship.energy&&this.ship.thrustLeft(t),this.active.right&&1<=this.ship.energy&&this.ship.thrustRight(t)}destruct(){delete this.ship,delete this.game}}},function(e,t,r){const o=r(6),n=r(43),a=r(23),i=r(44);e.exports=class extends n{constructor(e,t){super(e),this.settings=t,this.leftCtrls={},this.rightCtrls={},this.leftText='',this.rightText='',this.leftReady=!1,this.rightReady=!1,this.sf=new i(this),this.bg=new o.Sprite(this.resources.ready2p.texture),this.stage.addChild(this.bg),this.ship1=new o.Sprite(this.resources.ship1.texture),this.ship1.anchor.set(.5),this.ship1.scale.set(3),this.ship1.tint=5636095,this.ship1.position.set(200,300),this.stage.addChild(this.ship1),this.ship2=new o.Sprite(this.resources.ship2.texture),this.ship2.anchor.set(.5),this.ship2.scale.set(3),this.ship2.tint=16733695,this.ship2.position.set(600,300),this.stage.addChild(this.ship2)}start(){}down(e){let t='';const r={};if(e.code?'KeyS'===e.code?(t='Left Keyboard',r.w='thrust',r.a='left',r.d='right',r.s='missile',r.q='addshield',r.e='addenergy',r.c='laser',r.x='cloak',r.z='warp'):'KeyK'===e.code?(t='Right Keyboard',r.i='thrust',r.j='left',r.l='right',r.k='missile',r.u='addshield',r.o='addenergy',r.m='laser',r[',']='cloak',r['.']='warp'):'Numpad5'===e.code&&(t='Numpad',r.Numpad8='thrust',r.Numpad4='left',r.Numpad6='right',r.Numpad5='missile',r.Numpad7='addshield',r.Numpad9='addenergy',r.Numpad3='laser',r.Numpad2='cloak',r.Numpad1='warp'):e.hit&&'9'===e.hit&&(t=`Controller ${e.gp+1}`,r[`${e.gp}.12`]='thrust',r[`${e.gp}.14`]='left',r[`${e.gp}.15`]='right',r[`${e.gp}.2`]='missile',r[`${e.gp}.4`]='addshield',r[`${e.gp}.5`]='addenergy',r[`${e.gp}.0`]='laser',r[`${e.gp}.3`]='warp',r[`${e.gp}.1`]='cloak'),t){if(!this.leftReady){this.main.sounds.beamhit.play(),this.leftReady=!0,this.leftCtrls=r,this.leftText=t;const e=new PIXI.Text(t,{fontFamily:'Monospace',fontSize:30,fill:5636095,fontWeight:'bold',align:'center'});e.anchor.set(.5),e.position.set(-e.width,350),this.stage.addChild(e);const o={x:-e.width},n=new a.Tween(o).to({x:200},1e3).onUpdate(()=>{e.position.x=o.x}).easing(a.Easing.Quadratic.Out);n.start()}else if(!this.rightReady&&this.leftText!==t){this.main.sounds.beamhit.play(),this.rightReady=!0,this.rightCtrls=r,this.rightText=t;const e=new PIXI.Text(t,{fontFamily:'Monospace',fontSize:30,fill:16733695,fontWeight:'bold',align:'center'});e.anchor.set(.5),e.position.set(800+e.width,350),this.stage.addChild(e);const o={x:e.position.x},n=new a.Tween(o).to({x:600},1e3).onUpdate(()=>{e.position.x=o.x}).easing(a.Easing.Quadratic.Out);n.start()}else if(this.leftReady&&this.rightReady)return this.main.sounds.beamhit.play(),void this.main.startGame(this.settings,this.leftCtrls,this.rightCtrls);if(this.leftReady&&this.rightReady){const e=new PIXI.Text('READY? PRESS START/FIRE!',{fontFamily:'Monospace',fontSize:30,fill:16777215,fontWeight:'bold',align:'center'});e.anchor.set(.5),e.scale.set(.9),e.position.set(400,600+e.height),this.stage.addChild(e);const t={y:e.position.y},r=new a.Tween(t).to({y:500},500).delay(1e3).onUpdate(()=>{e.position.y=t.y}).easing(a.Easing.Quadratic.In),o={z:.9},n=new a.Tween(o).to({z:1.1},500).onUpdate(()=>{e.scale.set(o.z)}).easing(a.Easing.Circular.In);r.chain(n),n.repeat(Infinity),n.yoyo(!0),r.start()}}}destruct(){super.destruct(),a.removeAll(),this.sf.destruct()}}},function(e,t,r){var o=Math.sin,n=Math.cos,s=Math.PI;const a=r(25),i=r(6),d=r(5),l=r(209),u=r(204),p=r(205),c=r(42),h=d.Body,g=d.Vector,f=r(23);e.exports=class extends a{constructor(e,t,r,o,n){const a=new i.Sprite(e.resources[t].texture),s=d.Bodies.circle(r,o,12,{frictionAir:0,frictionStatic:0,density:.01});a.anchor.set(.5),a.scale.set(1.5),super(e,s,a,'SHIP'),this.game=e,this.sounds=this.game.sounds,this.shield=30,this.cloaking=!1,this.warping=!1,this.warpTime=0,this.cloakTime=0,this.energy=30,this.shieldIcon=new i.Sprite.fromFrame('kosov-s'),this.shieldIcon.position.set(n?5:this.game.width-115,6),this.shieldGraph=new u(e,n?20:this.game.width-100,5),this.shieldGraph.draw(this.shield),this.energyIcon=new i.Sprite.fromFrame('kosov-e'),this.energyIcon.position.set(n?4:this.game.width-116,25),this.energyGraph=new u(e,n?20:this.game.width-100,26),this.energyGraph.draw(this.energy),this.missiles=new Set,this.lastEnergyBump=0,this.game.stage.addChild(this.energyIcon),this.game.stage.addChild(this.shieldIcon),this.beam=null,this.left=n,this.sprite.tint=this.left?this.game.settings.scolors[0]:this.game.settings.scolors[1],this.color=this.sprite.tint}update(e,t){if(super.update(e,t),!this.destroyed){this.lastEnergyBump+=e,1e3<=this.lastEnergyBump&&(this.lastEnergyBump=0,30>this.energy?(this.energy+=1,this.energyGraph.draw(this.energy)):30>this.shield&&(this.shield+=1,this.shieldGraph.draw(this.shield))),this.cloaking&&(1>this.energy?this.unCloak():(this.cloakTime+=e,500<=this.cloakTime&&(this.cloakTime=0,this.useEnergy(1))));for(let r of this.missiles)r.update(e,t);null!==this.beam&&this.beam.update(e,t)}}cloakToggle(){if(!this.cloaking){if(4>this.energy)return;this.cloaking=!0,this.cloakTime=0,this.sprite.tint=0,this.useEnergy(4)}else this.unCloak()}unCloak(){this.cloaking=!1,this.sprite.tint=this.color}thrust(e){h.applyForce(this.body,this.body.position,g.create(6e-4*(o(this.body.angle)*e),-6e-4*(n(this.body.angle)*e)))}thrustLeft(e){this.warping||(h.rotate(this.body,-.075*e),h.setAngularVelocity(this.body,0))}thrustRight(e){this.warping||(h.rotate(this.body,.075*e),h.setAngularVelocity(this.body,0))}warp(){if(this.warping||2>this.energy)return;this.sounds.warp.play(),this.useEnergy(2),d.World.remove(this.game.engine.world,[this.body]),this.warping=!0,this.sprite.anchor.set(.5,0),d.Body.setVelocity(this.body,d.Vector.create(0,0)),d.Body.setAngularVelocity(this.body,0);let e=d.Vector.clone(this.body.position);e=d.Vector.add(e,d.Vector.create(100*o(this.body.angle),-100*n(this.body.angle)));let t=d.Vector.clone(this.body.position);t=d.Vector.add(t,d.Vector.create(200*o(this.body.angle),-200*n(this.body.angle)));const r=this,a=new f.Tween({x:r.body.position.x,y:r.body.position.y,s:0}).to({x:t.x,y:t.y,s:100},200).easing(f.Easing.Quadratic.Out).onUpdate(function(){d.Body.setPosition(r.body,d.Vector.create(this.x,this.y))}).onComplete(function(){}).start(),i=new f.Tween({s:.5}).to({s:12.4},200).easing(f.Easing.Quadratic.Out).onUpdate(function(){r.sprite.scale.set(1.5,this.s)}).onComplete(function(){}),s=new f.Tween({s:12.4,z:0}).to({s:1.5,z:.5},125).easing(f.Easing.Quadratic.Out).onUpdate(function(){r.sprite.scale.set(1.5,this.s),r.sprite.anchor.set(.5,this.z)}).onComplete(function(){r.sprite.anchor.set(.5,.5),d.World.add(r.game.engine.world,[r.body]),r.warping=!1});i.chain(s),i.start()}fireMissile(){3>this.energy||5>this.missiles.size&&(this.sounds.launch.play(),this.missiles.add(new l(this.game,this,this.other)),this.useEnergy(3))}fireBeam(){1>this.energy||(null===this.beam||this.beam.destroyed)&&(this.sounds.beam.play(),this.beam=new p(this.game,this),this.useEnergy(2))}destruct(e){if(e){this.sounds.explodeship.play(),this.sounds.explode.play();let e=0,t=d.Vector.clone(this.body.position),r=d.Vector.clone(this.body.velocity);do{e++;let i=Math.random()*(2*s)-s,a=.4+4*Math.random(),l=d.Vector.add(r,d.Vector.create(n(i)*a,o(i)*a));new c(this.game,t,l,20+50*Math.random(),this.color)}while(100>e);this.left?this.game.end(0):this.game.end(1)}this.beam&&this.beam.destruct();for(let t of this.missiles)t.destruct();super.destruct()}adjust(e){-1===e&&30>this.energy&&1<this.shield?(this.shield-=1,this.energy+=1):1===e&&30>this.shield&&1<this.energy&&(this.energy-=1,this.shield+=1),this.energyGraph.draw(this.energy),this.shieldGraph.draw(this.shield)}useEnergy(e){this.energy-=e,this.energyGraph.draw(this.energy)}damage(e){this.game.settings.invincible||(this.shield-=e,0>=this.shield&&(this.shield=0,this.destruct(!0)),this.shieldGraph.draw(this.shield))}collide(e){'MISSILE'===e.type?this.damage(4):'MOON'===e.type&&this.destruct(!0)}}},function(e,t,r){const o=r(5);e.exports=class{constructor(e,t,r){this.game=e,this.speed=t,this.mspeed=r}update(){const e=o.Composite.allBodies(this.game.engine.world);for(let t of e)'MISSILE'===t.thing.type?t.speed>this.mspeed&&o.Body.setVelocity(t,o.Vector.mult(t.velocity,.95)):t.speed>this.speed&&o.Body.setVelocity(t,o.Vector.mult(t.velocity,.95))}destruct(){delete this.game}}},function(e,t,r){e.exports=r(95)}]);